System.register("chunks:///_virtual/AttributeCounter.ts",["./rollupPluginModLoBabelHelpers.js","cc","./KiwiInterfaceComponent.ts","./StaticDataStructures.ts","./KiwiText.ts","./GameSession.ts"],(function(t){var e,i,r,n,a,o,u,c,s,l,p,f;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,r=t.initializerDefineProperty,n=t.assertThisInitialized,a=t.createClass},function(t){o=t.cclegacy,u=t._decorator,c=t.Enum},function(t){s=t.KiwiInterfaceComponent},function(t){l=t.WhatAttribute},function(t){p=t.KiwiText},function(t){f=t.GameSession}],execute:function(){var b,h,y,g,w,x,A,T;o._RF.push({},"5dadah/hihIgLSM4oLL5PFK","AttributeCounter",void 0);var m=u.ccclass,v=u.property;t("AttributeCounter",(b=m("AttributeCounter"),h=v({type:c(l)}),y=v({type:p}),b((x=e((w=function(t){function e(){for(var e,i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return e=t.call.apply(t,[this].concat(a))||this,r(e,"counterAttributeType",x,n(e)),r(e,"prefixString",A,n(e)),r(e,"kiwiText",T,n(e)),e}i(e,t);var o=e.prototype;return o.initialize=function(e){t.prototype.initialize.call(this,e),e.registerLiveDataElement(this),this.liveDataArray.push(f.getAttribute(this.counterAttributeType))},o.onDataUpdate=function(){this.kiwiText.text=this.prefixString+this.kiwiText.numberToText(Math.floor(this.attributeData.currentValue),"")},a(e,[{key:"attributeData",get:function(){return this.liveDataArray[0]}}]),e}(s)).prototype,"counterAttributeType",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return l.stuffer_bagSize}}),A=e(w.prototype,"prefixString",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),T=e(w.prototype,"kiwiText",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=w))||g));o._RF.pop()}}}));

System.register("chunks:///_virtual/AudioController.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(i){var e,t,o,n,u,r,a,l,s,c,h;return{setters:[function(i){e=i.applyDecoratedDescriptor,t=i.inheritsLoose,o=i.initializerDefineProperty,n=i.assertThisInitialized,u=i.createClass},function(i){r=i.cclegacy,a=i._decorator,l=i.AudioSource,s=i.AudioClip,c=i.math,h=i.Component}],execute:function(){var d,p,y,f,m,S,g,_,M,k,C,v,A,b;r._RF.push({},"65663K5u4tKo7wtwx+8PvWB","AudioController",void 0);var T=a.ccclass,x=a.property;i("AudioController",(d=T("AudioController"),p=x({type:l}),y=x({type:l}),f=x({type:s}),m=x({type:s}),S=x({type:s}),d(((b=function(i){function e(){for(var e,t=arguments.length,u=new Array(t),r=0;r<t;r++)u[r]=arguments[r];return e=i.call.apply(i,[this].concat(u))||this,o(e,"audioSource",M,n(e)),o(e,"autoClickerSource",k,n(e)),o(e,"oneShotClips",C,n(e)),o(e,"regularBGM",v,n(e)),o(e,"kingBGM",A,n(e)),e._soundIdentifierClipMap=new Map,e._soundTime=0,e._soundIdentifierEndTimeMap=new Map,e._playingKingTheme=!1,e._timeMultiplierActive=!1,e.isMuted=!1,e.adsAreActive=!1,e.originalVolume=0,e.knockoutIndex=0,e.ouchIndex=0,e}t(e,i);var r=e.prototype;return r.initialize=function(){null==e.instance?e._instance=this:(console.log("duplicated audioController class, deleting"),this.destroy()),this.populateClipMap()},r.populateClipMap=function(){for(var i=0;i<this.oneShotClips.length;i++){var e=this.oneShotClips[i];this._soundIdentifierClipMap.set(e.name,e)}},r.update=function(i){var e=this;this._soundTime+=i,this._soundIdentifierEndTimeMap.forEach((function(i,t){i<e._soundTime&&e._soundIdentifierEndTimeMap.delete(t)}))},r.stopMusic=function(){this.audioSource.pause()},r.resumeMusic=function(){this.audioSource.playing||this.audioSource.play()},r.playBGM=function(){var i=this.audioSource.currentTime/this.audioSource.duration;this.audioSource.stop();var e=this._timeMultiplierActive?this.regularBGM[1]:this.regularBGM[0];this.audioSource.clip=e,this._playingKingTheme||(this.audioSource.currentTime=i*e.getDuration()),this.audioSource.enabled&&this.audioSource.play(),this._playingKingTheme=!1},r.playKingTheme=function(){var i=this.audioSource.currentTime/this.audioSource.duration;this.audioSource.stop();var e=this._timeMultiplierActive?this.kingBGM[1]:this.kingBGM[0];this.audioSource.clip=e,this._playingKingTheme&&(this.audioSource.currentTime=i*e.getDuration()),this.audioSource.enabled&&this.audioSource.play(),this._playingKingTheme=!0},r.setTimeMultiplierState=function(i){this._timeMultiplierActive=i,this._playingKingTheme?this.playKingTheme():this.playBGM()},r.setMutedState=function(i){this.isMuted=i,this.updateAudioEnabledState()},r.setAdsAreActive=function(i){this.adsAreActive=i,this.updateAudioEnabledState()},r.updateAudioEnabledState=function(){var i=!this.isMuted&&!this.adsAreActive;this.audioSource.enabled=i,this.autoClickerSource.enabled=i},r.setVolume=function(i){i=c.clamp(i,0,1),this.audioSource.volume=i,this.autoClickerSource.volume=i},r.muteForAd=function(){this.originalVolume=this.currentVolume,this.setVolume(0)},r.unmuteForAd=function(){this.setVolume(this.originalVolume)},r.playOneShot=function(i){if(this.audioSource.enabled&&!this._soundIdentifierEndTimeMap.has(i)){var e=this._soundIdentifierClipMap.get(i),t=.4*e.getDuration();this.audioSource.playOneShot(e),this._soundIdentifierEndTimeMap.set(i,this._soundTime+t)}},r.playKiwiBoingSound=function(){this._timeMultiplierActive?this.playOneShot("boing_200"):this.playOneShot("boing_100")},r.playXrayClickSound=function(i){var e;e=i<=1.25?"xrayClick_050":i<=1.5?"xrayClick_075":i<=2?"xrayClick_100":i<=3?"xrayClick_150":i<=4.5?"xrayClick_200":i<=6.5?"xrayClick_300":"xrayClick_400",this.playOneShot(e)},r.playKnockoutSound=function(){this.knockoutIndex=(this.knockoutIndex+1)%3,this.playOneShot("knockout"+this.knockoutIndex)},r.playOuchSound=function(){this.ouchIndex=(this.ouchIndex+1)%3,this.playOneShot("peasantHit"+this.ouchIndex)},r.playAutoClicker=function(){this.autoClickerSource.play()},u(e,[{key:"currentVolume",get:function(){return this.audioSource.volume}}],[{key:"instance",get:function(){return this._instance}}]),e}(h))._instance=null,M=e((_=b).prototype,"audioSource",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=e(_.prototype,"autoClickerSource",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=e(_.prototype,"oneShotClips",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),v=e(_.prototype,"regularBGM",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),A=e(_.prototype,"kingBGM",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),g=_))||g));r._RF.pop()}}}));

System.register("chunks:///_virtual/AutoKiwikerSimulation.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameManager.ts","./StaticDataStructures.ts","./GameSession.ts"],(function(t){var i,e,r,a,n,u;return{setters:[function(t){i=t.createClass},function(t){e=t.cclegacy,r=t._decorator},function(t){a=t.GameManager},function(t){n=t.WhatAttribute},function(t){u=t.GameSession}],execute:function(){var o,s;e._RF.push({},"282f1dvus9MtaSD+SfdDnZD","AutoKiwikerSimulation",void 0);var l=r.ccclass,h=(r.property,t("AutoKiwikerSimulation",l("AutoKiwikerSimulation")(((s=function(){function t(t){this._simulationTime=0,this._hitterCount=1,this.autoKiwikerAttributeData=null,this.hitterIndex=0,this._allCarHitters=[],this._simulationTime=t,this.autoKiwikerAttributeData=u.getAttribute(n.kiwiProduction_auto)}var e=t.prototype;return e.updateSimulation=function(t){this._simulationTime+=t,this.updateHitters()},e.updateHitters=function(){for(var i=this.autoKiwikerAttributeData.currentValue>0;this.allCarHitters.length<this.hitterCount;)this.addNewHitter();for(var e=0;e<this.allCarHitters.length;e++){var r=this.allCarHitters[e];r.hitterState==h.hitting&&this.simulationTime>r.hitEndTime&&(a.instance.autoKiwikerHitCompletedCallback(),this.prepareHitterForNextHit(r)),r.hitterState==h.preparing&&this.simulationTime>r.preparationEndTime&&(r.hitterState=h.hitting,r.hitEndTime=r.preparationEndTime+t.autoHitMoveDuration),r.hitterState==h.disabled==i&&(i?this.prepareHitterForNextHit(r):r.hitterState=h.disabled)}},e.prepareHitterForNextHit=function(i){i.hitterState=h.preparing,i.preparationEndTime=this.simulationTime+t.autoKiwikerInterval},e.addNewHitter=function(){var t={hitterState:h.disabled,preparationEndTime:0,hitEndTime:0};this._allCarHitters.push(t)},i(t,[{key:"simulationTime",get:function(){return this._simulationTime}},{key:"hitterCount",get:function(){return this._hitterCount}},{key:"allCarHitters",get:function(){return this._allCarHitters}}]),t}()).autoKiwikerInterval=6,s.autoHitMoveDuration=.3,o=s))||o),t("CarHitterState",function(t){return t[t.disabled=0]="disabled",t[t.preparing=1]="preparing",t[t.hitting=2]="hitting",t}({})));e._RF.pop()}}}));

System.register("chunks:///_virtual/AutoKiwikerViewController.ts",["./rollupPluginModLoBabelHelpers.js","cc","./AutoKiwikerSimulation.ts","./CarHitterAnimator.ts","./SimpleAnimator.ts","./TyrantUtils.ts","./AudioController.ts","./TransformWhenBoosted.ts","./GameManager.ts"],(function(t){var i,e,a,n,r,o,s,l,u,d,h,m,c,g,p,w,f,S,A,v,V,b,T;return{setters:[function(t){i=t.applyDecoratedDescriptor,e=t.inheritsLoose,a=t.initializerDefineProperty,n=t.assertThisInitialized,r=t.createClass},function(t){o=t.cclegacy,s=t._decorator,l=t.Sprite,u=t.Prefab,d=t.Node,h=t.math,m=t.Vec3,c=t.instantiate,g=t.Component},function(t){p=t.CarHitterState,w=t.AutoKiwikerSimulation},function(t){f=t.CarHitterAnimator},function(t){S=t.OnePerObjectAnimator,A=t.AnimateMoveToTargetNode},function(t){v=t.EaseType},function(t){V=t.AudioController},function(t){b=t.TransformWhenBoosted},function(t){T=t.GameManager}],execute:function(){var P,C,y,H,M,k,D,E,N,K;o._RF.push({},"b5791QKHuhFQaki1/m8tP14","AutoKiwikerViewController",void 0);var z=s.ccclass,R=s.property,O=(t("AutoKiwikerViewController",(P=z("AutoKiwikerViewController"),C=R({type:l}),y=R({type:u}),H=R({type:d}),P(((K=function(t){function i(){for(var i,e=arguments.length,r=new Array(e),o=0;o<e;o++)r[o]=arguments[o];return i=t.call.apply(t,[this].concat(r))||this,a(i,"progressCircleSprite",D,n(i)),a(i,"carPrefab",E,n(i)),a(i,"carMovePointNodes",N,n(i)),i.simulation=void 0,i.lastSimulationTime=0,i.lastProgress=-1,i.moveAnimator=new S(1,!0),i.hitterViews=[],i}e(i,t);var o=i.prototype;return o.initialize=function(t){this.simulation=t},o.updateAutoViews=function(){this.checkPopulateCarHitters(),this.updateAllViewStates(),this.updateProgressCircle(),this.updateViewAnimators(),this.lastSimulationTime=this.simulation.simulationTime},o.updateAllViewStates=function(){for(var t=0;t<this.hitterViews.length;t++){var e=this.hitterViews[t],a=this.simulation.allCarHitters[t];e.lastDataState!=a.hitterState?(e.lastDataState==p.disabled&&(e.assignedAnimator.setCarShakeEnabled(!0),V.instance.playAutoClicker()),a.hitterState==p.disabled&&(e.assignedAnimator.setCarShakeEnabled(!1),e.lastDataState=p.disabled,e.lastViewState=O.disabled,this.doViewMoveToStart(e)),a.hitterState==p.preparing&&(e.lastDataState=p.preparing),a.hitterState==p.hitting&&(e.lastDataState=p.hitting,e.lastViewState=O.hitting,e.stateEndTime=this.lastSimulationTime+w.autoHitMoveDuration,this.doViewMoveToHitEnd(e))):e.lastViewState!=O.disabled&&this.lastSimulationTime>e.stateEndTime&&(e.lastViewState==O.hitting?(e.lastViewState=O.waitingAfterHit,e.stateEndTime=this.lastSimulationTime+i.postHitWaitDuration):e.lastViewState==O.waitingAfterHit?(e.lastViewState=O.returning,e.stateEndTime=this.lastSimulationTime+i.hitReturnMoveDuration,this.doViewMoveToStart(e)):e.lastViewState==O.returning&&(e.lastViewState=O.preparing,e.stateEndTime=this.lastSimulationTime+i.hitReturnMoveDuration,this.doViewMoveToStart(e)))}},o.updateProgressCircle=function(){var t=0;this.hitterViews.length<=0||this.hitterViews[0].lastDataState==p.disabled?t=0:t=(this.lastSimulationTime-(this.simulation.allCarHitters[0].preparationEndTime-w.autoKiwikerInterval))/w.autoKiwikerInterval;(t=h.clamp(t,0,1))!=this.lastProgress&&(this.progressCircleSprite.fillRange=-t,this.lastProgress=t)},o.doViewMoveToStart=function(t){t.assignedAnimator.requestFadeOut(i.hitReturnMoveDuration);var e=new m(0,t.assignedAnimator.bodyVerticalOffset,0);this.moveAnimator.addAnimations([new A(t.assignedAnimator.node,this.startingPointNode,e,i.hitReturnMoveDuration,[])])},o.doViewMoveToHitEnd=function(t){t.assignedAnimator.requestFadeIn(w.autoHitMoveDuration);var i=new m(0,t.assignedAnimator.bodyVerticalOffset,0);V.instance.playOneShot("autoclickerAccelerate"),this.moveAnimator.addAnimations([new A(t.assignedAnimator.node,this.bouncePointNode,i,w.autoHitMoveDuration,[new A(t.assignedAnimator.node,this.endingPointNode,i,.15,[]).setEaseType(v.Out)]).setEaseType(v.In)])},o.updateViewAnimators=function(){var t=this.simulation.simulationTime-this.lastSimulationTime;this.moveAnimator.updateAnimations(t);for(var i=0;i<this.hitterViews.length;i++)this.hitterViews[i].assignedAnimator.updateAnimations(t)},o.getCarHitterPosition=function(){return this.hitterViews[0].assignedAnimator.node.getWorldPosition()},o.checkPopulateCarHitters=function(){for(;this.hitterViews.length<this.simulation.allCarHitters.length;){var t=this.simulation.allCarHitters.length-1,i=c(this.carPrefab).getComponent(f);i.initialize(t),i.getComponent(b).initialize(T.instance.interfaceManager),this.startingPointNode.parent.insertChild(i.node,999),i.setPosition(this.startingPointNode.getPosition()),i.setCarShakeEnabled(!1);var e={lastViewState:O.disabled,lastDataState:p.disabled,assignedAnimator:i,stateEndTime:0};this.hitterViews.push(e)}},r(i,[{key:"startingPointNode",get:function(){return this.carMovePointNodes[0]}},{key:"bouncePointNode",get:function(){return this.carMovePointNodes[1]}},{key:"endingPointNode",get:function(){return this.carMovePointNodes[2]}}]),i}(g)).postHitWaitDuration=1.5,K.hitReturnMoveDuration=1.4,D=i((k=K).prototype,"progressCircleSprite",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=i(k.prototype,"carPrefab",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=i(k.prototype,"carMovePointNodes",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),M=k))||M)),t("CarHitterVisualStates",function(t){return t[t.disabled=0]="disabled",t[t.preparing=1]="preparing",t[t.hitting=2]="hitting",t[t.waitingAfterHit=3]="waitingAfterHit",t[t.returning=4]="returning",t}({})));o._RF.pop()}}}));

System.register("chunks:///_virtual/BigKiwiController.ts",["./rollupPluginModLoBabelHelpers.js","cc","./KiwiInterfaceAnimator.ts","./SimpleAnimator.ts","./AudioController.ts","./GameSession.ts","./StaticDataStructures.ts"],(function(i){var t,e,o,n,s,r,a,c,u,h,l,p,m,d,w,_,S,y;return{setters:[function(i){t=i.applyDecoratedDescriptor,e=i.inheritsLoose,o=i.initializerDefineProperty,n=i.assertThisInitialized,s=i.createClass},function(i){r=i.cclegacy,a=i._decorator,c=i.Sprite,u=i.ParticleSystem2D,h=i.NodeEventType,l=i.input,p=i.Input,m=i.KeyCode},function(i){d=i.KiwiInterfaceAnimator},function(i){w=i.AnimateUnique_KiwiBoing},function(i){_=i.AudioController},function(i){S=i.GameSession},function(i){y=i.WhatAttribute}],execute:function(){var g,f,b,K,A,v,E;r._RF.push({},"2315e8XshtBfLvjtV6Q1CTC","BigKiwiController",void 0);var C=a.ccclass,D=a.property;i("BigKiwiController",(g=C("BigKiwiController"),f=D({type:c}),b=D({type:u}),g((v=t((A=function(i){function t(){for(var t,e=arguments.length,s=new Array(e),r=0;r<e;r++)s[r]=arguments[r];return t=i.call.apply(i,[this].concat(s))||this,o(t,"bigKiwiSprite",v,n(t)),o(t,"bigKiwiParticleSystem",E,n(t)),t._spaceDown=!1,t._spaceHeld=!1,t.emissionRate=1,t._shotCooldown=0,t._shotInterval=.05,t.particleSystemEmissionEndTime=0,t._isHovered=!1,t._mouseDown=!1,t}e(t,i);var r=t.prototype;return r.initialize=function(t){i.prototype.initialize.call(this,t),this.liveDataArray.push(S.getAttribute(y.gun_ammoLimit)),this.liveDataArray.push(S.getAttribute(y.gun_currentAmmo)),this.bigKiwiSprite.node.on(h.MOUSE_ENTER,this.onHoverEnter,this),this.bigKiwiSprite.node.on(h.MOUSE_LEAVE,this.onHoverExit,this),this.bigKiwiSprite.node.on(h.MOUSE_DOWN,this.onMouseDown,this),this.bigKiwiSprite.node.on(h.MOUSE_UP,this.onMouseUp,this),this.bigKiwiSprite.node.on(h.TOUCH_START,this.onTouchStart,this),this.bigKiwiSprite.node.on(h.TOUCH_END,this.onTouchEnd,this),this.bigKiwiSprite.node.on(h.TOUCH_CANCEL,this.onTouchEnd,this),l.on(p.EventType.KEY_PRESSING,this.onKeyPressed,this),this.bigKiwiParticleSystem.resetSystem()},r.onKeyPressed=function(i){i.keyCode==m.SPACE&&(this._spaceDown&&(this._spaceHeld=!0),this._spaceDown=!0)},r.updateSpaceInput=function(){this._spaceDown?(this._spaceDown=!1,this._spaceHeld=!0):this._spaceHeld=!1},r.onDataUpdate=function(){},r.updateAnimator=function(t){var e=t-this.lastAnimationTime;if(this.updateSpaceInput(),i.prototype.updateAnimator.call(this,t),this.bigKiwiParticleSystem.emissionRate>0&&t>=this.particleSystemEmissionEndTime&&(this.bigKiwiParticleSystem.emissionRate=0),this.ammoLimitAttribute.isUnlocked){this._shotCooldown-=e;var o=this.currentAmmoAttribute.currentValue;(this._spaceHeld||this._isHovered&&this._mouseDown)&&this._shotCooldown<=0&&o>0&&(this.doKiwiClick(),this.currentAmmoAttribute.setValue(o-1),this._shotCooldown=this._shotInterval)}},r.doBigKiwiBounce=function(i){this.emissionRate=i<=5?20*i:100+20*Math.min(15,Math.sqrt(i-5)),this.bigKiwiSprite.node.setScale(1.15,.85,1),this.animator.addAnimationBlock([new w(this.bigKiwiSprite.node,.6,[])]),this.bigKiwiParticleSystem.emissionRate+=this.emissionRate,this.particleSystemEmissionEndTime=this.lastAnimationTime+.05,_.instance.playKiwiBoingSound()},r.onHoverEnter=function(){this._isHovered=!0},r.onHoverExit=function(){this._isHovered=!1,this._mouseDown=!1},r.onMouseDown=function(i){this._mouseDown=!0,this._isHovered&&this.doKiwiClick()},r.onMouseUp=function(){this._mouseDown=!1},r.doKiwiClick=function(){this.interfaceManager.bigKiwiClickedCallback()},r.onTouchStart=function(i){this._isHovered=!0,this._mouseDown=!0,this.doKiwiClick()},r.onTouchEnd=function(){this._isHovered=!1,this._mouseDown=!1},s(t,[{key:"clickProductionAttribute",get:function(){return this.liveDataArray[0]}},{key:"ammoLimitAttribute",get:function(){return this.liveDataArray[0]}},{key:"currentAmmoAttribute",get:function(){return this.liveDataArray[1]}}]),t}(d)).prototype,"bigKiwiSprite",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=t(A.prototype,"bigKiwiParticleSystem",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),K=A))||K));r._RF.pop()}}}));

System.register("chunks:///_virtual/BuildingBoostDurationTimer.ts",["./rollupPluginModLoBabelHelpers.js","cc","./KiwiInterfaceComponent.ts","./KiwiText.ts","./GameParameters.ts"],(function(t){var i,e,r,o,a,n,s,l,c,u;return{setters:[function(t){i=t.applyDecoratedDescriptor,e=t.inheritsLoose,r=t.initializerDefineProperty,o=t.assertThisInitialized,a=t.createClass},function(t){n=t.cclegacy,s=t._decorator},function(t){l=t.KiwiInterfaceComponent},function(t){c=t.KiwiText},function(t){u=t.TextFormatter}],execute:function(){var p,m,d,h,f;n._RF.push({},"b8e6dwNCZ5NwLdKM8FSRGpg","BuildingBoostDurationTimer",void 0);var D=s.ccclass,g=s.property;t("BuildingBoostDurationTimer",(p=D("BuildingBoostDurationTimer"),m=g({type:c}),p((f=i((h=function(t){function i(){for(var i,e=arguments.length,a=new Array(e),n=0;n<e;n++)a[n]=arguments[n];return i=t.call.apply(t,[this].concat(a))||this,r(i,"timerField",f,o(i)),i.lastBoostTime=0,i.isVisible=!1,i}e(i,t);var n=i.prototype;return n.initialize=function(i){t.prototype.initialize.call(this,i),i.registerLiveDataElement(this)},n.setPairedBoostData=function(t){this.liveDataArray.length>0?console.error("duplicated boost binding attempt"):(this.liveDataArray.push(t),this.onDataUpdate())},n.onDataUpdate=function(){var t=this.boostData.timeLeft;t!=this.lastBoostTime&&(this.lastBoostTime=t,this.timerField.text=u.getTimeStringFromSecondsTimer(t))},n.updateVisibilityState=function(){var t=this.boostData.timeLeft>0;t!=this.isVisible&&(this.isVisible=t,this.timerField.node.active=t)},a(i,[{key:"boostData",get:function(){return this.liveDataArray[0]}}]),i}(l)).prototype,"timerField",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),d=h))||d));n._RF.pop()}}}));

System.register("chunks:///_virtual/BuildingUpgradeButton.ts",["./rollupPluginModLoBabelHelpers.js","cc","./KiwiText.ts","./StaticDataStructures.ts","./KiwiButtonController.ts","./KiwiInterfaceAnimator.ts","./SimpleAnimator.ts","./AudioController.ts","./GameSession.ts","./BuildingBoostDurationTimer.ts","./UnlockBuildingAnimationController.ts","./PointerInputHandler.ts","./RepeatingPointer.ts"],(function(t){var i,e,n,o,r,l,a,u,s,c,h,d,g,p,b,y,f,k,B,m,v,U,A,D,w,C;return{setters:[function(t){i=t.applyDecoratedDescriptor,e=t.inheritsLoose,n=t.initializerDefineProperty,o=t.assertThisInitialized,r=t.createClass},function(t){l=t.cclegacy,a=t._decorator,u=t.Enum,s=t.Node,c=t.Vec3,h=t.NodeEventType,d=t.math},function(t){g=t.KiwiText},function(t){p=t.BuildingType,b=t.CurrencyType},function(t){y=t.KiwiButtonController,f=t.KiwiButtonPressAction},function(t){k=t.KiwiInterfaceAnimator},function(t){B=t.AnimateMovement,m=t.AnimateUnique_KiwiBoing},function(t){v=t.AudioController},function(t){U=t.GameSession},function(t){A=t.BuildingBoostDurationTimer},function(t){D=t.UnlockBuildingAnimationController},function(t){w=t.PointerEventTypes},function(t){C=t.RepeatingPointer}],execute:function(){var P,T,F,S,z,_,M,N,O,R,K,L,E,I,V,x,q,H,W,j,G;l._RF.push({},"a98864OQJ5NEqwZHKrMoAyF","BuildingUpgradeButton",void 0);var J=a.ccclass,Q=a.property,X=(t("BuildingUpgradeButton",(P=J("BuildingUpgradeButton"),T=Q({type:u(p)}),F=Q({type:s}),S=Q({type:C}),z=Q({type:g}),_=Q({type:s}),M=Q({type:s}),N=Q({type:D}),O=Q({type:A}),R=Q({type:y}),P((E=i((L=function(t){function i(){for(var i,e=arguments.length,r=new Array(e),l=0;l<e;l++)r[l]=arguments[l];return i=t.call.apply(t,[this].concat(r))||this,n(i,"buttonBuildingType",E,o(i)),i.isUnlocked=void 0,i.isPurchaseable=void 0,n(i,"backgroundFrame",I,o(i)),n(i,"upgradeAvailablePointer",V,o(i)),n(i,"unlockRequirementField",x,o(i)),n(i,"lockNode",q,o(i)),n(i,"unlockprogressNode",H,o(i)),n(i,"unlockAnimator",W,o(i)),n(i,"boostDurationField",j,o(i)),n(i,"levelButtonController",G,o(i)),i.lastLevel=null,i.unlockCostString="",i.isVisiblyUnlockable=!1,i}e(i,t);var l=i.prototype;return l.initialize=function(i){t.prototype.initialize.call(this,i),i.registerLiveDataElement(this),this.levelButtonController.initialize(i),this.levelButtonController.addPrimaryPointerAction(new X(this)),this.levelButtonController.addActionToInput(w.Mouse_down,new Z(this)),this.upgradeAvailablePointer.initialize(i),this.liveDataArray.push(U.getBuildingData(this.buildingType)),this.liveDataArray.push(U.getCurrencyData(this.buildingData.staticBuildingData.upgradeCurrencyType)),this.liveDataArray.push(U.getBoostForBuilding(this.buildingType)),this.boostDurationField.setPairedBoostData(U.getBoostForBuilding(this.buildingType)),this.boostDurationField.initialize(i),this.setUnlockedState(this.buildingData.startUnlocked),this.flagForForcedUpdate()},l.onDataUpdate=function(){var t=this.buildingData.buildingLevel;this.lastLevel!=t&&(this.levelButtonController.kiwiText.text=t.toString(),this.lastLevel=t);var i=this.currencyData.currentAmount,e=this.buildingData.getTotalCostForUpgradeLevelCount(1);this.setIsPurchaseable(i>=e),!1===this.isUnlocked&&this.updateUnlockProgress(i,e),this.boostDurationField.updateVisibilityState()},l.receiveButtonPress=function(){this.isUnlocked&&this.interfaceManager.buildingLevelButtonPressedCallback(this.buildingType)},l.onMouseDown=function(){this.interfaceManager.flagUpgradeWindowClick()},l.tryUnlocking=function(){this.isPurchaseable?(this.setUnlockedState(!0),v.instance.playOneShot("unlockUpgrade"),this.unlockAnimator.playUnlockAnimation()):U.tryChargeCurrency(Number.MAX_VALUE,b.koin)},l.hideButton=function(){this.levelButtonController.node.setPosition(new c(0,800,0))},l.unhideButton=function(){this.animator.addAnimationBlock([new B(this.levelButtonController.node,new c(0,0,0),1.2,[new m(this.node,.6,[])])])},l.setUnlockedState=function(t){null!=this.isUnlocked&&this.isUnlocked===t||(!1!==this.isUnlocked&&0==t?(this.backgroundFrame.on(h.MOUSE_DOWN,this.tryUnlocking,this),this.backgroundFrame.on(h.TOUCH_START,this.tryUnlocking,this)):!1===this.isUnlocked&&1==t&&(this.backgroundFrame.off(h.MOUSE_DOWN,this.tryUnlocking,this),this.backgroundFrame.off(h.TOUCH_START,this.tryUnlocking,this)),this.isUnlocked=t,this.lockNode.active=!this.isUnlocked,this.levelButtonController.setCanBeInteractedWith(this.isUnlocked,!1))},l.updateUnlockProgress=function(t,i){var e=t/i;this.unlockprogressNode.setScale(1,d.clamp(e,0,1),1),""==this.unlockCostString&&(this.unlockCostString=i.toString(),this.unlockRequirementField.text="unlock at\n<size=36><color=#FFB607><img src='icon_koin' height=40 offset=-2,-3 />"+this.unlockRequirementField.numberToText(i,"")+"</color></size>")},l.setIsPurchaseable=function(t){this.isPurchaseable!==t&&(this.isPurchaseable=t||!this.isUnlocked&&(t||this.isPurchaseable),this.isPurchaseable&&!this.isVisiblyUnlockable&&(this.isVisiblyUnlockable=!0,this.unlockAnimator.showReadyToUnlockVisuals()),!1!==this.isUnlocked&&(this.upgradeAvailablePointer.node.active=this.isPurchaseable,this.levelButtonController.setButtonVisuals_activeColorScheme(this.isPurchaseable,!1)))},r(i,[{key:"buildingType",get:function(){return this.buttonBuildingType}},{key:"buildingData",get:function(){return this.liveDataArray[0]}},{key:"currencyData",get:function(){return this.liveDataArray[1]}}]),i}(k)).prototype,"buttonBuildingType",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return p.autoKiwiker}}),I=i(L.prototype,"backgroundFrame",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),V=i(L.prototype,"upgradeAvailablePointer",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=i(L.prototype,"unlockRequirementField",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),q=i(L.prototype,"lockNode",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),H=i(L.prototype,"unlockprogressNode",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),W=i(L.prototype,"unlockAnimator",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),j=i(L.prototype,"boostDurationField",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),G=i(L.prototype,"levelButtonController",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),K=L))||K)),t("OnButtonPress_BuildingButton_Toggle",function(t){function i(){return t.apply(this,arguments)||this}return e(i,t),i.prototype.doButtonPressAction=function(t){this.interactionObject.receiveButtonPress()},i}(f))),Z=t("OnMouseDown_buildingUpgradeButton",function(t){function i(){return t.apply(this,arguments)||this}return e(i,t),i.prototype.doButtonPressAction=function(t){this.interactionObject.onMouseDown()},i}(f));l._RF.pop()}}}));

System.register("chunks:///_virtual/BuildingUpgradeWindowController.ts",["./rollupPluginModLoBabelHelpers.js","cc","./KiwiText.ts","./GameParameters.ts","./StaticDataStructures.ts","./TyrantUtils.ts","./KiwiButtonController.ts","./KiwiInterfaceAnimator.ts","./SimpleAnimator.ts","./GameSession.ts"],(function(t){var e,i,n,o,r,a,s,u,l,c,d,h,p,g,b,f,B,w,v,m,y,C,S,T;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,o=t.assertThisInitialized,r=t.createClass},function(t){a=t.cclegacy,s=t._decorator,u=t.Node,l=t.UITransform,c=t.Sprite,d=t.Vec3,h=t.math},function(t){p=t.KiwiText},function(t){g=t.ColorFormatter,b=t.TextFormatter},function(t){f=t.CurrencyType},function(t){B=t.TyrantUtils,w=t.EaseType},function(t){v=t.KiwiButtonController,m=t.KiwiButtonPressAction},function(t){y=t.KiwiInterfaceAnimator},function(t){C=t.OnePerObjectAnimator,S=t.AnimateMovement},function(t){T=t.GameSession}],execute:function(){var D,P,F,A,_,W,k,x,N,U,z,I,O,L,V,M,E,j,K,R,H,q,$,G,Q,Z,J,X,Y,tt,et,it,nt,ot,rt,at,st,ut,lt,ct,dt,ht,pt;a._RF.push({},"fc004fzINNBV5WH1MrveZuy","BuildingUpgradeWindowController",void 0);var gt=s.ccclass,bt=s.property,ft=(t("BuildingUpgradeWindowController",(D=gt("BuildingUpgradeWindowController"),P=bt({type:u}),F=bt({type:l}),A=bt({type:u}),_=bt({type:u}),W=bt({type:u}),k=bt({type:v}),x=bt({type:p}),N=bt({type:u}),U=bt({type:c}),z=bt({type:p}),I=bt({type:p}),O=bt({type:p}),L=bt({type:p}),V=bt({type:p}),M=bt({type:u}),E=bt({type:u}),j=bt({type:u}),K=bt({type:v}),R=bt({type:v}),H=bt({type:u}),D((G=e(($=function(t){function e(){for(var e,i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];return e=t.call.apply(t,[this].concat(r))||this,n(e,"windowContainer",G,o(e)),n(e,"upgradeWindowTransform",Q,o(e)),n(e,"upgradeWindowTailNode",Z,o(e)),n(e,"boostSectionContainer",J,o(e)),n(e,"boostSectionPointerNode",X,o(e)),n(e,"activateBoostButton",Y,o(e)),n(e,"boostEffectField",tt,o(e)),n(e,"boostIconNode",et,o(e)),n(e,"buildingIconSprite",it,o(e)),n(e,"buildingTitleField",nt,o(e)),n(e,"attributeTitleField",ot,o(e)),n(e,"attributeValueCurrentField",rt,o(e)),n(e,"attributeValueNextField",at,o(e)),n(e,"tierCurrentField",st,o(e)),n(e,"tierUpIndicatorNode",ut,o(e)),n(e,"tierUpProgressNode_Current",lt,o(e)),n(e,"tierUpProgressNode_Next",ct,o(e)),n(e,"windowCloseButton",dt,o(e)),n(e,"purchaseButton",ht,o(e)),n(e,"amountSelectorContainerNode",pt,o(e)),e.amountSelectors=[],e.allButtons=[],e.windowClickedTimer=0,e.playerClickedSomewhere=!1,e._currentUpgradePrice=0,e._currentLevel=0,e.windowVerticalOffset=36,e.windowScreenPadding_left=124,e.windowScreenPadding_right=84,e.showingBoostSection=!1,e.purchaseQuantityPerSelectorIndex=[1,5,25,-1],e.activeSelectorIndex=0,e.animator=new C(1,!0),e.boostSectionPosition_visible=new d(0,280,0),e.boostSectionPosition_hidden=new d(0,50,0),e.boostActive=!1,e}i(e,t);var a=e.prototype;return a.initialize=function(e){t.prototype.initialize.call(this,e),e.registerLiveDataElement(this),this.windowContainer.on(u.EventType.TOUCH_START,this.flagWindowClick,this,!0),this.windowContainer.on(u.EventType.TOUCH_END,this.flagWindowClick,this,!0),this.initializeButtons()},a.initializeButtons=function(){for(var t=this.amountSelectorContainerNode.children,e=0;e<t.length;e++){var i=t[e].getComponent(v);this.amountSelectors.push(i),this.allButtons.push(i),i.initialize(this.interfaceManager),i.addPrimaryPointerAction(new Bt({object:this,buttonIndex:e}))}this.purchaseButton.initialize(this.interfaceManager),this.purchaseButton.addPrimaryPointerAction(new wt(this)),this.allButtons.push(this.purchaseButton),this.windowCloseButton.initialize(this.interfaceManager),this.windowCloseButton.addPrimaryPointerAction(new ft(this)),this.allButtons.push(this.windowCloseButton),this.receiveAmountSelectorClick(0),this.activateBoostButton.initialize(this.interfaceManager),this.activateBoostButton.addPrimaryPointerAction(new vt(this)),this.allButtons.push(this.activateBoostButton)},a.updateAnimator=function(e){this.playerClickedSomewhere&&this.windowClickedTimer<=0&&this.closeWindow();var i=e-this.lastAnimationTime;this.windowClickedTimer-=i,this.playerClickedSomewhere=!1,t.prototype.updateAnimator.call(this,e),this.boostActive&&this.updateBoostTimerDisplay()},a.flagPlayerClick=function(){this.playerClickedSomewhere=!0},a.flagWindowClick=function(){this.windowClickedTimer=.1},a.onDataUpdate=function(){this.hasBuildingData&&(this.activeBuildingData.buildingLevel!=this._currentLevel?this.updateWindowContents():this.updatePurchaseButtonContents())},a.updateWindowContents=function(){if(this.hasBuildingData){var t=this.getPurchaseLevelCountAndPrice();this._currentUpgradePrice=t[1],this._currentLevel=this.activeBuildingData.buildingLevel;var e=this.activeBuildingData.buildingTier,i=this.activeBuildingData.staticBuildingData.tierInterval,n=this.activeBuildingData.compositeAttribute,o=n.currentValue,r=n.getTotalWithAdditionalAttribute(this.activeBuildingData.getAttributeValueForLevel(this._currentLevel+t[0]),this.activeBuildingData.buildingAttribute.valueOperation);this.attributeValueCurrentField.setNumberFormat(n.numberFormat),this.attributeValueNextField.setNumberFormat(n.numberFormat),this.attributeValueCurrentField.text=this.attributeValueCurrentField.numberToText(Math.floor(o),""),this.attributeValueNextField.text=this.attributeValueCurrentField.numberToText(Math.floor(r),""),this.tierCurrentField.text=e>0?this.tierCurrentField.numberToText(e,""):"-",this.tierUpProgressNode_Current.setScale(h.clamp(this._currentLevel%i/i,0,1),1,1),this.tierUpProgressNode_Next.setScale(h.clamp((this._currentLevel%i+t[0])/i,0,1),1,1),this.updatePurchaseButtonContents(),this.checkShowBoostSection(),this.showingBoostSection&&this.updateDisplayedBoostData()}},a.updatePurchaseButtonContents=function(){if(this.hasBuildingData){var t=this.activeCurrencyData.currentAmount>=this._currentUpgradePrice;this.purchaseButton.kiwiText.text=this.purchaseButton.kiwiText.numberToText(Math.ceil(this._currentUpgradePrice),"koins"),this.purchaseButton.kiwiText.color=t?g.color_offWhite:g.color_errorRed,this.purchaseButton.setButtonVisuals_activeColorScheme(t,!1)}},a.requestWindowForBuildingType=function(t){null==t||this.hasBuildingData&&t==this.activeBuildingData.buildingType?this.closeWindow():this.interfaceManager.requestOpenBuildingUpgradeWindow(t)},a.closeWindow=function(){this.clearBuildingData(),this.windowContainer.active=!1,this.boostActive=!1;for(var t=0;t<this.allButtons.length;t++)this.allButtons[t].reset();this.interfaceManager.buildingUpgradeWindowClosedCallback()},a.closeWindowButtonPressedCallback=function(){this.closeWindow()},a.openWindowForButton=function(t){this.flagWindowClick(),this.setBuildingDataFromType(t.buildingType);var e=this.upgradeWindowTransform.width/2,i=T.getScreenWidth(),n=T.getScreenHeight(),o=new d(0,0,0);t.node.getWorldPosition(o),B.setWorldToCanvasPosition(o,i,n);var r=new d(h.clamp(o.x,-i/2+this.windowScreenPadding_left+e,i/2-(this.windowScreenPadding_right+e)),o.y+this.windowVerticalOffset,0);this.windowContainer.setPosition(r),this.upgradeWindowTailNode.setPosition(o.x-r.x,this.upgradeWindowTailNode.position.y,this.upgradeWindowTailNode.position.z),this.buildingIconSprite.spriteFrame=this.interfaceManager.getSpriteFrameFromIdentifier(this.activeBuildingData.staticBuildingData.buildingIdentifier),this.buildingTitleField.text=this.activeBuildingData.staticBuildingData.buildingName,this.attributeTitleField.text=this.activeBuildingData.staticBuildingData.attributeTitle,this.updateWindowContents()},a.checkShowBoostSection=function(){var t=this.activeBuildingData.buildingLevel;!this.showingBoostSection&&t>=2?this.showBoostSection():this.showingBoostSection&&t<2&&this.hideBoostSection()},a.clearBuildingData=function(){this.liveDataArray.length=0},a.setBuildingDataFromType=function(t){this.clearBuildingData(),this.liveDataArray.push(T.getBuildingData(t)),this.liveDataArray.push(T.getCurrencyData(this.activeBuildingData.staticBuildingData.upgradeCurrencyType)),this.liveDataArray.push(T.getBoostForBuilding(t))},a.getPurchaseLevelCountAndPrice=function(){var t=[this.purchaseQuantityPerSelectorIndex[this.activeSelectorIndex],0];if(t[0]>0)t[1]=this.activeBuildingData.getTotalCostForUpgradeLevelCount(t[0]);else{var e=T.getCurrencyAmount(f.koin);t=this.activeBuildingData.getMaxAffordableUpgradeLevelCountAndCostFromCurrencyAmount(e)}return t[1]=Math.ceil(t[1]),t},a.receiveAmountSelectorClick=function(t){this.flagWindowClick(),this.activeSelectorIndex=t;for(var e=0;e<this.amountSelectors.length;e++)this.amountSelectors[e].setCanBeInteractedWith(e!=t,!1);this.flagForForcedUpdate()},a.receiveUpgradeButtonClick=function(){this.flagWindowClick();var t=this.getPurchaseLevelCountAndPrice();T.tryPurchaseBuildingUpgrade(this.activeBuildingData.buildingType,t[0])&&this.flagForForcedUpdate()},a.receiveBoostButtonClick=function(){this.flagWindowClick(),T.requestBoostForBuilding(this.activeBoostData.affectedBuilding.buildingType),this.updateWindowContents()},a.showBoostSection=function(){this.boostSectionContainer.active=!0,this.boostSectionContainer.setPosition(this.boostSectionPosition_hidden),this.animator.addAnimations([new S(this.boostSectionContainer,this.boostSectionPosition_visible,.4,[]).setEaseType(w.Out)]),this.showingBoostSection=!0},a.hideBoostSection=function(){this.boostSectionContainer.active=!1,this.boostSectionContainer.setPosition(this.boostSectionPosition_hidden),this.showingBoostSection=!1},a.updateBoostTimerDisplay=function(){var t=this.activeBoostData.timeLeft;t>0?this.activateBoostButton.kiwiText.text=b.getTimeStringFromSecondsTimer(t):this.updateBoostButtonState()},a.updateDisplayedBoostData=function(){this.updateBoostButtonState();var t=this.activeBuildingData.compositeAttribute.attributeString,e=this.activeBoostData.boostBonusAttribute.currentValue,i="<color=#FFFFFF>"+b.numberToPercentageString(e)+"</color>",n=this.activeBuildingData.compositeAttribute.baseValue*(e-1),o="<color=#FFFFFF>(+"+b.getFormattedNumber(Math.floor(n),"",this.activeBuildingData.compositeAttribute.numberFormat)+")</color>";t=(t=t.replace("$val$",i)).replace("$dif$",o),this.boostEffectField.setTextWithCharCountOverride(t,t.length-46)},a.updateBoostButtonState=function(){if(this.boostActive=this.activeBoostData.timeLeft>0,this.activateBoostButton.setCanBeInteractedWith(!this.boostActive,!1),this.boostSectionPointerNode.active=!this.boostActive,this.boostActive)this.boostIconNode.active=!1,this.updateBoostTimerDisplay();else{var t=T.getCurrencyAmount(f.freeBoost)>0;this.boostIconNode.active=!t,this.activateBoostButton.kiwiText.text=t?"FREE :D":"BOOST        ",this.activateBoostButton.setButtonColorScheme_visuallyActive(t?g.colorScheme_kursedBright:g.colorScheme_adRequestBlue)}},r(e,[{key:"hasBuildingData",get:function(){return this.liveDataArray.length>0}},{key:"activeBuildingData",get:function(){return this.liveDataArray[0]}},{key:"activeCurrencyData",get:function(){return this.liveDataArray[1]}},{key:"activeBoostData",get:function(){return this.liveDataArray[2]}}]),e}(y)).prototype,"windowContainer",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Q=e($.prototype,"upgradeWindowTransform",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Z=e($.prototype,"upgradeWindowTailNode",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),J=e($.prototype,"boostSectionContainer",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),X=e($.prototype,"boostSectionPointerNode",[W],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Y=e($.prototype,"activateBoostButton",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),tt=e($.prototype,"boostEffectField",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),et=e($.prototype,"boostIconNode",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),it=e($.prototype,"buildingIconSprite",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),nt=e($.prototype,"buildingTitleField",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ot=e($.prototype,"attributeTitleField",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),rt=e($.prototype,"attributeValueCurrentField",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),at=e($.prototype,"attributeValueNextField",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),st=e($.prototype,"tierCurrentField",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ut=e($.prototype,"tierUpIndicatorNode",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),lt=e($.prototype,"tierUpProgressNode_Current",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ct=e($.prototype,"tierUpProgressNode_Next",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),dt=e($.prototype,"windowCloseButton",[K],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ht=e($.prototype,"purchaseButton",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),pt=e($.prototype,"amountSelectorContainerNode",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),q=$))||q)),t("OnButtonPress_BuildingUpgrade_Close",function(t){function e(){return t.apply(this,arguments)||this}return i(e,t),e.prototype.doButtonPressAction=function(t){this.interactionObject.closeWindow()},e}(m))),Bt=t("OnButtonPress_BuildingUpgrade_SelectAmount",function(t){function e(){return t.apply(this,arguments)||this}return i(e,t),e.prototype.doButtonPressAction=function(t){this.interactionObject.object.receiveAmountSelectorClick(this.interactionObject.buttonIndex)},e}(m)),wt=t("OnButtonPress_BuildingUpgrade_TryPurchase",function(t){function e(){return t.apply(this,arguments)||this}return i(e,t),e.prototype.doButtonPressAction=function(t){this.interactionObject.receiveUpgradeButtonClick()},e}(m)),vt=t("OnButtonPress_BuildingUpgrade_TryActivateBoost",function(t){function e(){return t.apply(this,arguments)||this}return i(e,t),e.prototype.doButtonPressAction=function(t){this.interactionObject.receiveBoostButtonClick()},e}(m));a._RF.pop()}}}));

System.register("chunks:///_virtual/CargoKiwiAnimator.ts",["./rollupPluginModLoBabelHelpers.js","cc","./KiwiBodyAnimator.ts","./SimpleAnimator.ts","./GameParameters.ts","./TyrantUtils.ts"],(function(t){var i,n,o,e,r,a,s,c,l,u;return{setters:[function(t){i=t.inheritsLoose,n=t.createClass},function(t){o=t.cclegacy,e=t._decorator,r=t.Vec3,a=t.math},function(t){s=t.KiwiBodyAnimator},function(t){c=t.Animate},function(t){l=t.ColorFormatter},function(t){u=t.TyrantUtils}],execute:function(){var p;o._RF.push({},"36480+idjZGcqUSPxQnk+Ie","CargoKiwiAnimator",void 0);var h=e.ccclass;e.property,t("CargoKiwiAnimator",h("CargoKiwiAnimator")(p=function(t){function o(){for(var i,n=arguments.length,o=new Array(n),e=0;e<n;e++)o[e]=arguments[e];return(i=t.call.apply(t,[this].concat(o))||this).defaultBodyColorIndex=2,i}i(o,t);var e=o.prototype;return e.onInitialize=function(t){},e.reset=function(){t.prototype.reset.call(this),this.bagSpriteEmpty.node.active=!0,this.bagSpriteFull.node.active=!1},n(o,[{key:"bagSpriteEmpty",get:function(){return this.trackedSprites[1]}},{key:"bagSpriteFull",get:function(){return this.trackedSprites[2]}},{key:"kiwiIdentifier",get:function(){return"deliveryKiwi"}}]),o}(s))||p),t("AnimateCargoBagFill",function(t){function n(i,n,o){var e;return(e=t.call(this,i,n,o)||this).startScale=new r(.5,.5,.5),e.endScale=new r(1,1,1),e}i(n,t);var o=n.prototype;return o.doAnimationInitialization=function(){this.objectToAnimate.bagSpriteEmpty.node.active=!1,this.objectToAnimate.bagSpriteFull.node.active=!0,this.doAnimationActions()},o.doAnimationActions=function(){this.objectToAnimate.bagSpriteFull.node.setScale(new r(a.lerp(this.startScale.x,this.endScale.x,this.progress),a.lerp(this.startScale.y,this.endScale.y,this.progress),a.lerp(this.startScale.z,this.endScale.z,this.progress)))},n}(c)),t("AnimateCargoKiwiBurn",function(t){function n(i,n,o){return t.call(this,i,n,o)||this}i(n,t);var o=n.prototype;return o.doAnimationInitialization=function(){},o.doAnimationActions=function(){var t=u.lerpColors(l.color_white,l.color_burnt,this.progress);this.objectToAnimate.setSpriteColors(t)},n}(c)),t("AnimateCargoKiwiBurnRecovery",function(t){function n(i,n,o){return t.call(this,i,n,o)||this}i(n,t);var o=n.prototype;return o.doAnimationInitialization=function(){this.objectToAnimate.setSpriteColors(l.color_burnt)},o.doAnimationActions=function(){var t=u.lerpColors(l.color_burnt,l.color_white,this.progress);this.objectToAnimate.setSpriteColors(t)},n}(c));o._RF.pop()}}}));

System.register("chunks:///_virtual/CarHitterAnimator.ts",["./rollupPluginModLoBabelHelpers.js","cc","./KiwiBodyAnimator.ts","./SimpleAnimator.ts","./TyrantUtils.ts"],(function(t){var e,i,n,a,r,o,s,l;return{setters:[function(t){e=t.inheritsLoose,i=t.createClass},function(t){n=t.cclegacy,a=t._decorator},function(t){r=t.KiwiBodyAnimator},function(t){o=t.AnimateAlpha},function(t){s=t.TyrantUtils,l=t.EaseType}],execute:function(){var d;n._RF.push({},"f7d28uR1KZMcKhBIYK9341f","CarHitterAnimator",void 0);var c=a.ccclass;a.property,t("CarHitterAnimator",c("CarHitterAnimator")(d=function(t){function n(){for(var e,i=arguments.length,n=new Array(i),a=0;a<i;a++)n[a]=arguments[a];return(e=t.call.apply(t,[this].concat(n))||this).defaultBodyColorIndex=0,e._waddleEnabled=!1,e.waddleInterval=.075,e.waddleMinScale=.97,e.horizontalUnitsForOneSecond=1e3,e.baseAlpha=.2,e}e(n,t);var a=n.prototype;return a.setCarShakeEnabled=function(t){this._waddleEnabled=t},a.onInitialize=function(t){this.setBodyColor(s.setColorAlpha(this.bodySprite.color,this.baseAlpha))},a.updateWaddling=function(){this._waddleEnabled&&t.prototype.updateWaddling.call(this)},a.requestFadeIn=function(t){this.animator.addAnimationBlock([new o(this.bodySprite,1,t,[]).setEaseType(l.Linear)])},a.requestFadeOut=function(t){this.animator.addAnimationBlock([new o(this.bodySprite,this.baseAlpha,t,[]).setEaseType(l.Linear)])},i(n,[{key:"kiwiIdentifier",get:function(){return"autoKiwiker"}}]),n}(r))||d);n._RF.pop()}}}));

System.register("chunks:///_virtual/CastleController.ts",["./rollupPluginModLoBabelHelpers.js","cc","./KiwiText.ts","./SimpleAnimator.ts","./TyrantUtils.ts"],(function(e){var n,t,i,r,o,a,s,u,l,m,c,p,f,h,d,w,T,b,g;return{setters:[function(e){n=e.applyDecoratedDescriptor,t=e.inheritsLoose,i=e.initializerDefineProperty,r=e.assertThisInitialized},function(e){o=e.cclegacy,a=e._decorator,s=e.UITransform,u=e.Node,l=e.Vec2,m=e.Vec3,c=e.Component},function(e){p=e.KiwiText},function(e){f=e.SimpleAnimator,h=e.AnimateWait,d=e.AnimateUITransformSizeFromTo,w=e.AnimateScaleFromTo,T=e.AnimateMovement,b=e.AnimateUnique_CastleTrumpeter},function(e){g=e.EaseType}],execute:function(){var y,C,A,K,B,k,x,U,E;o._RF.push({},"ee8d4ner+JEyb5zZ73NhSHU","CastleController",void 0);var v=a.ccclass,P=a.property;e("CastleController",(y=v("CastleController"),C=P({type:s}),A=P({type:p}),K=P({type:u}),y((x=n((k=function(e){function n(){for(var n,t=arguments.length,o=new Array(t),a=0;a<t;a++)o[a]=arguments[a];return n=e.call.apply(e,[this].concat(o))||this,i(n,"bannerTransform",x,r(n)),i(n,"bannerKingCountText",U,r(n)),i(n,"trumpeterKiwiNode",E,r(n)),n.animator=new f(1,!0),n.bannerFurledDimensions=new l(64,128),n.bannerUnfurledDimensions=new l(64,196),n.trumpeterHiddenPosition=new m(170,-240,0),n.trumpeterPlayingPosition=new m(-72,-22,0),n}t(n,e);var o=n.prototype;return o.updateAnimations=function(e){this.animator.updateAnimations(e)},o.requestKingCeremony=function(e,n){this.setKingCount(e),this.animator.addAnimationBlock([new h(n-.3,this.getBannerUnfurlAnimateBlock()),new h(n,this.getTrumpeterShowAnimationBlock(n))])},o.getBannerUnfurlAnimateBlock=function(){return[new d(this.bannerTransform,this.bannerFurledDimensions,this.bannerUnfurledDimensions,.6,[]).setEaseType(g.OutElastic),new w(this.bannerKingCountText.node,new m(1,0,1),new m(1,1,1),.6,[]).setEaseType(g.OutElastic)]},o.getTrumpeterShowAnimationBlock=function(e){return[new T(this.trumpeterKiwiNode,this.trumpeterPlayingPosition,.4,[new b(this.trumpeterKiwiNode,1.4,[]),new h(e,[new T(this.trumpeterKiwiNode,this.trumpeterHiddenPosition,.4,[]).setEaseType(g.In)])]).setEaseType(g.Out)]},o.requestKingBanner=function(e){e=Math.min(e,99),this.setKingCount(e),this.animator.addAnimationBlock(this.getBannerUnfurlAnimateBlock())},o.kingCeremonyEndCallback=function(){},o.setKingCount=function(e){this.bannerKingCountText.text=this.bannerKingCountText.numberToText(e,"")},n}(c)).prototype,"bannerTransform",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),U=n(k.prototype,"bannerKingCountText",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=n(k.prototype,"trumpeterKiwiNode",[K],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=k))||B));o._RF.pop()}}}));

System.register("chunks:///_virtual/ClickOrTapField.ts",["./rollupPluginModLoBabelHelpers.js","cc","./KiwiText.ts"],(function(i){var t,e,r,n,l,o,c,a;return{setters:[function(i){t=i.applyDecoratedDescriptor,e=i.inheritsLoose,r=i.initializerDefineProperty,n=i.assertThisInitialized},function(i){l=i.cclegacy,o=i._decorator,c=i.Component},function(i){a=i.KiwiText}],execute:function(){var s,u,p,g,h,f,k,d,S;l._RF.push({},"48e63bT+3xLk4ftpOEeVN4Q","ClickOrTapField",void 0);var w=o.ccclass,y=o.property;i("ClickOrTapField",(s=w("ClickOrTapField"),u=y({type:a}),p=y({multiline:!0}),g=y({multiline:!0}),s((k=t((f=function(i){function t(){for(var t,e=arguments.length,l=new Array(e),o=0;o<e;o++)l[o]=arguments[o];return t=i.call.apply(i,[this].concat(l))||this,r(t,"textField",k,n(t)),r(t,"clickString",d,n(t)),r(t,"tapString",S,n(t)),t.showingClickString=void 0,t}e(t,i);var l=t.prototype;return l.showClickString=function(){this.showingClickString||(this.showingClickString=!0,this.textField.text=this.clickString)},l.showTapString=function(){this.showClickString&&(this.showingClickString=!1,this.textField.text=this.tapString)},t}(c)).prototype,"textField",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),d=t(f.prototype,"clickString",[p,y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),S=t(f.prototype,"tapString",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),h=f))||h));l._RF.pop()}}}));

System.register("chunks:///_virtual/ClickpointBar.ts",["./rollupPluginModLoBabelHelpers.js","cc","./SimpleAnimator.ts","./TyrantUtils.ts","./GameParameters.ts"],(function(t){var i,e,o,n,l,a,r,s,c,u,p,d,m,f,h;return{setters:[function(t){i=t.applyDecoratedDescriptor,e=t.inheritsLoose,o=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){l=t.cclegacy,a=t._decorator,r=t.Node,s=t.math,c=t.Vec3,u=t.Component},function(t){p=t.SimpleAnimator,d=t.AnimateWait,m=t.AnimateScaleTo},function(t){f=t.EaseType},function(t){h=t.GameParameters}],execute:function(){var y,F,S,g,A,P,w;l._RF.push({},"56c67eRnrFFT7w/4YSMv68N","ClickpointBar",void 0);var k=a.ccclass,B=a.property;t("ClickpointBar",(y=k("ClickpointBar"),F=B({type:r}),S=B({type:r}),y((P=i((A=function(t){function i(){for(var i,e=arguments.length,l=new Array(e),a=0;a<e;a++)l[a]=arguments[a];return i=t.call.apply(t,[this].concat(l))||this,o(i,"fillScalerNode",P,n(i)),o(i,"fillFollowScalerNode",w,n(i)),i.animator=new p(1,!0),i.defaultVerticalPosition=-283,i.lastFillProgress=1,i}e(i,t);var l=i.prototype;return l.setFillProgress=function(t){(t=s.clamp(t,0,1))!=this.lastFillProgress&&(this.fillScalerNode.setScale(t,1,1),t<this.lastFillProgress?this.animator.addAnimationBlock([new d(.5,[new m(this.fillFollowScalerNode,new c(t,1,1),.6,[]).setEaseType(f.Out)])]):(this.animator.addAnimationBlock([]),this.fillFollowScalerNode.setScale(t,1,1)),this.lastFillProgress=t)},l.updateAnimations=function(t){this.animator.updateAnimations(t)},l.doKnockout=function(){this.animator.addAnimationBlock(h.getKnockoutAnimationBlock(this.node,1,.8))},l.reset=function(){this.animator.discardAllAnimations(),this.node.setRotationFromEuler(0,0,0),this.node.setScale(1,1,1),this.setFillProgress(1)},l.setHorizontalCoordinate=function(t){this.node.setPosition(t,this.defaultVerticalPosition,0)},i}(u)).prototype,"fillScalerNode",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=i(A.prototype,"fillFollowScalerNode",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=A))||g));l._RF.pop()}}}));

System.register("chunks:///_virtual/CurrencyCounterController.ts",["./rollupPluginModLoBabelHelpers.js","cc","./KiwiText.ts","./GameParameters.ts","./TyrantUtils.ts","./SimpleAnimator.ts","./KiwiInterfaceAnimator.ts","./StaticDataStructures.ts","./GameSession.ts"],(function(e){var r,t,n,o,i,c,a,u,l,s,h,y,m,p,C,f,d,S,b,g,w,T,F;return{setters:[function(e){r=e.applyDecoratedDescriptor,t=e.inheritsLoose,n=e.initializerDefineProperty,o=e.assertThisInitialized,i=e.createClass},function(e){c=e.cclegacy,a=e._decorator,u=e.Enum,l=e.UITransform,s=e.Widget,h=e.Sprite,y=e.Color,m=e.Vec3},function(e){p=e.KiwiText},function(e){C=e.ColorFormatter},function(e){f=e.TyrantUtils,d=e.EaseType},function(e){S=e.AnimateColor,b=e.AnimateKiwiTextColor,g=e.AnimateMovement},function(e){w=e.KiwiInterfaceAnimator},function(e){T=e.CurrencyType},function(e){F=e.GameSession}],execute:function(){var k,I,v,D,z,A,_,E,x,H,K,U,B,W,G,M,P,L,R;c._RF.push({},"43e8dzKb6tHUJs9GIIkcbMo","CurrencyCounterController",void 0);var j=a.ccclass,J=a.property;e("CurrencyCounterController",(k=j("CurrencyCounterController"),I=J({type:u(T)}),v=J({type:l}),D=J({type:s}),z=J({type:h}),A=J({type:l}),_=J({type:h}),E=J({type:h}),x=J({type:p}),k((U=r((K=function(e){function r(){for(var r,t=arguments.length,i=new Array(t),c=0;c<t;c++)i[c]=arguments[c];return r=e.call.apply(e,[this].concat(i))||this,n(r,"currencyType",U,o(r)),n(r,"rootTransform",B,o(r)),n(r,"widgetComponent",W,o(r)),n(r,"outerFrameSprite",G,o(r)),n(r,"outerFrameTransform",M,o(r)),n(r,"innerFrameSprite",P,o(r)),n(r,"currencyIconSprite",L,o(r)),n(r,"currencyCountField",R,o(r)),r.currencyColorScheme=void 0,r.spriteWarningColor=void 0,r.warningColorScheme=void 0,r._isHidden=!1,r}t(r,e);var c=r.prototype;return c.initialize=function(r){switch(e.prototype.initialize.call(this,r),r.registerLiveDataElement(this),this.widgetComponent.enabled=!1,this.liveDataArray.push(F.getCurrencyData(this.currencyType)),this.currencyIconSprite.spriteFrame=r.getSpriteFrameFromIdentifier(this.currencyData.staticCurrencyData.currencyIdentifier),this.outerFrameTransform.width=this.rootTransform.width,this.outerFrameTransform.height=this.rootTransform.height,this.currencyType){default:case T.koin:this.currencyColorScheme=C.currencyColorScheme_koin;break;case T.kiwi:this.currencyColorScheme=C.currencyColorScheme_kiwi;break;case T.token:this.currencyColorScheme=C.currencyColorScheme_token;break;case T.freeBoost:this.currencyColorScheme=C.currencyColorScheme_freeBoost}var t=C.color_errorRed;this.warningColorScheme={frameColor:f.lerpColors(this.currencyColorScheme.frameColor,t,.2),backgroundColor:f.lerpColors(this.currencyColorScheme.backgroundColor,t,.4),counterFieldColor:t},this.spriteWarningColor=f.lerpColors(new y(255,255,255),t,.8),this.setColorsToScheme(this.currencyColorScheme)},c.onDataUpdate=function(){this.currencyCountField.text=this.currencyCountField.numberToText(Math.floor(this.currencyData.currentAmount),this.currencyData.staticCurrencyData.currencyUnitString)},c.setColorsToScheme=function(e){this.outerFrameSprite.color=e.frameColor,this.innerFrameSprite.color=e.backgroundColor,this.currencyCountField.color=e.counterFieldColor},c.doWarningFlash=function(){this.animator.isAnimating&&this._isHidden||(this.setColorsToScheme(this.warningColorScheme),this.currencyIconSprite.color=this.spriteWarningColor,this.animator.addAnimationBlock([new S(this.outerFrameSprite,this.currencyColorScheme.frameColor,.5,[]).setEaseType(d.In),new S(this.innerFrameSprite,this.currencyColorScheme.backgroundColor,.5,[]).setEaseType(d.In),new S(this.currencyIconSprite,new y(255,255,255),.5,[]).setEaseType(d.In),new b(this.currencyCountField,this.currencyColorScheme.counterFieldColor,.5,[]).setEaseType(d.In)]))},c.hideCounter=function(){this._isHidden=!0,this.outerFrameSprite.node.setPosition(0,200,0)},c.unhideCounter=function(){this._isHidden=!1,this.animator.addAnimationBlock([new g(this.outerFrameSprite.node,new m(0,0,0),1.2,[])])},i(r,[{key:"counterCurrencyType",get:function(){return this.currencyType}},{key:"currencyData",get:function(){return this.liveDataArray[0]}}]),r}(w)).prototype,"currencyType",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return T.koin}}),B=r(K.prototype,"rootTransform",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),W=r(K.prototype,"widgetComponent",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),G=r(K.prototype,"outerFrameSprite",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=r(K.prototype,"outerFrameTransform",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=r(K.prototype,"innerFrameSprite",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=r(K.prototype,"currencyIconSprite",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=r(K.prototype,"currencyCountField",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),H=K))||H));c._RF.pop()}}}));

System.register("chunks:///_virtual/DebugWindow.ts",["./rollupPluginModLoBabelHelpers.js","cc","./KiwiInterfaceAnimator.ts"],(function(t){var e,i,r,a,n,s,o,l,u,h;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,r=t.initializerDefineProperty,a=t.assertThisInitialized},function(t){n=t.cclegacy,s=t._decorator,o=t.RichText,l=t.director,u=t.game},function(t){h=t.KiwiInterfaceAnimator}],execute:function(){var c,f,m,d,g;n._RF.push({},"72a92y0ekFKB6ZfvtE35n+L","DebugWindow",void 0);var v=s.ccclass,p=s.property;t("DebugWindow",(c=v("DebugWindow"),f=p({type:o}),c((g=e((d=function(t){function e(){for(var e,i=arguments.length,n=new Array(i),s=0;s<i;s++)n[s]=arguments[s];return e=t.call.apply(t,[this].concat(n))||this,r(e,"debugField",g,a(e)),e.device=void 0,e.drawCallHighest=0,e.minFrameCount=120,e.frameCount=0,e.debugStarted=!1,e.lastFrameTime=0,e.frameValues=[],e.currentFrameRate=0,e.framerate_avg=0,e.framerate_low1=0,e.framerate_low01=0,e}i(e,t);var n=e.prototype;return n.initialize=function(e){t.prototype.initialize.call(this,e),this.device=l.root.device},n.onDataUpdate=function(){},n.updateAnimator=function(t){if(this.node.activeInHierarchy){if(!this.debugStarted){if(this.frameCount++,this.frameCount<this.minFrameCount)return;return this.lastFrameTime=u.frameStartTime,void(this.debugStarted=!0)}var e=this.device.numDrawCalls;this.drawCallHighest=e>this.drawCallHighest?e:this.drawCallHighest;var i="DRAWCALLS\n    "+e+"  cur\n    "+this.drawCallHighest+"  max\n\n";this.updateFramerateCalculations();var r="FRAMERATE \n    "+Math.ceil(this.currentFrameRate)+"  cur\n    "+Math.ceil(this.framerate_avg)+"  avg\n    "+Math.ceil(this.framerate_low1);r+="  low",this.frameValues.length,r+="\n    "+Math.ceil(this.framerate_low01)+"  lowest",this.frameValues.length,this.debugField.string=i+r}},n.updateFramerateCalculations=function(){var t=u.frameStartTime,e=t-this.lastFrameTime;this.lastFrameTime=t,this.currentFrameRate=1e3/e,3e3==this.frameValues.length&&this.frameValues.shift(),this.frameValues.push(this.currentFrameRate);for(var i=this.quickSort(this.frameValues),r=0,a=!1,n=!1,s=0;s<i.length;s++)r+=i[s],!a&&s>i.length/1e3?(a=!0,this.framerate_low01=r/(s+1)):!n&&s>i.length/100&&(n=!0,this.framerate_low1=r/(s+1));this.framerate_avg=r/i.length},n.swap=function(t,e,i){var r=t[e];t[e]=t[i],t[i]=r},n.partition=function(t,e,i){void 0===e&&(e=0),void 0===i&&(i=t.length-1);for(var r=t[Math.floor((i+e)/2)],a=e,n=i;a<=n;){for(;t[a]<r;)a++;for(;t[n]>r;)n--;a<=n&&(this.swap(t,a,n),a++,n--)}return a},n.quickSort=function(t,e,i){if(void 0===e&&(e=0),void 0===i&&(i=t.length-1),t.length>1){var r=this.partition(t,e,i);e<r-1&&this.quickSort(t,e,r-1),r<i&&this.quickSort(t,r,i)}return t},e}(h)).prototype,"debugField",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=d))||m));n._RF.pop()}}}));

System.register("chunks:///_virtual/DeliveryGroundsEntity.ts",["./rollupPluginModLoBabelHelpers.js","cc","./DeliveryLineSimulation.ts","./TyrantUtils.ts"],(function(t){var i,e,n,s,o,r,a;return{setters:[function(t){i=t.createClass},function(t){e=t.cclegacy,n=t._decorator,s=t.math},function(t){o=t.GroundsEntityState,r=t.TransportState},function(t){a=t.TyrantUtils}],execute:function(){var u;e._RF.push({},"d16e37LZ4ZK2rJ5so9tG4T7","DeliveryGroundsEntity",void 0);var c=n.ccclass;n.property,t("DeliveryGroundsEntity",c("DeliveryGroundsEntity")(u=function(){function t(t,i){this._simulation=void 0,this._lastSimulationTime=0,this._stateEndTime=-1,this._entityKnockoutStrength=-1,this._kiwiIdentifier=void 0,this._entityState=o.pooled,this.moveTimer=0,this.moveDuration=0,this.moveStartProgressPoint=0,this.moveEndProgressPoint=0,this.currentProgressPoint=0,this._minimumProgressContactPoint=0,this._maximumProgressContactPoint=0,this._clicksReceived=0,this._maximumClicks=0,this._simulation=t,this._kiwiIdentifier=i}var e=t.prototype;return e.updateLastSimulationTime=function(t){this._lastSimulationTime=t},e.setEntityState=function(t,i){if(this.updateLastSimulationTime(i),t!=this.entityState){switch(t){default:console.log("received invalid set entity state request as "+t);break;case o.entering:this.onStateEnter_entering(this._entityState);break;case o.active:this.onStateEnter_active(this._entityState);break;case o.leaving:this.onStateEnter_leaving(this._entityState);break;case o.knockedOut:this.onStateEnter_knockedOut(this._entityState);break;case o.pooled:this.onStateEnter_pooled(this._entityState)}this._entityState=t}},e.onStateEnter_active=function(t){this._stateEndTime=this.lastSimulationTime+this.deliverySimulation.groundsEntity_activeStateDefaultDuration},e.onStateEnter_leaving=function(t){this._stateEndTime=this.lastSimulationTime+this.deliverySimulation.groundsEntity_leavingStateDefaultDuration,this.startMoveToTargetProgress(1.1,this.deliverySimulation.groundsEntity_leavingStateDefaultDuration)},e.onStateEnter_knockedOut=function(t){this._stateEndTime=this.lastSimulationTime+this.deliverySimulation.groundsEntity_knockoutStateDuration},e.onStateEnter_pooled=function(t){},e.startMoveToTargetProgress=function(t,i){this.moveTimer=0,this.moveDuration=i,this.moveStartProgressPoint=this.currentProgressPoint,this.moveEndProgressPoint=t},e.updateEntityMovement=function(t){this.entityState>2||(this.moveEntity(t-this.lastSimulationTime),this.updateEntityContactInfo(),this.updateLastSimulationTime(t))},e.moveEntity=function(t){if(!(this.moveTimer>this.moveDuration)){this.moveTimer+=t;var i=a.easeInOut(s.clamp(this.moveTimer/this.moveDuration,0,1));this.currentProgressPoint=s.lerp(this.moveStartProgressPoint,this.moveEndProgressPoint,i),this.updateEntityContactInfo(),this.moveTimer>this.moveDuration&&this.onMoveComplete()}},e.updateEntityContactInfo=function(){var t=this.deliverySimulation.getProgressSizeFromKiwiSize(this.entitySize);this._minimumProgressContactPoint=this.positionInLineAsProgress-t,this._maximumProgressContactPoint=this.positionInLineAsProgress+t},e.receiveTransporterCollision=function(t){t.transportState=r.knockedOut,t.stateEndTime=this.lastSimulationTime+this.deliverySimulation.groundsEntity_knockoutStateDuration},e.receiveGroundsEntityCollision=function(t){this.entityKnockoutStrength>t.entityKnockoutStrength?t.setEntityState(o.knockedOut,this.lastSimulationTime):t.entityKnockoutStrength>this.entityKnockoutStrength&&this.setEntityState(o.knockedOut,this.lastSimulationTime)},e.receiveClick=function(){if(this.entityState>2||this.remainingClicks<=0)return null;this._clicksReceived++,this.remainingClicks<=0&&this.setEntityState(o.knockedOut,this.lastSimulationTime)},e.resetClicks=function(t){t=Math.max(t,1),this._clicksReceived=0,this._maximumClicks=t},i(t,[{key:"deliverySimulation",get:function(){return this._simulation}},{key:"lastSimulationTime",get:function(){return this._lastSimulationTime}},{key:"stateEndTime",get:function(){return this._stateEndTime}},{key:"entityKnockoutStrength",get:function(){return this._entityKnockoutStrength}},{key:"kiwiIdentifier",get:function(){return this._kiwiIdentifier}},{key:"entityState",get:function(){return this._entityState}},{key:"positionInLineAsProgress",get:function(){return this.currentProgressPoint}},{key:"minimumProgressContactPoint",get:function(){return this._minimumProgressContactPoint}},{key:"maximumProgressContactPoint",get:function(){return this._maximumProgressContactPoint}},{key:"clicksReceived",get:function(){return this._clicksReceived}},{key:"maximumClicks",get:function(){return this._maximumClicks}},{key:"remainingClicks",get:function(){return this._maximumClicks-this._clicksReceived}},{key:"clickPointProgress",get:function(){return 1-this.clicksReceived/this.maximumClicks}}]),t}())||u);e._RF.pop()}}}));

System.register("chunks:///_virtual/DeliveryGroundsKiwiAnimator.ts",["./rollupPluginModLoBabelHelpers.js","cc","./KiwiBodyAnimator.ts","./DeliveryLineSimulation.ts","./SimpleAnimator.ts","./GameSession.ts","./PointerInputHandler.ts","./KiwiButtonController.ts","./StaticDataStructures.ts"],(function(t){var i,n,e,o,r,s,u,a,c,h,l,d,p,f,y,A;return{setters:[function(t){i=t.applyDecoratedDescriptor,n=t.inheritsLoose,e=t.initializerDefineProperty,o=t.assertThisInitialized,r=t.createClass},function(t){s=t.cclegacy,u=t._decorator,a=t.Enum},function(t){c=t.KiwiBodyAnimator},function(t){h=t.GroundsEntityType},function(t){l=t.AnimateUnique_KiwiBoing},function(t){d=t.GameSession},function(t){p=t.PointerInputHandler,f=t.PointerEventTypes},function(t){y=t.KiwiButtonPressAction},function(t){A=t.WhatAttribute}],execute:function(){var v,_,g,w,m;s._RF.push({},"ea3f42eExtLUYiT1ZUVDPkT","DeliveryGroundsKiwiAnimator",void 0);var S=u.ccclass,k=u.property,K=(t("DeliveryGroundsKiwiAnimator",(v=S("DeliveryGroundsKiwiAnimator"),_=k({type:a(h)}),v((m=i((w=function(t){function i(){for(var i,n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return i=t.call.apply(t,[this].concat(r))||this,e(i,"entityType",m,o(i)),i.liveDataArray=[],i.inputHandler=new p,i._clickEventActive=!1,i._isPressed=!1,i._shotCooldown=0,i._shotInterval=.05,i._autoFlipActive=!0,i._rootScaleSign=1,i}n(i,t);var s=i.prototype;return s.onInitialize=function(t){this.liveDataArray.push(d.getAttribute(A.gun_ammoLimit)),this.liveDataArray.push(d.getAttribute(A.gun_currentAmmo)),this.inputHandler.addActionToInput(f.Mouse_enter,new K(this)),this.inputHandler.addActionToInput(f.Mouse_exit,new P(this)),this.inputHandler.addActionToInput(f.Mouse_down,new b(this)),this.inputHandler.addActionToInput(f.Mouse_up,new T(this),!0),this.inputHandler.addActionToInput(f.Touch_start,new H(this),!0),this.inputHandler.addActionToInput(f.Touch_end,new D(this))},s.reset=function(){t.prototype.reset.call(this),this._autoFlipActive=!0,this.setRootScaleSign(-1),this.animator.setScaleOverride(this.rootScaleSign),this.deactivateKiwiClicking()},s.doKnockoutAnimation=function(i){this._autoFlipActive=!1,t.prototype.doKnockoutAnimation.call(this,i),this.deactivateKiwiClicking()},s.activateKiwiClicking=function(){this._clickEventActive||(this.inputHandler.registerNodeForPointerEvents(this.bodySprite.node),this._clickEventActive=!0,this.resetInputParameters())},s.deactivateKiwiClicking=function(){this._clickEventActive&&(this.inputHandler.deregisterNodeForPointerEvents(this.bodySprite.node),this._clickEventActive=!1,this.resetInputParameters())},s.resetInputParameters=function(){this._isPressed=!1},s.doKiwiClick=function(){this.node.setScale(1.15*this._rootScaleSign,.75,1),this.animator.addAnimationBlock([new l(this.node,.6,[])]),d.groundsKiwiClickedCallback(this.entityType,this.kiwiNumber)},s.onHoverEnter=function(){},s.onHoverExit=function(){this._isPressed=!1},s.onMouseDown=function(){this._isPressed=!0,this.doKiwiClick()},s.onMouseUp=function(){this._isPressed=!1},s.onTouchStart=function(){this._isPressed=!0,this.doKiwiClick()},s.onTouchEnd=function(){this._isPressed=!1},s.updateAnimations=function(i){if(t.prototype.updateAnimations.call(this,i),this.inputHandler.processLastInput(),this.ammoLimitAttribute.isUnlocked&&this._autoFlipActive){this._shotCooldown-=i;var n=this.currentAmmoAttribute.currentValue;this._isPressed&&this._shotCooldown<=0&&n>0&&(this.doKiwiClick(),this.currentAmmoAttribute.setValue(n-1),this._shotCooldown=this._shotInterval)}},s.updateHorizontalDelta=function(i){if(this._autoFlipActive){var n=Math.sign(i-this.lastHorizontalPosition);0!=n&&n!=this.rootScaleSign&&this.setRootScaleSign(n)}t.prototype.updateHorizontalDelta.call(this,i)},s.setRootScaleSign=function(t){this._rootScaleSign=t,this.animator.setScaleOverride(this.rootScaleSign);var i=this.node.getScale();this.node.setScale(this.rootScaleSign*Math.abs(i.x),i.y,i.z)},r(i,[{key:"kiwiIdentifier",get:function(){return h[this.entityType]+"Kiwi"}},{key:"defaultBodyColorIndex",get:function(){switch(this.entityType){default:case h.guard:return 1;case h.king:return 3}}},{key:"ammoLimitAttribute",get:function(){return this.liveDataArray[0]}},{key:"currentAmmoAttribute",get:function(){return this.liveDataArray[1]}},{key:"rootScaleSign",get:function(){return this._rootScaleSign}},{key:"bodyVerticalOffset",get:function(){return this._bodyVerticalOffset*this.node.scale.y}}]),i}(c)).prototype,"entityType",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return h.guard}}),g=w))||g)),t("OnHoverEnter_groundsKiwi",function(t){function i(){return t.apply(this,arguments)||this}return n(i,t),i.prototype.doButtonPressAction=function(t){this.interactionObject.onHoverEnter()},i}(y))),P=t("OnHoverExit_groundsKiwi",function(t){function i(){return t.apply(this,arguments)||this}return n(i,t),i.prototype.doButtonPressAction=function(t){this.interactionObject.onHoverExit()},i}(y)),b=t("OnMouseDown_groundsKiwi",function(t){function i(){return t.apply(this,arguments)||this}return n(i,t),i.prototype.doButtonPressAction=function(t){this.interactionObject.onMouseDown()},i}(y)),T=t("OnMouseUp_groundsKiwi",function(t){function i(){return t.apply(this,arguments)||this}return n(i,t),i.prototype.doButtonPressAction=function(t){this.interactionObject.onMouseUp()},i}(y)),H=t("OnTouchStart_groundsKiwi",function(t){function i(){return t.apply(this,arguments)||this}return n(i,t),i.prototype.doButtonPressAction=function(t){this.interactionObject.onTouchStart()},i}(y)),D=t("OnTouchEnd_groundsKiwi",function(t){function i(){return t.apply(this,arguments)||this}return n(i,t),i.prototype.doButtonPressAction=function(t){this.interactionObject.onTouchEnd()},i}(y));s._RF.pop()}}}));

System.register("chunks:///_virtual/DeliveryLineSimulation.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameManager.ts","./StaticDataStructures.ts","./GroundsEntity_King.ts","./GroundsEntity_Guard.ts","./AudioController.ts","./GameSession.ts"],(function(i){var t,e,n,r,s,a,o,u,h,g;return{setters:[function(i){t=i.createClass},function(i){e=i.cclegacy,n=i._decorator,r=i.Vec2},function(i){s=i.GameManager},function(i){a=i.WhatAttribute},function(i){o=i.GroundsEntity_King},function(i){u=i.GroundsEntity_Guard},function(i){h=i.AudioController},function(i){g=i.GameSession}],execute:function(){var l;e._RF.push({},"fda05BQ44lCJ4Drd/HLixHx","DeliveryLineSimulation",void 0);var d=n.ccclass,c=(n.property,i("DeliveryLineSimulation",d("DeliveryLineSimulation")(l=function(){var i=e.prototype;function e(i){this._fillingQueue_minimumInterval=void 0,this._fillingQueue_stateDuration=void 0,this._fillingQueue_spacingOffset=void 0,this._movingToFill_stateDuration=void 0,this._movingToFill_minimumInterval=void 0,this._checkingQueue_stateDuration=void 0,this._checkingQueue_spacingOffset=void 0,this._movingToCheck_stateDuration=void 0,this._checking_preparationDuration=void 0,this._checking_processDuration=void 0,this._delivering_stateDuration=void 0,this._groundsEntity_knockoutStateDuration=void 0,this._groundsEntity_activeStateDefaultDuration=void 0,this._groundsEntity_leavingStateDefaultDuration=void 0,this._groundsEntitySizes=void 0,this._kiwiSizeToProgressSizeMap=new Map,this._deliveryGroundsCoordinateOffset_center=void 0,this._deliveryGroundsCoordinateOffset_right=void 0,this._deliveryLineCoordinateWidth=void 0,this._deliveryGrounds_startEndProgressPoints=new r(0,0),this._kingsGuard_maxCount=void 0,this._kingsGuard_spacingOffset=void 0,this._kingsGuard_spawnInterval=void 0,this._kingsGuard_marchDuration=void 0,this._kingsGuard_timeBeforeTrumpet=void 0,this._kiwiKing_maximumClickIntervalBeforeLeaving=void 0,this._kingKiwi_waitAfterMarchDuration=void 0,this._kingKiwi_entranceMoveDuration=void 0,this._kingKiwi_leaveMoveDuration=void 0,this._kingKiwi_averageUnitsPerSecond=void 0,this._kingKiwi_randomMove_durationMin=void 0,this._kingKiwi_randomMove_durationMax=void 0,this._kingKiwi_waitDurationMin=void 0,this._kingKiwi_waitDurationMax=void 0,this.deliverySecondLength=1,this.gameParameters=void 0,this.deliveryTimeMultiplier=0,this.deliveryTimeMultiplierAttribute=void 0,this._simulationTime=0,this._unscaledSimulationTime=0,this._lastSimulationDelta=0,this._lastUnscaledSimulationDelta=0,this._dontAddGuardsBefore=0,this._guardMarchStartTime=0,this._guardMarchEndTime=0,this._kingSpawnTimes=[],this._transporterProgressPoints=[],this._defaultInvalidCollisionPointArray=[-1,-1],this._checkingPreparationEndTime=0,this._preparationProgress=0,this.dontAddTransporterBefore=1,this.dontMoveTransporterToFillBefore=5,this.transporterIndex=0,this.kingIndex=0,this.fillingQueueMaxLength=4,this.fillingQueueTransporters=[],this.checkingQueueMaxLength=2,this.checkingQueueTransporters=[],this.checkingRoomTransporters=[],this.deliverySectionTransporters=[],this.allCargoTransporters=[],this.cargoTransporterPool=[],this._activeKingCount=0,this.activeGroundsEntities=[],this.kiwiKingPool=[],this.kiwiKingIndexMap=new Map,this.kingsGuardPool=[],this.gameParameters=i,this.deliveryTimeMultiplierAttribute=g.getAttribute(a.sekiwity_speed),this.initializeConstantParameters()}return i.getProgressSizeFromKiwiSize=function(i){return this._kiwiSizeToProgressSizeMap.get(i)},i.initializeConstantParameters=function(){this._groundsEntitySizes=this.gameParameters.groundsEntitySizes,this._groundsEntity_knockoutStateDuration=this.gameParameters.deliveryGroundsParameters.groundsEntity_knockoutStateDuration,this._groundsEntity_activeStateDefaultDuration=this.gameParameters.deliveryGroundsParameters.groundsEntity_activeStateDefaultDuration,this._groundsEntity_leavingStateDefaultDuration=this.gameParameters.deliveryGroundsParameters.groundsEntity_leavingStateDefaultDuration,this._fillingQueue_spacingOffset=this.gameParameters.deliveryProcessParameters.fillingQueue_spacingOffset,this._checkingQueue_spacingOffset=this.gameParameters.deliveryProcessParameters.checkingQueue_spacingOffset,this._checking_preparationDuration=g.getAttribute(a.sekiwity_deliveryInterval),this._deliveryGroundsCoordinateOffset_center=this.gameParameters.deliveryGroundsParameters.groundsCoordinateOffset_center,this._deliveryGroundsCoordinateOffset_right=this.gameParameters.deliveryGroundsParameters.groundsCoordinateOffset_right,this._kingsGuard_maxCount=this.gameParameters.deliveryGroundsParameters.kingsGuard_maxCount,this._kingsGuard_spacingOffset=this.gameParameters.deliveryGroundsParameters.kingsGuard_spacingOffset,this._kingsGuard_spawnInterval=this.gameParameters.deliveryGroundsParameters.kingsGuard_spawnInterval,this._kingsGuard_marchDuration=this.gameParameters.deliveryGroundsParameters.kingsGuard_marchDuration,this._kingsGuard_timeBeforeTrumpet=this.gameParameters.deliveryGroundsParameters.kingsGuard_timeBeforeTrumpet,this._kiwiKing_maximumClickIntervalBeforeLeaving=this.gameParameters.deliveryGroundsParameters.kiwiKing_maximumClickIntervalBeforeLeaving,this._kingKiwi_waitAfterMarchDuration=this.gameParameters.deliveryGroundsParameters.kingKiwi_waitAfterMarchDuration,this._kingKiwi_entranceMoveDuration=this.gameParameters.deliveryGroundsParameters.kingKiwi_entranceMoveDuration,this._kingKiwi_leaveMoveDuration=this.gameParameters.deliveryGroundsParameters.kingKiwi_leaveMoveDuration,this._kingKiwi_averageUnitsPerSecond=this.gameParameters.deliveryGroundsParameters.kingKiwi_averageUnitsPerSecond,this._kingKiwi_randomMove_durationMin=this.gameParameters.deliveryGroundsParameters.kingKiwi_randomMove_durationMin,this._kingKiwi_randomMove_durationMax=this.gameParameters.deliveryGroundsParameters.kingKiwi_randomMove_durationMax,this._kingKiwi_waitDurationMin=this.gameParameters.deliveryGroundsParameters.kingKiwi_waitDurationMin,this._kingKiwi_waitDurationMax=this.gameParameters.deliveryGroundsParameters.kingKiwi_waitDurationMax,this._delivering_stateDuration=this.gameParameters.deliveryProcessParameters.delivering_stateDuration},i.checkForParameterChanges=function(){this.deliveryTimeMultiplierAttribute.currentValue!=this.deliveryTimeMultiplier&&(this.deliveryTimeMultiplier=this.deliveryTimeMultiplierAttribute.currentValue,this.deliverySecondLength=1/this.deliveryTimeMultiplier,this._fillingQueue_minimumInterval=this.deliverySecondLength*this.gameParameters.deliveryProcessParameters.fillingQueue_minimumInterval,this._fillingQueue_stateDuration=this.deliverySecondLength*this.gameParameters.deliveryProcessParameters.fillingQueue_stateDuration,this._movingToFill_stateDuration=this.deliverySecondLength*this.gameParameters.deliveryProcessParameters.movingToFill_stateDuration,this._movingToFill_minimumInterval=this.deliverySecondLength*this.gameParameters.deliveryProcessParameters.movingToFill_minimumInterval,this._checkingQueue_stateDuration=this.deliverySecondLength*this.gameParameters.deliveryProcessParameters.checkingQueue_stateDuration,this._movingToCheck_stateDuration=this.deliverySecondLength*this.gameParameters.deliveryProcessParameters.movingToCheck_stateDuration,this._checking_processDuration=this.deliverySecondLength*this.gameParameters.deliveryProcessParameters.checking_processDuration)},i.recalculateDeliveryLineSize=function(i,t){var e=i/2;this._deliveryLineCoordinateWidth=e;var n=this.deliveryGroundsCoordinateOffset_center,r=this.deliveryGroundsCoordinateOffset_right;this._deliveryGrounds_startEndProgressPoints.x=n/e,this._deliveryGrounds_startEndProgressPoints.y=(e+r)/e,this.recalculateEntityProgressSizes()},i.recalculateEntityProgressSizes=function(){for(var i=0;i<this.groundsEntitySizes.length;i++){var t=this.groundsEntitySizes[i]/this.deliveryLineCoordinateWidth;this._kiwiSizeToProgressSizeMap.set(i,t)}},i.updateSimulation=function(i,t){this._simulationTime+=i,this._unscaledSimulationTime+=t,this._lastSimulationDelta=i,this._lastUnscaledSimulationDelta=t,this.updateGroundsEntities(),this.checkForParameterChanges(),this.updateDeliverySection(this.groundsSimulationTime),this.updateCheckingRoom(this.transporterSimulationTime,this.groundsSimulationTime),this.updateCheckingQueue(this.transporterSimulationTime),this.updateFillingQueue(this.transporterSimulationTime)},i.updateGroundsEntities=function(){this.updateEntitySpawning(this.groundsSimulationTime),this.updateEntityMovement(this.groundsSimulationTime),this.updateEntityToEntityCollisions(),this.updateEntityToTransporterCollisions(this.groundsSimulationTime,this._lastUnscaledSimulationDelta),this.checkEntityStateChanges(this.groundsSimulationTime)},i.updateEntitySpawning=function(i){var t=this;if(i>this._guardMarchStartTime&&i<this._guardMarchEndTime&&i>this._dontAddGuardsBefore)for(var e=0;e<this.kingsGuard_maxCount;e++)if(e==this.kingsGuardPool.length&&this.increaseGuardPoolSize(),e==this.kingsGuard_maxCount-1&&(this._guardMarchEndTime=i),this.kingsGuardPool[e].entityState==c.pooled){var n=this.kingsGuardPool[e];n.setEntityState(c.entering,i),this.activeGroundsEntities.push(n),this._dontAddGuardsBefore=i+this.kingsGuard_spawnInterval,0==e&&h.instance.playOneShot("marchingFeet");break}this._kingSpawnTimes.length>0&&(this._kingSpawnTimes=this._kingSpawnTimes.filter((function(e){if(e>i)return!0;var n=t.requestGroundsEntity_King();return n.setEntityState(c.entering,i),t.activeGroundsEntities.push(n),h.instance.playKingTheme(),s.instance.requestCommercialBreak(),!1})))},i.updateEntityMovement=function(i){for(var t=0;t<this.activeGroundsEntities.length;t++)this.activeGroundsEntities[t].updateEntityMovement(i)},i.updateEntityToEntityCollisions=function(){for(var i=0;i<this.activeGroundsEntities.length;i++)if(!(this.activeGroundsEntities[i].entityState>2))for(var t=0;t!=i&&t<this.activeGroundsEntities.length;t++)if(!(this.activeGroundsEntities[t].entityState>2)){var e=this.activeGroundsEntities[i],n=this.activeGroundsEntities[t];this.checkProgressPointRangeOverlap(e.minimumProgressContactPoint,e.maximumProgressContactPoint,n.minimumProgressContactPoint,n.maximumProgressContactPoint)&&e.receiveGroundsEntityCollision(n)}},i.checkProgressPointRangeOverlap=function(i,t,e,n){return!(t<e||i>n)},i.updateEntityToTransporterCollisions=function(i,t){if(0!=this.deliverySectionTransporters.length){this._transporterProgressPoints.length=0;for(var e=this.delivering_stateDuration,n=0;n<this.deliverySectionTransporters.length;n++)this.deliverySectionTransporters[n].transportState==v.delivering?this._transporterProgressPoints.push([this.getDeliveryLineProgressFromTransporterStateEndTime(this.deliverySectionTransporters[n].stateEndTime+t,e,i),this.getDeliveryLineProgressFromTransporterStateEndTime(this.deliverySectionTransporters[n].stateEndTime,e,i)]):this._transporterProgressPoints.push(this._defaultInvalidCollisionPointArray);for(var r=this.getProgressSizeFromKiwiSize(_.normal),s=0;s<this.activeGroundsEntities.length;s++)if(!(this.activeGroundsEntities[s].entityState>2))for(var a=this.activeGroundsEntities[s],o=a.minimumProgressContactPoint-r,u=a.maximumProgressContactPoint+r,h=0;h<this._transporterProgressPoints.length;h++)if(this.deliverySectionTransporters[h].transportState==v.delivering){var g=this._transporterProgressPoints[h][0],l=this._transporterProgressPoints[h][1];this.checkProgressPointRangeOverlap(o,u,g,l)&&(g<a.positionInLineAsProgress?this.deliverySectionTransporters[h].collisionProgressPoint=o-r:this.deliverySectionTransporters[h].collisionProgressPoint=u+r,a.receiveTransporterCollision(this.deliverySectionTransporters[h]))}}},i.getDeliveryLineProgressFromTransporterStateEndTime=function(i,t,e){var n=e-(i-t);return n<t?n/t:1},i.updateDeliverySection=function(i){var t=this;this.deliverySectionTransporters=this.deliverySectionTransporters.filter((function(e,n){var r=e.transportState;return!(e.stateEndTime<i)||(r==v.delivering&&s.instance.transporterDeliveryCompletedCallback(e.cargoAmount,e.kiwiIdentifier),e.transportState=v.pooled,t.cargoTransporterPool.push(e),!1)}))},i.checkEntityStateChanges=function(i){this.activeGroundsEntities=this.activeGroundsEntities.filter((function(t){var e=t.entityState;return e!=c.pooled&&((e==c.leaving||e==c.knockedOut)&&i>t.stateEndTime&&t.setEntityState(c.pooled,i),!0)}))},i.updateCheckingRoom=function(i,t){if(this._preparationProgress=1-(this.checkingPreparationEndTime-i)/this.checking_preparationDuration,!(0==this.checkingRoomTransporters.length||this._preparationProgress<1))if(this.checkingRoomTransporters[0].transportState!=v.checking){if(this.checkingRoomTransporters[0].stateEndTime>i)return;this.checkingRoomTransporters[0].transportState=v.checking,this.checkingRoomTransporters[0].stateEndTime=i+this.checking_processDuration,h.instance.playOneShot("xrayProgress")}else if(this.checkingRoomTransporters[0].stateEndTime<i){var e=this.checkingRoomTransporters.shift();e.transportState=v.delivering,e.stateEndTime=t+this.delivering_stateDuration,this.deliverySectionTransporters.push(e),this._checkingPreparationEndTime=i+this.checking_preparationDuration}},i.updateCheckingQueue=function(i){if(0!=this.checkingQueueTransporters.length&&!(this.checkingRoomTransporters.length>0))return this.checkingQueueTransporters[0].transportState!=v.movingToCheck?(i<this.checkingQueueTransporters[0].stateEndTime?this.checkingQueueTransporters[0].stateEndTime+=this.movingToCheck_stateDuration:this.checkingQueueTransporters[0].stateEndTime=i+this.movingToCheck_stateDuration,this.checkingQueueTransporters[0].transportState=v.movingToCheck,void this.checkingRoomTransporters.push(this.checkingQueueTransporters.shift())):void 0},i.updateFillingQueue=function(i){if(this.fillingQueueTransporters.length<this.fillingQueueMaxLength&&this.dontAddTransporterBefore<i){var t=this.requestNewTransporter(i);t.transportState=v.fillingQueue,this.fillingQueueTransporters.push(t),this.dontAddTransporterBefore=i+this.fillingQueue_minimumInterval}for(var e=0;e<this.fillingQueueTransporters.length&&e<this.checkingQueueMaxLength-this.checkingQueueTransporters.length&&!(i<this.dontMoveTransporterToFillBefore);e++)if(this.fillingQueueTransporters[e].transportState!=v.movingToFill){var n=s.instance.getTransporterAvailableCargo(e);if(n<=0)break;this.dontMoveTransporterToFillBefore=i+this.movingToFill_minimumInterval,this.fillingQueueTransporters[e].transportState=v.movingToFill,this.fillingQueueTransporters[e].stateEndTime=i+this.movingToFill_stateDuration,this.fillingQueueTransporters[e].cargoAmount=n}for(;this.checkingQueueTransporters.length<this.checkingQueueMaxLength&&this.fillingQueueTransporters.length>0&&!(this.fillingQueueTransporters[0].transportState!=v.movingToFill||i<this.fillingQueueTransporters[0].stateEndTime);)s.instance.chargeTransporterCargo(this.fillingQueueTransporters[0].cargoAmount),this.fillingQueueTransporters[0].transportState=v.checkingQueue,this.fillingQueueTransporters[0].stateEndTime=i+this.movingToCheck_stateDuration,this.checkingQueueTransporters.push(this.fillingQueueTransporters.shift())},i.requestGroundsKiwiclick=function(i,t){i==m.king?this.kiwiKingPool[t].receiveClick():i==m.guard&&this.kingsGuardPool[t].receiveClick()},i.getKingClickpointProgress=function(i){return this.kiwiKingPool[i].clickPointProgress},i.requestKingSummon=function(i){i?this._kingSpawnTimes.push(this.groundsSimulationTime):(this._guardMarchStartTime=this.groundsSimulationTime,this._guardMarchEndTime=this._guardMarchStartTime+this.kingsGuard_marchDuration,this._kingSpawnTimes.push(this._guardMarchEndTime+this.kingKiwi_waitAfterMarchDuration))},i.requestKingLeave=function(){for(var i=0;i<this.activeGroundsEntities.length;i++)this.activeGroundsEntities[i].entityType!=m.king||this.activeGroundsEntities[i].entityState>1||this.activeGroundsEntities[i].setEntityState(c.leaving,this.groundsSimulationTime)},i.addActiveKing=function(){this._activeKingCount++},i.removeActiveKing=function(){this._activeKingCount--,s.instance.kingLeaveCallback()},i.requestNewTransporter=function(i){var t;return this.cargoTransporterPool.length>0?((t=this.cargoTransporterPool.shift()).transportState=v.pooled,t.cargoAmount=0,t.stateEndTime=i+this.fillingQueue_stateDuration):(t={kiwiIdentifier:this.transporterIndex,transportState:v.pooled,cargoAmount:0,stateEndTime:i+this.fillingQueue_stateDuration,collisionProgressPoint:0},this.transporterIndex++,this.allCargoTransporters.push(t)),t},i.increaseGuardPoolSize=function(){var i=new u(this,this.kingsGuardPool.length);this.kingsGuardPool.push(i)},i.requestGroundsEntity_King=function(){for(var i,t=0;t<this.kiwiKingPool.length;t++)if(this.kiwiKingPool[t].entityState==c.pooled)return this.kiwiKingPool[t];return i=new o(this,this.kingIndex),this.kiwiKingPool.push(i),this.kiwiKingIndexMap.set(this.kingIndex,i),this.kingIndex++,i},t(e,[{key:"fillingQueue_minimumInterval",get:function(){return this._fillingQueue_minimumInterval}},{key:"fillingQueue_stateDuration",get:function(){return this._fillingQueue_stateDuration}},{key:"fillingQueue_spacingOffset",get:function(){return this._fillingQueue_spacingOffset}},{key:"movingToFill_stateDuration",get:function(){return this._movingToFill_stateDuration}},{key:"movingToFill_minimumInterval",get:function(){return this._movingToFill_minimumInterval}},{key:"checkingQueue_stateDuration",get:function(){return this._checkingQueue_stateDuration}},{key:"checkingQueue_spacingOffset",get:function(){return this._checkingQueue_spacingOffset}},{key:"movingToCheck_stateDuration",get:function(){return this._movingToCheck_stateDuration}},{key:"checking_preparationDuration",get:function(){return this._checking_preparationDuration.currentValue*this.deliverySecondLength}},{key:"checking_processDuration",get:function(){return this._checking_processDuration}},{key:"delivering_stateDuration",get:function(){return this._delivering_stateDuration}},{key:"groundsEntity_knockoutStateDuration",get:function(){return this._groundsEntity_knockoutStateDuration}},{key:"groundsEntity_activeStateDefaultDuration",get:function(){return this._groundsEntity_activeStateDefaultDuration}},{key:"groundsEntity_leavingStateDefaultDuration",get:function(){return this._groundsEntity_leavingStateDefaultDuration}},{key:"groundsEntitySizes",get:function(){return this._groundsEntitySizes}},{key:"deliveryGroundsCoordinateOffset_center",get:function(){return this._deliveryGroundsCoordinateOffset_center}},{key:"deliveryGroundsCoordinateOffset_right",get:function(){return this._deliveryGroundsCoordinateOffset_right}},{key:"deliveryLineCoordinateWidth",get:function(){return this._deliveryLineCoordinateWidth}},{key:"deliveryGrounds_progressPointStart",get:function(){return this._deliveryGrounds_startEndProgressPoints.x}},{key:"deliveryGrounds_progressPointEnd",get:function(){return this._deliveryGrounds_startEndProgressPoints.y}},{key:"kingsGuard_maxCount",get:function(){return this._kingsGuard_maxCount}},{key:"kingsGuard_spacingOffset",get:function(){return this._kingsGuard_spacingOffset}},{key:"kingsGuard_spawnInterval",get:function(){return this._kingsGuard_spawnInterval}},{key:"kingsGuard_marchDuration",get:function(){return this._kingsGuard_marchDuration}},{key:"kingsGuard_timeBeforeTrumpet",get:function(){return this._kingsGuard_timeBeforeTrumpet}},{key:"kiwiKing_maximumClickIntervalBeforeLeaving",get:function(){return this._kiwiKing_maximumClickIntervalBeforeLeaving}},{key:"kingKiwi_waitAfterMarchDuration",get:function(){return this._kingKiwi_waitAfterMarchDuration}},{key:"kingKiwi_entranceMoveDuration",get:function(){return this._kingKiwi_entranceMoveDuration}},{key:"kingKiwi_leaveMoveDuration",get:function(){return this._kingKiwi_leaveMoveDuration}},{key:"kingKiwi_averageUnitsPerSecond",get:function(){return this._kingKiwi_averageUnitsPerSecond}},{key:"kingKiwi_randomMove_durationMin",get:function(){return this._kingKiwi_randomMove_durationMin}},{key:"kingKiwi_randomMove_durationMax",get:function(){return this._kingKiwi_randomMove_durationMax}},{key:"kingKiwi_waitDurationMin",get:function(){return this._kingKiwi_waitDurationMin}},{key:"kingKiwi_waitDurationMax",get:function(){return this._kingKiwi_waitDurationMax}},{key:"transporterSimulationTime",get:function(){return this._simulationTime}},{key:"groundsSimulationTime",get:function(){return this._unscaledSimulationTime}},{key:"lastSimulationDelta",get:function(){return this._lastSimulationDelta}},{key:"checkingPreparationEndTime",get:function(){return this._checkingPreparationEndTime}},{key:"preparationProgress",get:function(){return this._preparationProgress}},{key:"anyKingActive",get:function(){return this._activeKingCount>0}}]),e}())||l),i("GroundsEntityState",function(i){return i[i.entering=0]="entering",i[i.active=1]="active",i[i.leaving=2]="leaving",i[i.knockedOut=3]="knockedOut",i[i.pooled=4]="pooled",i}({}))),m=i("GroundsEntityType",function(i){return i[i.guard=0]="guard",i[i.king=1]="king",i}({})),_=i("KiwiSize",function(i){return i[i.normal=0]="normal",i[i.king=1]="king",i}({})),v=i("TransportState",function(i){return i[i.pooled=0]="pooled",i[i.fillingQueue=1]="fillingQueue",i[i.movingToFill=2]="movingToFill",i[i.checkingQueue=3]="checkingQueue",i[i.movingToCheck=4]="movingToCheck",i[i.checking=5]="checking",i[i.delivering=6]="delivering",i[i.knockedOut=7]="knockedOut",i}({}));e._RF.pop()}}}));

System.register("chunks:///_virtual/DeliveryLineViewController.ts",["./rollupPluginModLoBabelHelpers.js","cc","./DeliveryLineSimulation.ts","./KiwiBodyAnimator.ts","./SimpleAnimator.ts","./CargoKiwiAnimator.ts","./TyrantUtils.ts","./SekiwityViewController.ts","./DeliveryGroundsKiwiAnimator.ts","./ClickpointBar.ts","./CastleController.ts","./StaticDataStructures.ts","./AudioController.ts","./GameSession.ts","./GameParameters.ts","./RepeatingPointer.ts","./GameManager.ts"],(function(i){var t,e,n,r,o,a,s,l,u,d,c,m,h,g,p,f,k,y,w,v,S,A,C,T,b,P,V,K,_,D,I,G,F,M,L,E,R,O;return{setters:[function(i){t=i.applyDecoratedDescriptor,e=i.inheritsLoose,n=i.initializerDefineProperty,r=i.assertThisInitialized,o=i.createClass},function(i){a=i.cclegacy,s=i._decorator,l=i.Prefab,u=i.Node,d=i.ParticleSystem2D,c=i.Vec2,m=i.Vec3,h=i.math,g=i.instantiate,p=i.Component},function(i){f=i.GroundsEntityState,k=i.GroundsEntityType,y=i.TransportState},function(i){w=i.KiwiBodyAnimator},function(i){v=i.OnePerObjectAnimator,S=i.AnimateUnique_KiwiBoing,A=i.AnimateWait,C=i.AnimateShake,T=i.AnimateMoveToTargetNode},function(i){b=i.AnimateCargoKiwiBurnRecovery,P=i.AnimateCargoKiwiBurn,V=i.AnimateCargoBagFill},function(i){K=i.EaseType},function(i){_=i.SekiwityViewController},function(i){D=i.DeliveryGroundsKiwiAnimator},function(i){I=i.ClickpointBar},function(i){G=i.CastleController},function(i){F=i.WhatAttribute},function(i){M=i.AudioController},function(i){L=i.GameSession},function(i){E=i.ColorFormatter},function(i){R=i.RepeatingPointer},function(i){O=i.GameManager}],execute:function(){var B,z,x,Q,N,q,W,j,U,H,Z,J,X,Y,$,ii,ti,ei,ni,ri,oi,ai,si,li,ui;a._RF.push({},"ff5f0gr4ZNLWaqgZ/AAsIpf","DeliveryLineViewController",void 0);var di=s.ccclass,ci=s.property;i("DeliveryLineViewController",(B=di("DeliveryLineViewController"),z=ci({type:l}),x=ci({type:l}),Q=ci({type:l}),N=ci({type:u}),q=ci({type:u}),W=ci({type:u}),j=ci({type:d}),U=ci({type:_}),H=ci({type:I}),Z=ci({type:R}),J=ci({type:G}),B(($=t((Y=function(i){function t(){for(var t,e=arguments.length,o=new Array(e),a=0;a<e;a++)o[a]=arguments[a];return t=i.call.apply(i,[this].concat(o))||this,n(t,"animatedKiwi_cargo",$,r(t)),n(t,"animatedKiwi_guard",ii,r(t)),n(t,"animatedKiwi_king",ti,r(t)),n(t,"deliveryLinePointContainer",ei,r(t)),n(t,"knockedOutEntityContainer",ni,r(t)),n(t,"stufferBeakScaler",ri,r(t)),n(t,"stufferParticleSystem",oi,r(t)),n(t,"sekiwityController",ai,r(t)),n(t,"kingClickpointBar",si,r(t)),n(t,"kingClickPointer",li,r(t)),t.kingClickPointerOffset=new c(-80,-90),n(t,"castleController",ui,r(t)),t.deliveryLinePoints=[],t._timeMultiplierAttribute=void 0,t.bagSizeAttribute=void 0,t.deliverySimulation=void 0,t.lastSimulationDelta=0,t.lastDeltaTime=0,t.isRainbowMode=!1,t.firstKingInSession=!0,t.moveAnimator=new v(1,!0),t.stufferFillAnimationEndTime=0,t.stufferFillAnimationTimer=0,t.stufferFillAnimationInterval=.15,t.kiwiTransporterViews=[],t.kiwiGuardViews=[],t.kiwiKingViews=[],t.kiwiKingIndexMap=new Map,t}e(t,i);var a=t.prototype;return a.initialize=function(i){this.deliveryLinePoints=this.deliveryLinePointContainer.children,this.bagSizeAttribute=L.getAttribute(F.stuffer_bagSize),this.deliverySimulation=i,this._timeMultiplierAttribute=L.getAttribute(F.timeBoost_timeMultiplier),this.kingClickPointer.initialize(O.instance.interfaceManager),this.sekiwityController.initialize(),this.castleController.setKingCount(L.getAttribute(F.king_currentLevel).currentValue)},a.updateLineView=function(i){this.lastDeltaTime=i,this.lastSimulationDelta=this.deliverySimulation.lastSimulationDelta,this.checkPopulateLineViews(),this.updateAllViewStates(),this.checkRainbowMode(),this.updateViewAnimators(this.deliverySimulation.transporterSimulationTime)},a.updateAllViewStates=function(){this.sekiwityController.updateSimulationTime(this.deliverySimulation.transporterSimulationTime),this.updateGroundsEntities(),this.updadeTransporterViewGroup(this.deliverySimulation.cargoTransporterPool),this.updadeTransporterViewGroup(this.deliverySimulation.fillingQueueTransporters),this.updadeTransporterViewGroup(this.deliverySimulation.checkingQueueTransporters),this.updadeTransporterViewGroup(this.deliverySimulation.checkingRoomTransporters),this.updadeTransporterViewGroup(this.deliverySimulation.deliverySectionTransporters)},a.checkRainbowMode=function(){var i=this._timeMultiplierAttribute.currentValue;this.isRainbowMode!=i>1&&(this.isRainbowMode=i>1,this.setRainbowColorActiveStatForGroup(this.isRainbowMode,this.deliverySimulation.cargoTransporterPool),this.setRainbowColorActiveStatForGroup(this.isRainbowMode,this.deliverySimulation.fillingQueueTransporters),this.setRainbowColorActiveStatForGroup(this.isRainbowMode,this.deliverySimulation.checkingQueueTransporters),this.setRainbowColorActiveStatForGroup(this.isRainbowMode,this.deliverySimulation.checkingRoomTransporters),this.setRainbowColorActiveStatForGroup(this.isRainbowMode,this.deliverySimulation.deliverySectionTransporters))},a.setRainbowColorActiveStatForGroup=function(i,t){for(var e=t.length-1;e>=0;e--){var n=this.kiwiTransporterViews[t[e].kiwiIdentifier].assignedAnimator;this.isRainbowMode?n.setBodyColor(E.nextRainbowColor):n.setBodyColorByIndex(2)}},a.updateGroundsEntities=function(){for(var i=0;i<this.deliverySimulation.activeGroundsEntities.length;i++){var t=this.deliverySimulation.activeGroundsEntities[i],e=this.getSpecialVisualDataFromSimulationData(t),n=t.entityState;if(n!=e.lastState)switch(n){default:case f.pooled:e.assignedAnimator.deactivate(),this.moveAnimator.discardAllAnimationsWithObjet(e.assignedAnimator.node),e.kiwiType==k.king&&e.lastState!=f.knockedOut&&this.firstKingInSession&&(this.kingClickPointer.node.active=!1);break;case f.entering:e.assignedAnimator.reActivate(),e.assignedAnimator.reset(),e.assignedAnimator.activateKiwiClicking(),this.deliveryLineContainer.insertChild(e.assignedAnimator.node,9999),e.kiwiType==k.king&&(this.moveAnimator.discardAllAnimationsWithObjet(this.kingClickpointBar.node),this.kingClickpointBar.reset());break;case f.active:e.kiwiType==k.king&&this.firstKingInSession&&(this.kingClickPointer.node.active=!0,this.moveAnimator.addAnimations([new S(this.kingClickPointer.node,.6,[])]));break;case f.leaving:break;case f.knockedOut:e.assignedAnimator.doKnockoutAnimation(this.deliverySimulation.groundsEntity_knockoutStateDuration),this.knockedOutEntityContainer.insertChild(e.assignedAnimator.node,0),M.instance.playKnockoutSound(),e.kiwiType==k.king?(this.kingClickpointBar.doKnockout(),M.instance.playOneShot("royalFart"),this.firstKingInSession&&(this.firstKingInSession=!1,this.kingClickPointer.node.active=!1)):M.instance.playOuchSound()}if(e.lastState=n,e.lastState!=f.pooled&&(e.assignedAnimator.updateAnimations(this.lastDeltaTime),e.lastState!=f.knockedOut)){var r=this.getCoordinateFromLineProgress(t.positionInLineAsProgress);e.assignedAnimator.setPosition(new m(r,0,0)),e.kiwiType==k.king&&(this.kingClickpointBar.setHorizontalCoordinate(r),this.firstKingInSession&&this.kingClickPointer.node.setPosition(r+this.kingClickPointerOffset.x,this.kingClickPointerOffset.y))}}},a.getCoordinateFromLineProgress=function(i){return i*this.deliverySimulation.deliveryLineCoordinateWidth},a.updadeTransporterViewGroup=function(i){for(var t=0;t<i.length;t++){var e=i[t],n=this.kiwiTransporterViews[e.kiwiIdentifier],r=n.lastState!=e.transportState;if(n.lastState=e.transportState,n.lastState!=y.delivering)if(n.lastState!=y.knockedOut){var o=r||n.lastIndexInState!=t;(r||o)&&(n.lastIndexInState=t,n.stateEndTime=e.stateEndTime,this.requestKiwiViewMoveTo(n,r))}else{if(!r)continue;n.assignedAnimator.doKnockoutAnimation(this.deliverySimulation.groundsEntity_knockoutStateDuration),this.moveAnimator.discardAllAnimationsWithObjet(n.assignedAnimator.node),this.knockedOutEntityContainer.insertChild(n.assignedAnimator.node,9999),M.instance.playKnockoutSound(),M.instance.playOuchSound(),n.assignedAnimator.setPosition(new m(this.getCoordinateFromLineProgress(e.collisionProgressPoint),0,0))}else{var a=this.deliverySimulation.delivering_stateDuration;r&&(n.lastIndexInState=t,n.stateEndTime=e.stateEndTime,this.requestSekiwityStartCharging(this.deliverySimulation.transporterSimulationTime),n.assignedAnimator.discardAllAnimations(),this.isRainbowMode||n.assignedAnimator.addAnimations([new A(a/5,[new b(n.assignedAnimator,a/4,[]).setEaseType(K.In)])]));var s=(this.deliverySimulation.groundsSimulationTime-(n.stateEndTime-a))/a,l=this.getCoordinateFromLineProgress(s);n.assignedAnimator.setPosition(new m(l,0,0))}}},a.requestKiwiViewMoveTo=function(i,t){if(i.lastState!=y.pooled){var e,n=i.lastState<y.delivering?this.deliverySimulation.transporterSimulationTime:this.deliverySimulation.groundsSimulationTime,r=i.stateEndTime-n,o=new m(0,i.assignedAnimator.bodyVerticalOffset,0),a=K.InOut;switch(i.lastState){default:case y.fillingQueue:t?(i.assignedAnimator.reActivate(),i.assignedAnimator.reset(),i.assignedAnimator.setPosition(this.pointNode_startingPoint.getPosition()),this.deliveryLineContainer.insertChild(i.assignedAnimator.node,9999),this.isRainbowMode&&i.assignedAnimator.setBodyColor(E.nextRainbowColor),a=K.Out):r=r>0?r+this.deliverySimulation.fillingQueue_stateDuration/2:this.deliverySimulation.fillingQueue_stateDuration/2,e=this.pointNode_fillingQueue,o.x=-this.deliverySimulation.fillingQueue_spacingOffset*i.lastIndexInState,this.addPreGroundsMoveToTransporter(i,e,o,r,a);break;case y.movingToFill:t&&(this.startStufferFill(n),i.assignedAnimator.addAnimations([new A(r/2,[new V(i.assignedAnimator,r,[]).setEaseType(K.Out)])])),a=K.Out,e=this.pointNode_fillingStart,this.addPreGroundsMoveToTransporter(i,e,o,r,a);break;case y.checkingQueue:t||(r=r>0?r+this.deliverySimulation.checkingQueue_stateDuration/2:this.deliverySimulation.checkingQueue_stateDuration/2),e=this.pointNode_checkingQueue,o.x=-this.deliverySimulation.checkingQueue_spacingOffset*i.lastIndexInState,this.addPreGroundsMoveToTransporter(i,e,o,r,a);break;case y.movingToCheck:t&&i.assignedAnimator.addAnimations([new A(r,[new C(i.assignedAnimator.node,1,.075,this.deliverySimulation.checkingPreparationEndTime-n-r,[])])]),a=K.Out,e=this.pointNode_checkingRoom,this.addPreGroundsMoveToTransporter(i,e,o,r,a);break;case y.checking:t&&(this.requestSekiwityStartLightning(n),this.isRainbowMode||i.assignedAnimator.addAnimations([new P(i.assignedAnimator,r,[]).setEaseType(K.In)])),e=this.pointNode_checkingRoom,this.addPreGroundsMoveToTransporter(i,e,o,r,a);break;case y.delivering:console.log("this should not happen as delivering is now an interrupt to moveTo requests, check state transition ordering");break;case y.knockedOut:console.log("this should not happen as knockedOut is now an interrupt to moveTo requests, check state transition ordering")}}else i.assignedAnimator.deactivate()},a.addPreGroundsMoveToTransporter=function(i,t,e,n,r){this.moveAnimator.addAnimations([new T(i.assignedAnimator.node,t,e,n,[]).setEaseType(r)])},a.updateViewAnimators=function(i){this.updateStufferFillAnimation(i),this.sekiwityController.updateAnimations(this.lastDeltaTime),this.castleController.updateAnimations(this.lastDeltaTime),this.moveAnimator.updateAnimations(this.lastSimulationDelta);for(var t=0;t<this.kiwiTransporterViews.length;t++)this.kiwiTransporterViews[t].assignedAnimator.updateAnimations(this.lastDeltaTime);this.deliverySimulation.anyKingActive&&this.kingClickpointBar.updateAnimations(this.lastDeltaTime)},a.startStufferFill=function(i){var t=this.deliverySimulation.movingToCheck_stateDuration/3;this.stufferFillAnimationEndTime=i+t;var e=this.bagSizeAttribute.currentValue,n=Math.min(300,15+Math.sqrt(e)*(1/t));this.stufferParticleSystem.emissionRate=n,M.instance.playOneShot("bagStuffer")},a.updateStufferFillAnimation=function(i){if(i>this.stufferFillAnimationEndTime){if(0==this.stufferFillAnimationTimer)return;this.stufferFillAnimationTimer=Math.max(this.stufferFillAnimationTimer-this.lastSimulationDelta,0),this.stufferParticleSystem.emissionRate=0}else this.stufferFillAnimationTimer=(this.stufferFillAnimationTimer+this.lastSimulationDelta)%(2*this.stufferFillAnimationInterval);var t=h.pingPong(this.stufferFillAnimationTimer,this.stufferFillAnimationInterval)/this.stufferFillAnimationInterval;this.stufferBeakScaler.setScale(h.lerp(1,.8,t),h.lerp(1,1.1,t),1)},a.requestSekiwityStartCharging=function(i){this.sekiwityController.startCharging(i,this.deliverySimulation.checking_preparationDuration)},a.requestSekiwityStartLightning=function(i){this.sekiwityController.startLightning(i,this.deliverySimulation.checking_processDuration)},a.getTransporterIndexPosition=function(i){return this.kiwiTransporterViews[i].assignedAnimator.node.getWorldPosition()},a.getKingIndexPosition=function(i){return this.kiwiKingViews[i].assignedAnimator.node.getWorldPosition()},a.checkPopulateLineViews=function(){for(;this.kiwiTransporterViews.length<this.deliverySimulation.allCargoTransporters.length;){var i=this.deliverySimulation.allCargoTransporters.length-1,t=g(this.animatedKiwi_cargo).getComponent(w);t.initialize(i);var e={lastState:y.pooled,lastIndexInState:0,stateEndTime:this.deliverySimulation.allCargoTransporters[i].stateEndTime,assignedAnimator:t};this.kiwiTransporterViews.push(e)}for(;this.kiwiGuardViews.length<this.deliverySimulation.kingsGuardPool.length;){var n=this.kiwiGuardViews.length,r=g(this.animatedKiwi_guard).getComponent(D);r.initialize(n);var o={kiwiType:k.guard,lastState:f.pooled,stateEndTime:0,identifierIndex:n,assignedAnimator:r};this.kiwiGuardViews.push(o)}for(;this.kiwiKingViews.length<this.deliverySimulation.kiwiKingPool.length;){var a=this.kiwiKingViews.length,s=g(this.animatedKiwi_king).getComponent(D);s.initialize(a);var l={kiwiType:k.king,lastState:f.pooled,stateEndTime:0,identifierIndex:a,assignedAnimator:s};this.kiwiKingIndexMap.set(a,l),this.kiwiKingViews.push(l)}},a.getSpecialVisualDataFromSimulationData=function(i){return i.entityType==k.guard?this.kiwiGuardViews[i.kiwiIdentifier]:i.entityType==k.king?this.kiwiKingViews[i.kiwiIdentifier]:null},a.requestClickpointBarUpdate=function(i){this.kingClickpointBar.setFillProgress(this.deliverySimulation.getKingClickpointProgress(i))},a.requestEntranceCeremony=function(i){this.castleController.requestKingCeremony(i,this.deliverySimulation.kingsGuard_timeBeforeTrumpet)},a.entranceCeremonyEndCallback=function(){this.castleController.kingCeremonyEndCallback()},o(t,[{key:"deliveryLineContainer",get:function(){return this.deliveryLinePointContainer.parent}},{key:"pointNode_startingPoint",get:function(){return this.deliveryLinePoints[0]}},{key:"pointNode_fillingQueue",get:function(){return this.deliveryLinePoints[1]}},{key:"pointNode_fillingStart",get:function(){return this.deliveryLinePoints[2]}},{key:"pointNode_checkingQueue",get:function(){return this.deliveryLinePoints[3]}},{key:"pointNode_checkingRoom",get:function(){return this.deliveryLinePoints[4]}},{key:"pointNode_completionPoint",get:function(){return this.deliveryLinePoints[5]}}]),t}(p)).prototype,"animatedKiwi_cargo",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ii=t(Y.prototype,"animatedKiwi_guard",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ti=t(Y.prototype,"animatedKiwi_king",[Q],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ei=t(Y.prototype,"deliveryLinePointContainer",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ni=t(Y.prototype,"knockedOutEntityContainer",[q],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ri=t(Y.prototype,"stufferBeakScaler",[W],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),oi=t(Y.prototype,"stufferParticleSystem",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ai=t(Y.prototype,"sekiwityController",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),si=t(Y.prototype,"kingClickpointBar",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),li=t(Y.prototype,"kingClickPointer",[Z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ui=t(Y.prototype,"castleController",[J],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),X=Y))||X));a._RF.pop()}}}));

System.register("chunks:///_virtual/DemonKiwiAnimator.ts",["./rollupPluginModLoBabelHelpers.js","cc","./KiwiBodyAnimator.ts"],(function(i){var e,t,o,r,n,a,s,c,d,l;return{setters:[function(i){e=i.applyDecoratedDescriptor,t=i.inheritsLoose,o=i.initializerDefineProperty,r=i.assertThisInitialized,n=i.createClass},function(i){a=i.cclegacy,s=i._decorator,c=i.Node,d=i.Vec3},function(i){l=i.KiwiBodyAnimator}],execute:function(){var p,u,f,h,y;a._RF.push({},"02527Xcm9NKk4GBpni+bV04","DemonKiwiAnimator",void 0);var k=s.ccclass,m=s.property;i("DemonKiwiAnimator",(p=k("DemonKiwiAnimator"),u=m({type:c}),p((y=e((h=function(i){function e(){for(var e,t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return e=i.call.apply(i,[this].concat(n))||this,o(e,"trackedNodes",y,r(e)),e.originalTrackedNodePositions=[],e.defaultBodyColorIndex=0,e.defaultHorizontalScale=.5,e.waddleMinScale=.97,e}t(e,i);var a=e.prototype;return a.onInitialize=function(i){},a.initializedTrackedSpritePositions=function(){i.prototype.initializedTrackedSpritePositions.call(this);for(var e=0;e<this.trackedNodes.length;e++)this.originalTrackedNodePositions.push(this.trackedNodes[e].getPosition())},a.updateTrackedSpritePositions=function(){i.prototype.updateTrackedSpritePositions.call(this);for(var e=0;e<this.trackedNodes.length;e++){var t=this.originalTrackedNodePositions[e],o=new d(t.x,t.y*this.bodyVerticalScale,t.z);this.trackedNodes[e].setPosition(o)}},n(e,[{key:"kiwiIdentifier",get:function(){return"demonKiwi"}}]),e}(l)).prototype,"trackedNodes",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),f=h))||f));a._RF.pop()}}}));

System.register("chunks:///_virtual/DemonKiwiViewController.ts",["./rollupPluginModLoBabelHelpers.js","cc","./KiwiInterfaceAnimator.ts","./KiwiText.ts","./SimpleAnimator.ts","./GameManager.ts","./KiwiButtonController.ts","./TyrantUtils.ts","./GameParameters.ts","./DemonKiwiAnimator.ts","./AudioController.ts","./ProgressBubble.ts","./StaticDataStructures.ts"],(function(t){var e,i,n,o,r,a,s,l,u,h,c,m,d,f,g,p,b,w,A,B,S,C,y,D,M,_,k,v,T,K,F,E,O;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,o=t.assertThisInitialized,r=t.createClass},function(t){a=t.cclegacy,s=t._decorator,l=t.Sprite,u=t.Node,h=t.UITransform,c=t.Widget,m=t.Vec3,d=t.NodeEventType,f=t.math},function(t){g=t.KiwiInterfaceAnimator},function(t){p=t.KiwiText},function(t){b=t.OnePerObjectAnimator,w=t.AnimateKiwiTextColor,A=t.AnimateScaleTo,B=t.AnimateMovement,S=t.AnimateAlpha,C=t.Animate},function(t){y=t.GameManager},function(t){D=t.KiwiButtonController,M=t.KiwiButtonPressAction},function(t){_=t.TyrantUtils,k=t.EaseType},function(t){v=t.ColorFormatter,T=t.TextFormatter},function(t){K=t.DemonKiwiAnimator},function(t){F=t.AudioController},function(t){E=t.ProgressBubble},function(t){O=t.WhatAttribute}],execute:function(){var P,R,x,z,I,V,U,N,W,H,L,j,q,G,Q,Y,J,X,Z,$,tt,et,it;a._RF.push({},"f66f2zaWDxEIodI1ofsQfQ3","DemonKiwiViewController",void 0);var nt=s.ccclass,ot=s.property,rt=(t("DemonKiwiViewController",(P=nt("DemonKiwiViewController"),R=ot({type:K}),x=ot({type:l}),z=ot({type:u}),I=ot({type:u}),V=ot({type:p}),U=ot({type:E}),N=ot({type:h}),W=ot({type:c}),H=ot({type:D}),L=ot({type:D}),P((G=e((q=function(t){function e(){for(var e,i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];return e=t.call.apply(t,[this].concat(r))||this,n(e,"demonKiwiAnimator",G,o(e)),n(e,"demonKiwiBrightEyeSprite",Q,o(e)),n(e,"triangleCrownContainer",Y,o(e)),n(e,"triangleCrownRotator",J,o(e)),n(e,"timeCounterField",X,o(e)),n(e,"offerBubble",Z,o(e)),n(e,"offerBubbleTransform",$,o(e)),n(e,"offerBubbleChildWidgets",tt,o(e)),n(e,"acceptOfferButton",et,o(e)),n(e,"closeOfferButton",it,o(e)),e.timeBoostManager=void 0,e.animator=new b(1,!0),e.demonState=void 0,e.offerBubbleWidths=[420,550],e.offerString_free="CLICK ME AND\n<color=#FFFFFF>TRANSCEND TIME</color>",e.offerString_standard="ACCEPT MY OFFER AND  \n<color=#FFFFFF>TRANSCEND TIME</color>              ",e.demonMoveDuration_hide=1.2,e.demonMoveDuration_hideFast=.4,e.demonMoveDuration_out=1.6,e.demonMoveDuration_outFast=.6,e.demonKiwiPosition_hiding=new m(-8,320,0),e.demonKiwiPosition_channeling=new m(-8,180,0),e.demonKiwiPosition_chilling=new m(-8,112,0),e.demonKiwiPosition_out=new m(-8,2,0),e.triangleCrownScale_inactive=new m(.3,.3,.3),e.triangleCrownScale_active=new m(.8,.8,.8),e.crownRotationParameters={angleRange:90,angleStart:45},e.cycleProgress=0,e}i(e,t);var a=e.prototype;return a.initialize=function(e){t.prototype.initialize.call(this,e),this.liveDataArray.push(y.instance.getAttributeFromType(O.timeBoost_timeMultiplier)),this.demonKiwiAnimator.initialize(0),this.timeBoostManager=y.instance.demonBoostManager,this.acceptOfferButton.addPrimaryPointerAction(new at(this)),this.closeOfferButton.addPrimaryPointerAction(new st(this)),this.demonKiwiAnimator.bodySprite.node.on(d.MOUSE_ENTER,this.demon_onHoverEnter,this),this.demonKiwiAnimator.bodySprite.node.on(d.MOUSE_LEAVE,this.demon_onHoverExit,this),this.demonKiwiAnimator.bodySprite.node.on(d.TOUCH_START,this.requestBoostActivation,this),this.setState(rt.hiding)},a.onDataUpdate=function(){},a.updateAnimator=function(e){var i=e-this.lastAnimationTime;this.updateDemonState(i),t.prototype.updateAnimator.call(this,e),this.demonKiwiAnimator.updateAnimations(i)},a.updateDemonState=function(t){switch(this.demonState<4&&this.timeBoostManager.remainingDurationAttribute.currentValue>0&&this.setState(rt.channelingStart),this.demonState){default:console.error("unknown demonstate as "+this.demonState);break;case rt.hiding:if(!this.timeBoostManager.canBoost)break;this.timeBoostManager.remainingDurationAttribute.isUnlocked?this.setState(rt.chilling):this.setState(rt.peeking);break;case rt.chilling:if(!this.timeBoostManager.canOffer)break;this.setState(rt.offering);break;case rt.peeking:if(!this.timeBoostManager.remainingDurationAttribute.isUnlocked)break;this.setState(rt.chilling);break;case rt.offering:break;case rt.channelingStart:if(this.updateTimerText(),this.updateChannelingAnimation(t),this.timeBoostManager.remainingDurationAttribute.currentValue>this.timeBoostManager.timeBoostDuration+this.timeBoostManager.rampingDuration)break;this.setState(rt.channeling);break;case rt.channeling:if(this.updateTimerText(),this.updateChannelingAnimation(t),this.timeBoostManager.remainingDurationAttribute.currentValue>this.timeBoostManager.rampingDuration)break;this.setState(rt.channelingEnd);break;case rt.channelingEnd:if(this.updateTimerText(),this.updateChannelingAnimation(t),this.timeBoostManager.remainingDurationAttribute.currentValue>0)break;this.setState(rt.hiding)}},a.showDemonOffer=function(t){this.offerBubble.node.active=!0,this.offerBubbleTransform.width=t?this.offerBubbleWidths[0]:this.offerBubbleWidths[1],this.offerBubble.textField.text=t?this.offerString_free:this.offerString_standard,this.offerBubbleChildWidgets.forEach((function(t){t.updateAlignment()})),this.acceptOfferButton.node.active=!t,this.closeOfferButton.node.active=!t,this.offerBubble.addBubbleBounce()},a.closeDemonOFfer=function(){this.offerBubble.node.active=!1},a.forceDemonOffer=function(){this.setState(rt.offering)},a.setState=function(t){if(t!=this.demonState){switch(this.demonState){default:case rt.peeking:case rt.chilling:case rt.hiding:case rt.channelingStart:case rt.channeling:break;case rt.offering:this.closeDemonOFfer();break;case rt.channelingEnd:this.resetChannelingAnimation()}switch(t){default:console.error("unknown demonstate as "+this.demonState);break;case rt.peeking:this.animator.addAnimations([new B(this.demonKiwiAnimator.node,this.demonKiwiPosition_channeling,this.demonMoveDuration_out,[])]);break;case rt.chilling:this.animator.addAnimations([new B(this.demonKiwiAnimator.node,this.demonKiwiPosition_chilling,this.demonMoveDuration_out,[])]);break;case rt.hiding:this.timeBoostManager.remainingDurationAttribute.isUnlocked?this.animator.addAnimations([new B(this.demonKiwiAnimator.node,this.demonKiwiPosition_hiding,this.demonMoveDuration_hide,[])]):(this.animator.addAnimations([new B(this.demonKiwiAnimator.node,this.demonKiwiPosition_hiding,this.demonMoveDuration_hideFast,[]).setEaseType(k.Out)]),this.resetOfferCooldown());break;case rt.offering:this.animator.addAnimations([new B(this.demonKiwiAnimator.node,this.demonKiwiPosition_out,this.demonMoveDuration_out,[new lt(this,!this.timeMultiplierAttribute.isUnlocked)])]),F.instance.playOneShot("clearThroat");break;case rt.channelingStart:this.resetChannelingAnimation(),this.timeCounterField.color=_.setColorAlpha(v.colorScheme_kursed.lighterColor,0),this.animator.addAnimations([new w(this.timeCounterField,v.colorScheme_kursed.lighterColor,this.demonMoveDuration_outFast,[]).setEaseType(k.In)]),this.animator.addAnimations([new B(this.demonKiwiAnimator.node,this.demonKiwiPosition_channeling,this.demonMoveDuration_outFast,[])]),this.animator.addAnimations([new A(this.triangleCrownContainer,this.triangleCrownScale_active,this.demonMoveDuration_outFast,[]).setEaseType(k.Linear)]);break;case rt.channeling:this.animator.addAnimations([new w(this.timeCounterField,v.colorScheme_kursedBright.lighterColor,.1,[]).setEaseType(k.In)]),this.timeCounterField.color=v.colorScheme_kursedBright.lighterColor,F.instance.setTimeMultiplierState(!0);break;case rt.channelingEnd:this.timeCounterField.color=v.colorScheme_kursed.lighterColor,this.animator.addAnimations([new w(this.timeCounterField,_.setColorAlpha(v.colorScheme_kursed.darkerColor,0),this.timeBoostManager.rampingDuration-this.demonMoveDuration_hide,[new A(this.triangleCrownContainer,this.triangleCrownScale_inactive,this.demonMoveDuration_hide,[]).setEaseType(k.Linear).setEaseType(k.Out)]).setEaseType(k.ThirdOut)]),F.instance.setTimeMultiplierState(!1)}this.demonState=t}},a.demon_onHoverEnter=function(){this.demonState==rt.chilling||this.demonState==rt.offering?this.animator.addAnimations([new S(this.demonKiwiBrightEyeSprite,1,.15,[]).setEaseType(k.Out)]):this.demonState==rt.peeking&&this.setState(rt.hiding)},a.demon_onHoverExit=function(){this.demonState!=rt.chilling&&this.demonState!=rt.offering||this.animator.addAnimations([new S(this.demonKiwiBrightEyeSprite,0,.1,[]).setEaseType(k.In)])},a.requestBoostActivation=function(){this.demonState>3||!this.timeBoostManager.remainingDurationAttribute.isUnlocked||y.instance.requestActivateTimeBoost()},a.closeOfferButtonClickedCallback=function(){this.setState(rt.chilling),this.resetOfferCooldown()},a.resetOfferCooldown=function(){y.instance.resetDemonOfferCooldown()},a.updateChannelingAnimation=function(t){var e=_.easeIn(this.timeBoostManager.timeMultiplierAttribute.currentValue/this.timeBoostManager.timeBoostMultiplierMax)*this.timeBoostManager.timeBoostMultiplierMax;this.cycleProgress=(this.cycleProgress+t*e)%1,this.updateAnimationVisuals()},a.updateAnimationVisuals=function(){var t=.7+.3*_.easeInOut(f.pingPong(2*this.cycleProgress,1));this.demonKiwiBrightEyeSprite.color=_.setColorAlpha(v.color_white,t);var e=this.cycleProgress*this.crownRotationParameters.angleRange,i=this.crownRotationParameters.angleStart-e%this.crownRotationParameters.angleRange;this.triangleCrownRotator.setRotationFromEuler(0,0,i)},a.resetChannelingAnimation=function(){this.cycleProgress=0,this.updateAnimationVisuals()},a.updateTimerText=function(){this.timeCounterField.text=T.getFormattedNumber(f.clamp(this.timeBoostManager.remainingDurationAttribute.currentValue-this.timeBoostManager.rampingDuration,0,this.timeBoostManager.timeBoostDuration),"",this.timeBoostManager.remainingDurationAttribute.numberFormat)},r(e,[{key:"timeMultiplierAttribute",get:function(){return this.liveDataArray[0]}}]),e}(g)).prototype,"demonKiwiAnimator",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Q=e(q.prototype,"demonKiwiBrightEyeSprite",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Y=e(q.prototype,"triangleCrownContainer",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),J=e(q.prototype,"triangleCrownRotator",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),X=e(q.prototype,"timeCounterField",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Z=e(q.prototype,"offerBubble",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),$=e(q.prototype,"offerBubbleTransform",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),tt=e(q.prototype,"offerBubbleChildWidgets",[W],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),et=e(q.prototype,"acceptOfferButton",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),it=e(q.prototype,"closeOfferButton",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),j=q))||j)),t("DemonState",function(t){return t[t.hiding=0]="hiding",t[t.peeking=1]="peeking",t[t.chilling=2]="chilling",t[t.offering=3]="offering",t[t.channelingStart=4]="channelingStart",t[t.channeling=5]="channeling",t[t.channelingEnd=6]="channelingEnd",t}({}))),at=t("OnButtonPress_DemonKiwi_AcceptOffer",function(t){function e(){return t.apply(this,arguments)||this}return i(e,t),e.prototype.doButtonPressAction=function(t){this.interactionObject.requestBoostActivation()},e}(M)),st=t("OnButtonPress_DemonKiwi_CloseOffer",function(t){function e(){return t.apply(this,arguments)||this}return i(e,t),e.prototype.doButtonPressAction=function(t){this.interactionObject.closeOfferButtonClickedCallback()},e}(M)),lt=t("AnimateInstant_DemonOfferCallback",function(t){function e(e,i){var n;return(n=t.call(this,e,.001,[])||this).showOfferAsFree=void 0,n.showOfferAsFree=i,n}i(e,t);var n=e.prototype;return n.doAnimationInitialization=function(){this.objectToAnimate.showDemonOffer(this.showOfferAsFree)},n.doAnimationActions=function(){},e}(C));a._RF.pop()}}}));

System.register("chunks:///_virtual/FloatingNumberComponent.ts",["./rollupPluginModLoBabelHelpers.js","cc","./KiwiInterfaceAnimator.ts","./KiwiText.ts","./SimpleAnimator.ts","./GameParameters.ts","./TyrantUtils.ts"],(function(t){var e,i,n,o,r,a,s,l,c,u,p,h,m,f,g,d;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.createClass,o=t.initializerDefineProperty,r=t.assertThisInitialized},function(t){a=t.cclegacy,s=t._decorator,l=t.Sprite},function(t){c=t.KiwiInterfaceAnimator},function(t){u=t.KiwiText},function(t){p=t.AnimateMovement,h=t.AnimateColor,m=t.Animate},function(t){f=t.TextFormatter,g=t.ColorFormatter},function(t){d=t.EaseType}],execute:function(){var y,T,b,w,k,A,F;a._RF.push({},"fbb17QvkyNHo7h23cqXkIcA","FloatingNumberComponent",void 0);var x=s.ccclass,v=s.property,C=(t("FloatingNumberComponent",(y=x("FloatingNumberComponent"),T=v({type:l}),b=v({type:u}),y((A=e((k=function(t){function e(){for(var e,i=arguments.length,n=new Array(i),a=0;a<i;a++)n[a]=arguments[a];return e=t.call.apply(t,[this].concat(n))||this,o(e,"alphaMaskSprite",A,r(e)),o(e,"kiwiText",F,r(e)),e}i(e,t);var n=e.prototype;return n.onDataUpdate=function(){},n.doFloatingNumberAtPosition=function(t,e,i){this.node.active=!0,this.node.setWorldPosition(t),e<0?(e=Math.ceil(e),this.kiwiText.setLineHeight(36),this.kiwiText.setFontSize(32)):(e=Math.floor(e),this.kiwiText.setLineHeight(72),this.kiwiText.setFontSize(64)),this.kiwiText.text=f.getFormattedCurrencyDelta(e,i),this.alphaMaskSprite.color=g.color_white,this.animator.addAnimationBlock([new p(this.node,this.node.getPosition().add3f(0,200,0),1.2,[]).setEaseType(d.Out),new h(this.alphaMaskSprite,g.color_whiteClear,1.2,[new C(this)]).setEaseType(d.HalfIn)])},n.returnToPool=function(){this.node.active=!1,this.interfaceManager.returnFloatingNumberToPool(this)},e}(c)).prototype,"alphaMaskSprite",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=e(k.prototype,"kiwiText",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=k))||w)),t("SpecialAnimateCallback_FloatingText",function(t){function e(e){return t.call(this,e,0,[])||this}i(e,t);var o=e.prototype;return o.doAnimationInitialization=function(){this.floatingNumberComponent.returnToPool()},o.doAnimationActions=function(){},n(e,[{key:"floatingNumberComponent",get:function(){return this.objectToAnimate}}]),e}(m)));a._RF.pop()}}}));

System.register("chunks:///_virtual/FreeBoostProgressTracker.ts",["./rollupPluginModLoBabelHelpers.js","cc","./KiwiInterfaceAnimator.ts","./GameSession.ts","./StaticDataStructures.ts","./SimpleAnimator.ts","./KiwiText.ts","./TyrantUtils.ts","./GameParameters.ts"],(function(t){var e,i,r,o,a,n,s,l,u,c,h,d,p,f,b,g,m,y,A,v;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,r=t.initializerDefineProperty,o=t.assertThisInitialized,a=t.createClass},function(t){n=t.cclegacy,s=t._decorator,l=t.Sprite,u=t.Vec3,c=t.math},function(t){h=t.KiwiInterfaceAnimator},function(t){d=t.GameSession},function(t){p=t.WhatAttribute,f=t.CurrencyType},function(t){b=t.OnePerObjectAnimator,g=t.AnimateMovement,m=t.AnimateKiwiTextColor},function(t){y=t.KiwiText},function(t){A=t.TyrantUtils},function(t){v=t.ColorFormatter}],execute:function(){var S,_,F,B,w,P,k,D,T;n._RF.push({},"154fd2V33pFsZfLEW7UtKlV","FreeBoostProgressTracker",void 0);var C=s.ccclass,H=s.property;t("FreeBoostProgressTracker",(S=C("FreeBoostProgressTracker"),_=H({type:y}),F=H({type:l}),B=H({type:l}),S((k=e((P=function(t){function e(){for(var e,i=arguments.length,a=new Array(i),n=0;n<i;n++)a[n]=arguments[n];return e=t.call.apply(t,[this].concat(a))||this,r(e,"boostAvailableField",k,o(e)),r(e,"backgroundSprite",D,o(e)),r(e,"fillProgressSprite",T,o(e)),e.boostManager=void 0,e._hasFreeBoost=!1,e._isHidden=!1,e.animator=new b(1,!0),e}i(e,t);var n=e.prototype;return n.initialize=function(e){t.prototype.initialize.call(this,e),this.interfaceManager.registerLiveDataElement(this),this.liveDataArray.push(d.getAttribute(p.buildingBoost_freeBoostInterval)),this.liveDataArray.push(d.getCurrencyData(f.freeBoost)),this.boostManager=d.getBoostManager(),this.updateHiddenState()},n.onDataUpdate=function(){this._isHidden&&this.updateHiddenState();var t=this.boostAmount;this._hasFreeBoost!=t>0&&(this._hasFreeBoost=t>0,this.updateVisualState())},n.updateHiddenState=function(){this._isHidden!=!this.boostIntervalAttribute.isUnlocked&&(this._isHidden=!this.boostIntervalAttribute.isUnlocked,this._isHidden?this.node.setPosition(300,0,0):this.animator.addAnimations([new g(this.node,new u(0,0,0),1.2,[])]))},n.updateVisualState=function(){this.backgroundSprite.color=this._hasFreeBoost?A.setColorAlpha(v.color_white,.5):v.color_white,this.fillProgressSprite.fillRange=this._hasFreeBoost?-1:this.fillProgressSprite.fillRange,this._hasFreeBoost?this.animator.addAnimations([new m(this.boostAvailableField,v.currencyColorScheme_freeBoost.counterFieldColor,.4,[])]):this.animator.addAnimations([new m(this.boostAvailableField,A.setColorAlpha(v.currencyColorScheme_freeBoost.counterFieldColor,0),.4,[])])},n.updateAnimator=function(e){t.prototype.updateAnimator.call(this,e),this._hasFreeBoost||this._isHidden||(this.fillProgressSprite.fillRange=-c.clamp(this.boostManager.freeBoostTimer/this.boostInterval,0,1))},a(e,[{key:"boostIntervalAttribute",get:function(){return this.liveDataArray[0]}},{key:"boostInterval",get:function(){return this.liveDataArray[0].currentValue}},{key:"boostAmount",get:function(){return this.liveDataArray[1].currentAmount}}]),e}(h)).prototype,"boostAvailableField",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=e(P.prototype,"backgroundSprite",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=e(P.prototype,"fillProgressSprite",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=P))||w));n._RF.pop()}}}));

System.register("chunks:///_virtual/GameManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameParameters.ts","./InterfaceManager.ts","./Hoarder.ts","./DeliveryLineSimulation.ts","./DeliveryLineViewController.ts","./AutoKiwikerSimulation.ts","./AutoKiwikerViewController.ts","./SaveableDataManager.ts","./LiveDataStructures.ts","./StaticDataStructures.ts","./StaticData.ts","./TutorialController.ts","./AudioController.ts","./PokiPlatform.ts","./GameSession.ts","./KiwiButtonController.ts"],(function(e){var t,i,r,n,a,o,s,u,l,c,h,g,d,m,p,y,f,k,C,v,_,b,B,M,A,D,T,w,S,F,V,L,E,x,K,P,I,q,N,O,R,z,G,U,H,$;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.createClass,r=e.inheritsLoose,n=e.initializerDefineProperty,a=e.assertThisInitialized},function(e){o=e.cclegacy,s=e._decorator,u=e.UITransform,l=e.Node,c=e.math,h=e.Vec3,g=e.KeyCode,d=e.game,m=e.input,p=e.Input,y=e.screen,f=e.Game,k=e.Component},function(e){C=e.TextFormatter,v=e.GameParameters},function(e){_=e.InterfaceManager},function(e){b=e.Hoarder},function(e){B=e.DeliveryLineSimulation,M=e.GroundsEntityType},function(e){A=e.DeliveryLineViewController},function(e){D=e.AutoKiwikerSimulation},function(e){T=e.AutoKiwikerViewController},function(e){w=e.SaveableDataManager},function(e){S=e.LiveCurrencyData,F=e.CompositeAttribute,V=e.BasicAttribute,L=e.BasicSaveableAttribute,E=e.LiveSkillNodeData,x=e.LiveBuildingData,K=e.LiveBoostData},function(e){P=e.CurrencyType,I=e.AttributeStructure,q=e.WhatAttribute,N=e.AttributeValueOperation},function(e){O=e.StaticData},function(e){R=e.TutorialController},function(e){z=e.AudioController},function(e){G=e.CCPokiSDK},function(e){U=e.GameSession},function(e){H=e.KiwiButtonController,$=e.KiwiButtonPressAction}],execute:function(){var W,Y,X,j,J,Q,Z,ee,te,ie,re,ne,ae,oe,se,ue,le,ce,he,ge,de,me;o._RF.push({},"48983GusEhHgJJ9Ohp19aWv","GameManager",void 0);var pe=s.ccclass,ye=s.property,fe=e("GameManager",(W=pe("GameManager"),Y=ye({type:u}),X=ye({type:l}),j=ye({type:H}),J=ye({type:b}),Q=ye({type:_}),Z=ye({type:z}),ee=ye({type:A}),te=ye({type:T}),ie=ye({type:R}),W(((me=function(e){function t(){for(var t,i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return(t=e.call.apply(e,[this].concat(r))||this).saveableDataManager=null,t.gameParameters=null,n(t,"rootTransform",ae,a(t)),n(t,"wrongOrientationWarningNode",oe,a(t)),n(t,"cheatButtons",se,a(t)),n(t,"dataHoarder",ue,a(t)),n(t,"interfaceManager",le,a(t)),n(t,"audioController",ce,a(t)),t.deliveryLineSimulation=void 0,n(t,"deliveryLineView",he,a(t)),t.autoKiwikerSimulation=void 0,n(t,"autoKiwikerView",ge,a(t)),n(t,"tutorialController",de,a(t)),t.kingLevelManager=void 0,t._timeBoostManager=void 0,t.sekiwityClickMultiplierManager=void 0,t.kiwiKing_skipEntranceCeremony=!1,t._timeMultiplierAttribute=void 0,t.resolutionChangeFlag=0,t.saveTimer=30,t.saveInterval=30,t._allLiveData=[],t._liveCurrencyData=[],t._currencyTypeDataMap=new Map,t._liveSkillNodeMap=new Map,t._liveSkillNodes=[],t._compositeAttributeData=[],t._basicAttributeData=[],t._attributeTypeMap=new Map,t._compositeAttributeTypeMap=new Map,t._liveBoostData=[],t._boostBuildingTypeMap=new Map,t._deliveryTimeMultiplierAttribute=void 0,t._liveBuildingData=[],t._buildingTypeMap=new Map,t.cheatSequence=[g.KEY_S,g.KEY_H,g.KEY_A,g.KEY_P,g.KEY_E,g.KEY_Z],t.cheatIndex=0,t.cheatsEnabled=!1,t.buttonCheatSequence=[g.BRACKET_LEFT,g.BRACKET_LEFT,g.BRACKET_LEFT,g.BRACKET_RIGHT,g.BRACKET_LEFT,g.BRACKET_LEFT,g.BRACKET_LEFT],t.buttonCheatIndex=0,t._clickExperienceCharges=0,t._clickExperienceChargesPerSecond=20,t._maxClickExperienceCharges=200,t.playerHasInteracted=!1,t.gameplayActive=!1,t.adPlaying=!1,t}r(t,e);var o=t.prototype;return o.getAttributeFromType=function(e){return this._attributeTypeMap.get(e)},o.getAllSkillNodeData=function(){return this._liveSkillNodes},o.getSkillNodeDataFromIdentifier=function(e){return this._liveSkillNodeMap.get(e)},o.getBuildingFromType=function(e){return this._buildingTypeMap.get(e)},o.getBoostFromBuildingType=function(e){return this._boostBuildingTypeMap.get(e)},o.onLoad=function(){null==t.instance?t._instance=this:(console.log("duplicated gamemanager class, deleting"),this.destroy()),navigator.sendBeacon("https://leveldata.poki.io/data","53355a2b-3f59-4531-b495-f050dd4a45ad"),window.addEventListener("keydown",(function(e){["ArrowDown","ArrowUp"," "].includes(e.key)&&e.preventDefault()})),window.addEventListener("wheel",(function(e){return e.preventDefault()}),{passive:!1}),d.on(G.EVENT_REWARD_BREAK_DONE,this.rewardedAdEndedCallback,this),d.on(G.EVENT_COMMERCIAL_BREAK_DONE,this.adEndedCallback,this),this.initializeGameParameters(),this.initializeStoredData(),this.dataHoarder.initialize(),this.initializeInternalData(),this.audioController.initialize(),this.interfaceManager.initializeInterface(),this.tutorialController.initialize(this.saveableDataManager.saveableTutorialStepCompletionStates,this.interfaceManager),m.on(p.EventType.KEY_DOWN,this.onKeyDown,this),y.on("window-resize",this.flagResolutionChange,this),this.flagResolutionChange(),this.bindCheatButtons(),d.on(f.EVENT_GAME_INITED,this.onLoadComplete,this)},o.onLoadComplete=function(){this.scheduleOnce(this.requestCommercialBreak,.1)},o.flagResolutionChange=function(){this.resolutionChangeFlag=3},o.updateCanvasSizeDependencies=function(){this.resolutionChangeFlag<=0||(this.resolutionChangeFlag--,this.resolutionChangeFlag>1||this.deliveryLineSimulation.recalculateDeliveryLineSize(this.rootTransform.width,this.rootTransform.height))},o.initializeGameParameters=function(){this.gameParameters=new v},o.initializeStoredData=function(){this.saveableDataManager=new w,this.saveableDataManager.loadCurrencyData(),this.saveableDataManager.loadAttributeData(),this.saveableDataManager.loadBuildingData(),this.saveableDataManager.loadSkillNodeUnlockData(),this.saveableDataManager.loadTutorialStepData()},o.initializeInternalData=function(){for(var e=this,t=0;t<O.staticCurrencyData.length;t++){var i=O.staticCurrencyData[t],r=new S(this.saveableDataManager.getSavedCurrencyData(i.currencyType),i);this._liveCurrencyData.push(r),this._currencyTypeDataMap.set(this._liveCurrencyData[t].currencyType,r)}for(var n=0;n<O.staticAttributeData.length;n++){var a=O.staticAttributeData[n],o=void 0;switch(a.attributeStructure){default:case I.basic:o=V.getBasicAttributeFromStaticAttributeData(a);break;case I.basicSaveable:o=new L(a,this.saveableDataManager.getAttributeValue(a.whatAttribute));break;case I.composite:o=new F(V.getBasicAttributeFromStaticAttributeData(a)),this._compositeAttributeTypeMap.set(o.whatAttribute,o)}this._attributeTypeMap.set(a.whatAttribute,o)}for(var s=0;s<O.skillNodeData.length;s++){var u=O.skillNodeData[s],l=q[u.whatSkillNode.whatCategory]+u.whatSkillNode.index,c=new E(u,this.saveableDataManager.getSkillNodeUnlockedState(l));this._liveSkillNodes.push(c),this._liveSkillNodeMap.set(l,c)}this._liveSkillNodes.forEach((function(t){var i=t.skillNodeData.connectTo;if(!(void 0===i||i.length<=0))for(var r=0;r<i.length;r++){var n=e._liveSkillNodeMap.get(q[i[r].whatCategory]+i[r].index);t.registerConnectedNode(n),n.registerConnectedNode(t)}})),this._deliveryTimeMultiplierAttribute=this.getAttributeFromType(q.sekiwity_speed);for(var h=0;h<O.staticBuildingData.length;h++){var g=O.staticBuildingData[h],d=new x(U.getAttribute(g.pairedAttributeType),this.saveableDataManager.getBuildingLevel(g.buildingType),g);this._liveBuildingData.push(d),this._buildingTypeMap.set(g.buildingType,d)}for(var m=0;m<O.staticBoostData.length;m++){var p=O.staticBoostData[m],y=this.getBuildingFromType(p.boostedBuildingType),f=new K(p,y);this._boostBuildingTypeMap.set(y.buildingType,f),this._liveBoostData.push(f)}this._timeMultiplierAttribute=this.getAttributeFromType(q.timeBoost_timeMultiplier),this.deliveryLineSimulation=new B(this.gameParameters),this.deliveryLineView.initialize(this.deliveryLineSimulation),this.autoKiwikerSimulation=new D(0),this.autoKiwikerView.initialize(this.autoKiwikerSimulation),this.kingLevelManager=new ke(this),this._timeBoostManager=new Ce(this.gameParameters),this.sekiwityClickMultiplierManager=new ve(this)},o.lateUpdate=function(e){if(!this.adPlaying){var t=e*this.currentTimeMultiplier;this.demonBoostManager.updateTimers(e),this.updateClickExperienceCharge(t),this.deliveryLineSimulation.anyKingActive&&!this.interfaceManager.skilltreeIsOpen?this.kingLevelManager.updateKingVisitTimer(e):this.kingLevelManager.incrementExperienceTimer(e),this.sekiwityClickMultiplierManager.updateClickBonusDecay(e),this.updateAttributeBoosts(e),this.updateCompositeAttributeData(),this.deliveryLineSimulation.updateSimulation(t,e),this.deliveryLineView.updateLineView(t),this.autoKiwikerSimulation.updateSimulation(t),this.autoKiwikerView.updateAutoViews(),this.interfaceManager.updateInterfaceAnimators(e),this.interfaceManager.updateLiveDataElements(),this.tutorialController.updateTutorialStates(e),this.clearLiveDataFlags(),this.updateAutoSave(e),this.updateCanvasSizeDependencies()}},o.clearLiveDataFlags=function(){for(var e=0;e<this._allLiveData.length;e++)this._allLiveData[e].clearLiveDataChangedFlag()},o.updateAutoSave=function(e){this.saveTimer-=e,this.saveTimer>0||(this.saveableDataManager.saveAllBlocks(),this.saveTimer=this.saveInterval)},o.registerLiveData=function(e){this._allLiveData.indexOf(e)>-1?console.error("duplicate liveData registration of type "+typeof e):this._allLiveData.push(e)},o.getCurrencyDataFromType=function(e){return this._currencyTypeDataMap.get(e)},o.getCurrencyAmountFromType=function(e){return this.getCurrencyDataFromType(e).currentAmount},o.tryChargeCurrency=function(e,t){e<0&&console.log("invalid negative charge value received, use creditCurrency() with a positive value to increment.");var i=this.getCurrencyDataFromType(t),r=i.currentAmount>=e;return r?(i.changeCurrencyByAmount(-e),this.interfaceManager.chargeCurrencyByAmountCallback(e,t),t!=P.kiwi&&z.instance.playOneShot("currencySpend")):(this.interfaceManager.notEnoughCurrencyCallback(t),t!=P.kiwi&&z.instance.playOneShot("errorSound")),r},o.creditCurrency=function(e,t,i){e<0&&console.log("invalid negative credit value received, use tryChargeCurrency() with a positive value to attempt to decrement."),this.getCurrencyDataFromType(t).changeCurrencyByAmount(e),t!=P.kiwi&&z.instance.playOneShot("koinIncome"),this.interfaceManager.requestFloatingNumberForCurrency(i,e,t)},o.registerCompositeAttribute=function(e){this._compositeAttributeData.indexOf(e)>-1?console.error("duplicate compositeAttribute registration of type "+q[e.whatAttribute]):this._compositeAttributeData.push(e)},o.deregisterCompositeAttribute=function(e){this._compositeAttributeData=this._compositeAttributeData.filter((function(t){return t!=e}))},o.registerBasicAttribute=function(e){this._basicAttributeData.indexOf(e)>-1?console.error("duplicate basicAttribute registration of type "+q[e.whatAttribute]):this._basicAttributeData.push(e)},o.updateAttributeBoosts=function(e){for(var t=0;t<this._liveBoostData.length;t++)this._liveBoostData[t].updateBoostTimer(e)},o.updateCompositeAttributeData=function(){for(var e=0;e<this._compositeAttributeData.length;e++){if(this._compositeAttributeData[e].attributeStructure==I.composite)this._compositeAttributeData[e].recalculateFlaggedValues()}},o.requestKingLevelExperienceRequirementUpdate=function(){var e=this.getAttributeFromType(q.king_currentLevel).currentValue;this.getAttributeFromType(q.king_currentExperienceRequirement).setBaseValue(this.gameParameters.getKingExperienceRequirementForLevel(e))},o.tryPurchaseUpgradeCountForBuilding=function(e,t){var i=this.getBuildingFromType(e),r=this.tryChargeCurrency(i.getTotalCostForUpgradeLevelCount(t),P.koin);return r&&i.setBuildingLevel(i.buildingLevel+t),r},o.autoKiwikerHitCompletedCallback=function(){var e=this.getAttributeFromType(q.kiwiProduction_auto).currentValue;if(e>=0){var t=this.autoKiwikerView.getCarHitterPosition().add3f(50,60,0);this.kingLevelManager.incrementExperience(10),this.creditCurrency(e,P.kiwi,t),this.interfaceManager.requestBigKiwiBounce(e)}},o.getTransporterAvailableCargo=function(e){var t=this.getCurrencyDataFromType(P.kiwi),i=this.getAttributeFromType(q.stuffer_bagSize).currentValue,r=(e+1)*i;return t.currentAmount<r?0:i},o.chargeTransporterCargo=function(e){this.tryChargeCurrency(e,P.kiwi)},o.transporterDeliveryCompletedCallback=function(e,t){var i=this.getAttributeFromType(q.castle_kiwiValueMultiplier);this.creditCurrency(i.currentValue*e,P.koin,this.deliveryLineView.getTransporterIndexPosition(t).add3f(-140,80,0))},o.requestKingSummon=function(){var e=this.kiwiKing_skipEntranceCeremony;e||(this.deliveryLineView.requestEntranceCeremony(this.getAttributeFromType(q.king_currentLevel).currentValue),z.instance.playOneShot("heyYou"),z.instance.stopMusic()),this.deliveryLineSimulation.requestKingSummon(e),this.kingLevelManager.resetKingVisitTimer(this.kiwiKing_clickIntervalBeforeLeaving)},o.requestResetKingVisitTimer=function(){this.kingLevelManager.resetKingVisitTimer(this.kiwiKing_clickIntervalBeforeLeaving)},o.requestKingClickIncome=function(e,t){var i=this.getAttributeFromType(q.stuffer_bagSize).currentValue*this.getAttributeFromType(q.castle_kiwiValueMultiplier).currentValue*this.gameParameters.getKingClickIncomeMultiplier(t);this.creditCurrency(i,P.koin,this.deliveryLineView.getKingIndexPosition(e).add3f(0,80,0))},o.requestKingSpecialIncome=function(e){this.creditCurrency(1+Math.floor(this.getAttributeFromType(q.king_currentLevel).currentValue/10),P.token,this.deliveryLineView.getKingIndexPosition(e).add3f(0,120,0))},o.requestKingLeave=function(){this.deliveryLineSimulation.requestKingLeave()},o.kingLeaveCallback=function(){this.deliveryLineSimulation.anyKingActive||(this.deliveryLineView.entranceCeremonyEndCallback(),this.kingLevelManager.zeroKingVisitTimer(),z.instance.playOneShot("celebration"),z.instance.playBGM())},o.bindCheatButtons=function(){var e=this;this.cheatButtons.forEach((function(t){t.initialize(e.interfaceManager)})),this.cheatButtons[0].addPrimaryPointerAction(new _e(this,g.F1)),this.cheatButtons[1].addPrimaryPointerAction(new _e(this,g.F2)),this.cheatButtons[2].addPrimaryPointerAction(new _e(this,g.F3)),this.cheatButtons[3].addPrimaryPointerAction(new _e(this,g.F4)),this.cheatButtons[4].addPrimaryPointerAction(new _e(this,g.F5)),this.cheatButtons[5].addPrimaryPointerAction(new _e(this,g.F6)),this.cheatButtons[6].addPrimaryPointerAction(new _e(this,g.F7)),this.cheatButtons[7].addPrimaryPointerAction(new _e(this,g.F8)),this.cheatButtons[8].addPrimaryPointerAction(new _e(this,g.F9)),this.cheatButtons[9].addPrimaryPointerAction(new _e(this,g.F12))},o.onKeyDown=function(e){var t=e.keyCode;this.processKeyCode(t)},o.processKeyCode=function(e){e==g.SPACE&&this.doBigKiwiClick(),this.cheatsEnabled&&this.checkCheatInput(e),this.checkCheatSequence(e),this.checkButtonCheatSequence(e)},o.checkCheatInput=function(e){e==g.F1&&this.doCheat_F1(),e==g.F2&&this.doCheat_F2(),e==g.F3&&this.doCheat_F3(),e==g.F4&&this.doCheat_F4(),e==g.F5&&this.doCheat_F5(),e==g.F6&&this.doCheat_F6(),e==g.F7&&this.doCheat_F7(),e==g.F8&&this.doCheat_F8(),e==g.F9&&this.doCheat_F9(),e==g.F12&&this.doCheat_F12()},o.doCheat_F1=function(){var e=U.getAttribute(q.king_currentExperience),t=U.getAttribute(q.king_currentExperienceRequirement);e.setValue(.99*t.currentValue)},o.doCheat_F2=function(){this.creditCurrency(1e3,P.kiwi,new h(-200,200,0)),this.creditCurrency(1e3,P.koin,new h(0,200,0)),this.creditCurrency(1e3,P.token,new h(200,200,0))},o.doCheat_F3=function(){this.creditCurrency(1e3*this.getCurrencyAmountFromType(P.kiwi),P.kiwi,new h(-200,200,0)),this.creditCurrency(1e3*this.getCurrencyAmountFromType(P.koin),P.koin,new h(0,200,0)),this.creditCurrency(1e3*this.getCurrencyAmountFromType(P.token),P.token,new h(200,200,0))},o.doCheat_F4=function(){this.tryChargeCurrency(this.getCurrencyAmountFromType(P.kiwi),P.kiwi),this.tryChargeCurrency(this.getCurrencyAmountFromType(P.koin),P.koin),this.tryChargeCurrency(this.getCurrencyAmountFromType(P.token),P.token)},o.doCheat_F5=function(){U.getCurrencyData(P.freeBoost).changeCurrencyByAmount(1)},o.doCheat_F6=function(){this.tutorialController.forceCompleteCurrentStep()},o.doCheat_F7=function(){this.interfaceManager.requestForcedDemonOffer()},o.doCheat_F8=function(){this.interfaceManager.toggleCheatPanel()},o.doCheat_F9=function(){this.interfaceManager.toggleFramePanel()},o.doCheat_F12=function(){this.saveableDataManager.wipeAllBlocks()},o.checkCheatSequence=function(e){e==this.cheatSequence[this.cheatIndex]?(this.cheatIndex++,this.cheatIndex==this.cheatSequence.length&&(this.toggleCheats(),this.cheatIndex=0)):this.cheatIndex=0},o.checkButtonCheatSequence=function(e){e==this.buttonCheatSequence[this.buttonCheatIndex]?(this.buttonCheatIndex++,this.buttonCheatIndex==this.buttonCheatSequence.length&&(this.toggleCheats(),this.cheatIndex=0)):this.buttonCheatIndex=0},o.toggleCheats=function(){this.cheatsEnabled=!this.cheatsEnabled,this.interfaceManager.setCheatPanelVisibility(this.cheatsEnabled)},o.updateClickExperienceCharge=function(e){this._clickExperienceCharges=Math.min(this._clickExperienceCharges+e*this._clickExperienceChargesPerSecond,this._maxClickExperienceCharges)},o.getClickExperienceCharge=function(){var e=Math.max(.05*this._clickExperienceCharges,.33);return this._clickExperienceCharges*=.95,e},o.doBigKiwiClick=function(){var e=this.getAttributeFromType(q.kiwiProduction_click).currentValue;return e>=0&&(this.kingLevelManager.incrementExperience(this.getClickExperienceCharge()),this.creditCurrency(e,P.kiwi,this.interfaceManager.getBigKiwiClickPosition()),this.interfaceManager.requestBigKiwiBounce(e)),e},o.doSekiwityClick=function(){this.sekiwityClickMultiplierManager.sekiwityClickedCallback(),this.deliveryLineView.sekiwityController.emitChargingBoltsFromBanner()},o.sekiwityMultiplierDecayedCallback=function(){this.deliveryLineView.sekiwityController.emitChargingBoltsFromBanner()},o.doGroundsKiwiClick=function(e,t){this.deliveryLineSimulation.requestGroundsKiwiclick(e,t),e==M.king&&this.deliveryLineView.requestClickpointBarUpdate(t)},o.genericPlayerInteractionCallback=function(){this.playerHasInteracted=!0,this.tryStartGameplay()},o.tryStartGameplay=function(){!this.gameplayActive&&this.playerHasInteracted&&(G.gameplayStart(),this.gameplayActive=!0)},o.tryStopGameplay=function(){this.gameplayActive&&(G.gameplayStop(),this.gameplayActive=!1)},o.requestCommercialBreak=function(){this.adStartedCallback(),G.commercialBreak()},o.requestDemonBoostAdBreak=function(){this.adStartedCallback(),G.rewardBreak()},o.adStartedCallback=function(){this.tryStopGameplay(),this.adPlaying=!0,this.audioController.muteForAd()},o.adEndedCallback=function(){this.tryStartGameplay(),this.adPlaying=!1,this.audioController.unmuteForAd()},o.rewardedAdEndedCallback=function(){var e=arguments[0];e&&this.demonBoostManager.activateSelectedBoost(),this.interfaceManager.closeAdBreakScreens(),this.adEndedCallback()},o.requestActivateBoostForBuilding=function(e){this.demonBoostManager.setSelectedBoost(this.getBoostFromBuildingType(e)),this.requestBoostOrAdBreak()},o.requestActivateTimeBoost=function(){this.demonBoostManager.resetDemonOfferInterval(),this.demonBoostManager.setSelectedBoost(null),this._timeMultiplierAttribute.isUnlocked?this.requestBoostOrAdBreak():this.demonBoostManager.activateSelectedBoost()},o.requestBoostOrAdBreak=function(){this.getCurrencyAmountFromType(P.freeBoost)<1||this.demonBoostManager.timeBoostSelected?this.interfaceManager.requestAdBreakConfirmationScreen(this.demonBoostManager.getSelectedBoostDescription()):(this.tryChargeCurrency(1,P.freeBoost),this.demonBoostManager.activateSelectedBoost())},o.resetDemonOfferCooldown=function(){this.demonBoostManager.resetDemonOfferInterval()},i(t,[{key:"screenHeight",get:function(){return this.rootTransform.height}},{key:"screenWidth",get:function(){return this.rootTransform.width}},{key:"kiwiKing_clickIntervalBeforeLeaving",get:function(){return this.deliveryLineSimulation.kiwiKing_maximumClickIntervalBeforeLeaving}},{key:"demonBoostManager",get:function(){return this._timeBoostManager}},{key:"currentTimeMultiplier",get:function(){return this._timeMultiplierAttribute.currentValue}},{key:"sekiwityClickMultiplierBonus",get:function(){return this.sekiwityClickMultiplierManager.clickMultiplier}},{key:"deliveryTimeMultiplier",get:function(){return this._deliveryTimeMultiplierAttribute.currentValue}}],[{key:"instance",get:function(){return this._instance}}]),t}(k))._instance=null,ae=t((ne=me).prototype,"rootTransform",[Y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),oe=t(ne.prototype,"wrongOrientationWarningNode",[X],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),se=t(ne.prototype,"cheatButtons",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),ue=t(ne.prototype,"dataHoarder",[J],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),le=t(ne.prototype,"interfaceManager",[Q],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ce=t(ne.prototype,"audioController",[Z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),he=t(ne.prototype,"deliveryLineView",[ee],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ge=t(ne.prototype,"autoKiwikerView",[te],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),de=t(ne.prototype,"tutorialController",[ie],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),re=ne))||re)),ke=e("KingLevelManager",function(){function e(e){this._gameManager=void 0,this._kingLevel=void 0,this._kingExperience=void 0,this._kingExperienceRequirement=void 0,this._kingVisitProgress=void 0,this.experienceTimer=0,this.kingVisitTimer=0,this.kingVisitDuration=1,this._gameManager=e,this._kingLevel=e.getAttributeFromType(q.king_currentLevel),this._kingExperience=e.getAttributeFromType(q.king_currentExperience),this._kingExperienceRequirement=e.getAttributeFromType(q.king_currentExperienceRequirement),this._kingVisitProgress=e.getAttributeFromType(q.king_kingVisitProgress),this.requestNewExperienceRequirement()}var t=e.prototype;return t.incrementExperienceTimer=function(e){this.experienceTimer+=e,this.experienceTimer>1&&(this.experienceTimer--,this.incrementExperience(1))},t.resetKingVisitTimer=function(e){this._kingVisitProgress.setValue(1),this.kingVisitDuration=e,this.kingVisitTimer=this.kingVisitDuration},t.zeroKingVisitTimer=function(){this._kingVisitProgress.setValue(0),this.kingVisitTimer=0},t.updateKingVisitTimer=function(e){this._kingVisitProgress.currentValue<=0||(this.kingVisitTimer-=e,this._kingVisitProgress.setValue(c.clamp(this.kingVisitTimer/this.kingVisitDuration,0,1)),this.kingVisitTimer<=0&&this._gameManager.requestKingLeave())},t.incrementExperience=function(e){if(!(this._kingVisitProgress.currentValue>0)&&this._kingExperience.isUnlocked){this._kingExperience.changeValueBy(e);var t=this._kingExperienceRequirement.currentValue;this._kingExperience.currentValue>t&&(this._kingExperience.changeValueBy(-t),this._kingLevel.changeValueBy(1),this._gameManager.requestKingSummon(),this.requestNewExperienceRequirement())}},t.requestNewExperienceRequirement=function(){this._gameManager.requestKingLevelExperienceRequirementUpdate()},e}()),Ce=e("DemonBoostManager",function(){function e(e){this._boostTimeMultiplierAttribute=void 0,this._boostTimerAttribute=void 0,this._freeBoostIntervalAttribute=void 0,this._freeBoostCurrency=void 0,this._rampingDuration=void 0,this._demonOfferInterval=void 0,this._timeBoostDuration=void 0,this._timeBoostMultiplierMax=void 0,this._selectedBoost=void 0,this._adConfirmationString="<outline color=#230513 width=8><color=#AC9788>Watch a short ad to gain</color>\n$fkt$\nfor $dur$ seconds?</outline>",this._timeboostEffectString="<color=#FFFFFF>QUINTUPLE (5X)</color> game speed",this._currentTime=0,this._freeBoostTimer=0,this._minimumTimeForNextBoost=5,this._nextDemonOfferTime=0,this._boostTimeMultiplierAttribute=U.getAttribute(q.timeBoost_timeMultiplier),this._boostTimerAttribute=U.getAttribute(q.timeBoost_currentDuration),this._rampingDuration=e.demonBoostParameters.demonBoostRampingDuration,this._demonOfferInterval=e.demonBoostParameters.demonOfferInterval,this._timeBoostDuration=U.getAttribute(q.buildingBoost_effectDuration),this._timeBoostMultiplierMax=e.demonBoostParameters.demonBoostTimeMultiplier,this._freeBoostIntervalAttribute=U.getAttribute(q.buildingBoost_freeBoostInterval),this._freeBoostCurrency=U.getCurrencyData(P.freeBoost)}var t=e.prototype;return t.getSelectedBoostDescription=function(){var e,t=this._adConfirmationString;return e=null==this._selectedBoost?this._timeboostEffectString:(e=(e=this._selectedBoost.affectedBuilding.compositeAttribute.attributeString).replace("$val$","<color=#FFFFFF>"+C.numberToPercentageString(this._selectedBoost.boostBonusAttribute.currentValue)+"</color>")).replace("$dif$","<color=#FFFFFF>(+"+C.wholeNumberToMixedStringShortestForm(Math.floor(this._selectedBoost.getBonusAttributeDelta()))+")</color>"),t=(t=t.replace("$fkt$",e)).replace("$dur$",Math.floor(this.timeBoostDuration).toString())},t.setSelectedBoost=function(e){this._selectedBoost=e},t.activateSelectedBoost=function(){null==this._selectedBoost?this.activateTimeBoost():this._selectedBoost.activateBoost(),this.setSelectedBoost(null)},t.updateTimers=function(e){if(this._currentTime+=e,this._freeBoostIntervalAttribute.isUnlocked&&this._freeBoostCurrency.currentAmount<1){this._freeBoostTimer+=e;var t=this._freeBoostIntervalAttribute.currentValue;this._freeBoostTimer>t&&(this._freeBoostTimer-=t,fe.instance.creditCurrency(1,P.freeBoost,new h(0,1e3,0)))}var i=this._boostTimerAttribute.currentValue;if(!(i<=0)){var r;i=Math.max(0,i-e),this._boostTimerAttribute.setValue(i),r=i<=this.rampingDuration?i/this.rampingDuration:i>this.timeBoostDuration+this.rampingDuration?1-i%(this.timeBoostDuration+this.rampingDuration)/this.rampingDuration:1;var n=c.lerp(1,this._timeBoostMultiplierMax,r);i<=0&&this.resetDemonOfferInterval(),n!=this._boostTimeMultiplierAttribute.currentValue&&this._boostTimeMultiplierAttribute.setValue(n)}},t.activateTimeBoost=function(){this._boostTimerAttribute.setValue(this.timeBoostDuration+2*this.rampingDuration)},t.resetDemonOfferInterval=function(){this._minimumTimeForNextBoost=this._currentTime+this._boostTimerAttribute.currentValue+5,this._boostTimerAttribute.isUnlocked?this._nextDemonOfferTime=this._currentTime+this._demonOfferInterval:this._nextDemonOfferTime=this._currentTime+10},i(e,[{key:"timeMultiplierAttribute",get:function(){return this._boostTimeMultiplierAttribute}},{key:"remainingDurationAttribute",get:function(){return this._boostTimerAttribute}},{key:"rampingDuration",get:function(){return this._rampingDuration}},{key:"timeBoostDuration",get:function(){return this._timeBoostDuration.currentValue}},{key:"timeBoostMultiplierMax",get:function(){return this._timeBoostMultiplierMax}},{key:"timeBoostSelected",get:function(){return null==this._selectedBoost}},{key:"freeBoostTimer",get:function(){return this._freeBoostTimer}},{key:"canBoost",get:function(){return this._currentTime>=this._minimumTimeForNextBoost}},{key:"canOffer",get:function(){return this._currentTime>=this._nextDemonOfferTime}}]),e}()),ve=e("SekiwityClickMultiplierManager",function(){function e(e){this._gameManager=void 0,this._clickMultiplier=void 0,this.clickMultiplierLimit=void 0,this.decayCountSinceLastClick=0,this.multiplierIncrementPerClick=.3,this.clickBonusDecayInterval=.25,this.clickBonusDecayTimer=0,this._clickBonusAggressiveMultiplicativeDecayRate=.97,this._clickBonusMultiplicativeDecayRate=.985,this._clickBonusLinearDecayRate=-.05,this._gameManager=e,this.clickMultiplierLimit=e.getAttributeFromType(q.sekiwity_clickMultiplierLimit),this._clickMultiplier=new V(q.sekiwity_speed,1,N.multiplierMultiplicative),U.getAttribute(q.sekiwity_speed).addAttribute(this.clickMultiplier)}var t=e.prototype;return t.sekiwityClickedCallback=function(){this.decayCountSinceLastClick=0,this.clickBonusDecayTimer=0,this.currentMultiplier<1.2?this.setClickMultiplierValue(1.5):this.changeClickMultiplierValue(this.multiplierIncrementPerClick),z.instance.playXrayClickSound(this.currentMultiplier)},t.setClickMultiplierValue=function(e){e<this.clickMultiplierLimit.currentValue&&(e-=e%.05),e!=this.clickMultiplier.currentValue&&this.clickMultiplier.setValue(c.clamp(e,this.clickMultiplier.defaultValue,this.clickMultiplierLimit.currentValue))},t.changeClickMultiplierValue=function(e){this.setClickMultiplierValue(this.currentMultiplier+e)},t.updateClickBonusDecay=function(e){1!=this.currentMultiplier&&(this.clickBonusDecayTimer+=e,this.clickBonusDecayTimer>this.clickBonusDecayInterval&&this.doClickMultiplierDecay())},t.doClickMultiplierDecay=function(){this.currentMultiplier>6.5?this.setClickMultiplierValue(this.currentMultiplier*this._clickBonusAggressiveMultiplicativeDecayRate):this.currentMultiplier>2?this.setClickMultiplierValue(this.currentMultiplier*this._clickBonusMultiplicativeDecayRate):this.changeClickMultiplierValue(this._clickBonusLinearDecayRate),this.decayCountSinceLastClick++,this.decayCountSinceLastClick>=5&&(this.decayCountSinceLastClick-=5,this._gameManager.sekiwityMultiplierDecayedCallback(),z.instance.playXrayClickSound(this.currentMultiplier)),this.clickBonusDecayTimer-=this.clickBonusDecayInterval},i(e,[{key:"clickMultiplier",get:function(){return this._clickMultiplier}},{key:"currentMultiplier",get:function(){return this.clickMultiplier.currentValue}}]),e}()),_e=e("OnButtonPress_countAsKeyPress",function(e){function t(t,i){var r;return(r=e.call(this,t)||this).cheatKeyCode=void 0,r.cheatKeyCode=i,r}return r(t,e),t.prototype.doButtonPressAction=function(e){this.interactionObject.processKeyCode(this.cheatKeyCode)},t}($));o._RF.pop()}}}));

System.register("chunks:///_virtual/GameParameters.ts",["./rollupPluginModLoBabelHelpers.js","cc","./SimpleAnimator.ts","./TyrantUtils.ts","./StaticDataStructures.ts"],(function(e){var o,r,t,n,i,l,a,u,s,c,g,h,m,w;return{setters:[function(e){o=e.createClass},function(e){r=e.cclegacy,t=e._decorator,n=e.Color,i=e.math,l=e.Vec3},function(e){a=e.AnimateMoveInLaunchTrajectory,u=e.AnimateScaleFromTo,s=e.AnimateRelativeRotation},function(e){c=e.TyrantUtils,g=e.EaseType},function(e){h=e.AttributeValueOperation,m=e.CurrencyType,w=e.WhatAttribute}],execute:function(){var d,_;r._RF.push({},"47737tTgsVFJLixJ2xB1xIU","GameParameters",void 0);var C=t.ccclass,S=(t.property,e("GameParameters",C("GameParameters")(((_=function(){function e(){this.groundsEntitySizes=[30,50],this.deliveryProcessParameters={fillingQueue_minimumInterval:1,fillingQueue_stateDuration:2,fillingQueue_spacingOffset:80,movingToFill_stateDuration:1,movingToFill_minimumInterval:.5,checkingQueue_stateDuration:3,checkingQueue_spacingOffset:100,movingToCheck_stateDuration:3,checking_preparationDuration:10,checking_processDuration:3,delivering_stateDuration:6},this.deliveryGroundsParameters={groundsEntity_knockoutStateDuration:1.4,groundsEntity_activeStateDefaultDuration:30,groundsEntity_leavingStateDefaultDuration:4,groundsCoordinateOffset_center:280,groundsCoordinateOffset_right:-280,kingsGuard_maxCount:3,kingsGuard_spacingOffset:100,kingsGuard_spawnInterval:.66,kingsGuard_marchDuration:5,kingsGuard_timeBeforeTrumpet:3,kiwiKing_maximumClickIntervalBeforeLeaving:15,kingKiwi_waitAfterMarchDuration:2.5,kingKiwi_entranceMoveDuration:2.5,kingKiwi_leaveMoveDuration:4,kingKiwi_averageUnitsPerSecond:150,kingKiwi_randomMove_durationMin:.75,kingKiwi_randomMove_durationMax:2.5,kingKiwi_waitDurationMin:1,kingKiwi_waitDurationMax:3},this.demonBoostParameters={demonOfferInterval:60,demonBoostRampingDuration:3,demonBoostTimeMultiplier:5}}e.getKnockoutAnimationBlock=function(e,o,r){return[new a(e,i.randomRange(270,350),i.randomRange(50,250)*o,r,[]),new u(e,new l(1.1,.8,1),new l(1.65,1.2,1),.66*r,[]).setEaseType(g.Linear),new s(e,i.randomRange(60,120)*o,r,[]).setEaseType(g.Out)]};var o=e.prototype;return o.getKingClickIncomeMultiplier=function(e){return Math.pow(1+(e-1)/6,1.5)},o.getKingExperienceRequirementForLevel=function(e){return 0==e?300:500+100*Math.min(e,31)},e}()).maxRecursionIterations=50,d=_))||d),e("TextFormatter",function(){function e(){}return e.formatUniqueText_sekiwityClickMultiplier=function(e){var o=e.toString();return o.length<2?o+=".00":o.length<4?o+="0":o.length>4&&(o=o.slice(0,4)),o},e.setLabelFormatStyle=function(e,o){switch(o){default:case p.regular:e.enableOutline=!1;break;case p.outline_regular:e.outlineWidth=4,e.outlineColor=new n("37211b"),e.enableOutline=!0;break;case p.outline_regularThin:e.outlineWidth=3,e.outlineColor=new n("37211b"),e.enableOutline=!0;break;case p.outline_regularMedium:e.outlineWidth=8,e.outlineColor=new n("37211b"),e.enableOutline=!0;break;case p.outline_regularThick:e.outlineWidth=12,e.outlineColor=new n("37211b"),e.enableOutline=!0;break;case p.outline_regularBlued:e.outlineWidth=4,e.outlineColor=new n("00142a"),e.enableOutline=!0;break;case p.outline_purpled:e.outlineWidth=4,e.outlineColor=new n("230513"),e.enableOutline=!0;break;case p.outline_buildingUpgradeTitle:e.outlineWidth=6,e.outlineColor=new n("329bff"),e.enableOutline=!0;break;case p.outline_sekiwityMultiplier:e.outlineWidth=8,e.outlineColor=new n("329bff"),e.enableOutline=!0;break;case p.outline_warning:e.outlineWidth=4,e.outlineColor=new n("00142a"),e.enableOutline=!0}},e.getTextStyleFromFormat=function(o){switch(o){default:case p.regular:return e.textFormat_none;case p.outline_regular:return e.textFormat_outlineRegular;case p.outline_regularThin:return e.textFormat_outlineRegularThin;case p.outline_regularMedium:return e.textFormat_outlineRegularMedium;case p.outline_regularThick:return e.textFormat_outlineRegularThick;case p.outline_regularBlued:return e.textFormat_outlineBlued;case p.outline_purpled:return e.textFormat_outlinePurpled;case p.outline_buildingUpgradeTitle:return e.textFormat_outlineBuildingUpgradeTitle;case p.outline_sekiwityMultiplier:return e.textFormat_oulineSekiwityMultiplier;case p.outline_warning:return e.textFormat_oulineWarning}},e.getTimeStringFromSecondsTimer=function(e){var o="",r=Math.floor(e%60),t=Math.floor(e/60);for(o+=r;o.length<2;)o="0"+o;return o=t+":"+o},e.getFormattedNumber=function(o,r,t){switch(t){default:case f.regular:return o.toString();case f.shortForm:return e.wholeNumberToMixedStringShortForm(o,r);case f.longForm:return e.wholeNumberToMixedStringLongForm(o,r);case f.romanNumeral:return e.numberToRomanString(o);case f.shortestForm:return e.wholeNumberToMixedStringShortestForm(o);case f.percentage:return e.numberToPercentageString(o);case f.minutesSeconds:return this.getTimeStringFromSecondsTimer(o)}},e.getFormattedOperation=function(e,o){var r=e>=0?"+":"";switch(o){default:case h.baseValue:case h.additiveBonus:return r+e;case h.multiplierAdditive:return r+this.numberToPercentageString(e);case h.multiplierMultiplicative:return"x"+e}},e.getFormattedCurrencyDelta=function(e,o){var r=this.wholeNumberToMixedStringShortestForm(e);switch(o){default:return e<0?"<outline color=#300800 width=6>"+r+"</ouline>":"<outline color=#300800 width=6>+"+r+"</ouline>";case m.kiwi:return e<0?"<outline color=#62B42E width=6>"+r+"</ouline>":"<outline color=#62B42E width=6>+"+r+"</ouline>";case m.koin:return e<0?"<outline color=#300800 width=6>"+r+"</ouline>":"<img src='icon_koin'/><outline color=#300800 width=6>"+r+"</ouline>";case m.token:return e<0?"<outline color=#2371BD width=6>"+r+"</ouline>":"<img src='icon_token'/><outline color=#2371BD width=6>"+r+"</ouline>"}},e.numberToRomanString=function(e){return e>99?"ZZ":e<1?"":e>=90?"XC"+this.numberToRomanString(e-90):e>=50?"L"+this.numberToRomanString(e-50):e>=40?"XL"+this.numberToRomanString(e-40):e>=10?"X"+this.numberToRomanString(e-10):e>=9?"IX"+this.numberToRomanString(e-9):e>=5?"V"+this.numberToRomanString(e-5):e>=4?"IV"+this.numberToRomanString(e-4):e>=1?"I"+this.numberToRomanString(e-1):(console.log("unexpected error with value "+e),e.toString())},e.wholeNumberToMixedStringShortestForm=function(e){if(e%1!=0)return console.error("whole numbers please, got "+e),null;var o="";e<0&&(o+="-",e*=-1);var r=e.toString();r=r.replace(".","");var t=Math.floor(Math.log10(e)),n=t%3+1,i=Math.floor(t/3);if(t<3)o+=r;else if(o+=r.slice(0,n)+"."+r.slice(n,n+1),i<11)o+=this.unitsShortForm[i];else{var l=Math.floor((i-2)/26),a=(i-2)%26;o+=this.alphabetUpper[l]+this.alphabetUpper[a]}return o},e.wholeNumberToMixedStringShortForm=function(e,o){if(e%1!=0)return console.error("whole numbers please, got "+e+"  "+o),null;1==e&&o.length>1&&(o=o.slice(0,o.length-1));var r="";e<0&&(r+="-",e*=-1);var t=e.toString();t=t.replace(".","");var n=Math.floor(Math.log10(e)),i=n%3+1,l=Math.floor(n/3);if(n<3)r+=t+" "+o;else if(r+=t.slice(0,i)+"."+t.slice(i,i+2),l<11)r+=this.unitsShortForm[l];else{var a=Math.floor((l-2)/26),u=(l-2)%26;r+=this.alphabetUpper[a]+this.alphabetUpper[u]}return r},e.wholeNumberToMixedStringLongForm=function(e,o){if(e%1!=0)return console.error("whole numbers please, got "+e+"  "+o),null;1==e&&o.length>1&&(o=o.slice(0,o.length-1));var r="";e<0&&(r+="-",e*=-1);var t=e.toString();t=t.replace(".","");var n=Math.floor(Math.log10(e)),i=n%3+1,l=Math.floor(n/3);if(n<3)r+=t+" "+o;else if(n<6)r+=t.slice(0,i)+" "+t.slice(i,i+3)+" "+o;else if(r+=t.slice(0,i)+"."+t.slice(i,i+2)+" ",l<11)r+=this.unitsLongForm[l];else{var a=Math.floor((l-2)/26),u=(l-2)%26;r+=this.alphabetUpper[a]+this.alphabetUpper[u]+this.natoUnitsNoLetter[u]}return r},e.numberToPercentageString=function(e){return e=Math.floor(100*e),this.wholeNumberToMixedStringShortestForm(e)+"%"},e}()));S.textFormat_none={openStyleString:"",closeStyleString:""},S.textFormat_outlineRegularThin={openStyleString:"<outline color=#37211b width=3>",closeStyleString:"</outline>"},S.textFormat_outlineRegular={openStyleString:"<outline color=#37211b width=4>",closeStyleString:"</outline>"},S.textFormat_outlineRegularMedium={openStyleString:"<outline color=#37211b width=8>",closeStyleString:"</outline>"},S.textFormat_outlineRegularThick={openStyleString:"<outline color=#37211b width=12>",closeStyleString:"</outline>"},S.textFormat_outlineBlued={openStyleString:"<outline color=#00142a width=4>",closeStyleString:"</outline>"},S.textFormat_outlinePurpled={openStyleString:"<outline color=#230513 width=4>",closeStyleString:"</outline>"},S.textFormat_outlinePurpledThick={openStyleString:"<outline color=#230513 width=8>",closeStyleString:"</outline>"},S.textFormat_outlineBuildingUpgradeTitle={openStyleString:"<outline color=#329bff width=6>",closeStyleString:"</outline>"},S.textFormat_oulineSekiwityMultiplier={openStyleString:"<outline color=#329bff width=8>",closeStyleString:"</outline>"},S.textFormat_oulineWarning={openStyleString:"<outline color=#00142a width=4>",closeStyleString:"</outline>"},S.unitsShortForm=["","k","m","b","t","qd","qt","sx","sp","oc","nn"],S.unitsLongForm=["","","million","billion","trillion","quadrillion","quintillion","sextillion","septillion","octillion","nonillion"],S.alphabetUpper=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],S.natoUnitsNoLetter=["lfillion","ravillion","harlillion","eltillion","chillion","oxtrillion","olfillion","otillion","ndillion","ullietion","ilollion","imallion","ikellion","ovillion","scarillion","apillion","uebillion","omellion","ierrillion","angillion","nifillion","ictillion","hiskillion","raillion","ankillion","ulillion"];var p=e("KiwiTextFormat",function(e){return e[e.regular=0]="regular",e[e.outline_regular=6]="outline_regular",e[e.outline_purpled=7]="outline_purpled",e[e.outline_buildingUpgradeTitle=8]="outline_buildingUpgradeTitle",e[e.outline_regularThin=9]="outline_regularThin",e[e.outline_regularThick=10]="outline_regularThick",e[e.outline_regularBlued=11]="outline_regularBlued",e[e.outline_regularMedium=12]="outline_regularMedium",e[e.outline_sekiwityMultiplier=13]="outline_sekiwityMultiplier",e[e.outline_warning=14]="outline_warning",e}({})),f=e("NumberTextFormat",function(e){return e[e.regular=0]="regular",e[e.shortForm=1]="shortForm",e[e.longForm=2]="longForm",e[e.romanNumeral=3]="romanNumeral",e[e.shortestForm=4]="shortestForm",e[e.percentage=5]="percentage",e[e.minutesSeconds=6]="minutesSeconds",e}({})),k=e("ColorFormatter",function(){function e(){}return e.getColorForWhatAttribute=function(e){switch(e){default:return console.error(w[e]+" doesn't have an associated color"),new n(0,0,0);case w.undefined:return this.colorScheme_aqua.lighterColor;case w.kiwiProduction_click:return new n(149,233,63);case w.kiwiProduction_auto:return new n(240,243,88);case w.stuffer_bagSize:return new n(248,156,90);case w.sekiwity_speed:case w.sekiwity_deliveryInterval:return new n(248,198,152);case w.sekiwity_clickMultiplierLimit:return new n(255,251,151);case w.castle_kiwiValueMultiplier:return new n(255,204,5);case w.king_currentExperienceRequirement:case w.king_clickPoints:return new n(40,201,255);case w.buildingBoost_effectDuration:case w.buildingBoost_powerMultiplier:case w.buildingBoost_freeBoostInterval:return new n(255,81,183);case w.gun_reloadInterval:case w.gun_ammoLimit:return new n(255,52,66)}},e.createButtonColorSchemeFromColor_lit=function(e){return{highlightColor:c.lerpColors(e,this.illuminationColor_light,.7),lighterColor:c.lerpColors(e,this.illuminationColor_light,.6),darkerColor:c.lerpColors(e,this.illuminationColor_light,.3),contrastColor:c.lerpColors(e,this.illuminationColor_light,.9)}},e.createButtonColorSchemeFromColor_on=function(e){return{highlightColor:c.lerpColors(e,this.illuminationColor_light,.3),lighterColor:c.lerpColors(e,this.illuminationColor_light,.2),darkerColor:c.lerpColors(e,this.illuminationColor_shadow,.25),contrastColor:c.lerpColors(e,this.illuminationColor_shadow,.35)}},e.createButtonColorSchemeFromColor_off=function(e){return{highlightColor:e=c.lerpColors(e,this.illuminationColor_shadow,.4),lighterColor:c.lerpColors(e,this.illuminationColor_shadow,.15),darkerColor:c.lerpColors(e,this.illuminationColor_shadow,.5),contrastColor:c.lerpColors(e,this.illuminationColor_shadow,.5)}},o(e,null,[{key:"nextRainbowColor",get:function(){return this.rainbowIndex=(this.rainbowIndex+1)%this.rainbowColors.length,this.rainbowColors[this.rainbowIndex]}}]),e}());k.kiwiColors=[new n(255,255,255),new n(107,62,55),new n(91,100,82),new n(33,145,251),new n(220,85,96)],k.rainbowIndex=-1,k.rainbowColors=[new n(255,15,8),new n(255,94,8),new n(255,180,8),new n(105,255,8),new n(8,248,255),new n(8,100,255),new n(138,8,255)],k.illuminationColor_light=new n(252,232,215),k.illuminationColor_shadow=new n(47,30,64),k.color_burnt=new n(90,90,90),k.color_white=new n(255,255,255),k.color_whiteClear=new n(255,255,255,0),k.color_offWhite=new n(247,247,242),k.color_offWhiteClear=new n(247,247,242,0),k.color_errorRed=new n(255,71,86),k.color_errorRedClear=new n(255,71,86,0),k.color_lightningYellow=new n(255,182,8),k.cloudColor_clear=new n(220,239,225),k.cloudColor_storm=new n(37,53,68),k.color_kiwiBarOlive=new n(116,128,81),k.colorScheme_golden={highlightColor:new n(255,212,49),lighterColor:new n(251,181,8),darkerColor:new n(200,90,6),contrastColor:new n(115,50,21)},k.colorScheme_stone={highlightColor:new n(223,213,202),lighterColor:new n(203,189,178),darkerColor:new n(173,151,137),contrastColor:new n(121,94,76)},k.colorScheme_aqua={highlightColor:new n(191,224,255),lighterColor:new n(134,197,255),darkerColor:new n(33,141,239),contrastColor:new n(255,255,255)},k.colorScheme_aquaDark={highlightColor:new n(46,122,191),lighterColor:new n(14,91,161),darkerColor:new n(9,56,98),contrastColor:new n(5,22,45)},k.colorScheme_kursed={highlightColor:new n(253,118,197),lighterColor:new n(255,54,172),darkerColor:new n(186,0,109),contrastColor:new n(255,255,255)},k.colorScheme_kursedBright={highlightColor:new n(251,221,241),lighterColor:new n(255,187,227),darkerColor:new n(253,118,197),contrastColor:new n(253,118,197)},k.colorScheme_adRequestBlue={highlightColor:new n(0,222,255),lighterColor:new n(0,204,255),darkerColor:new n(3,154,213),contrastColor:new n(255,255,255)},k.colorScheme_confirmationGreen={highlightColor:new n(134,186,85),lighterColor:new n(121,160,84),darkerColor:new n(90,122,63),contrastColor:new n(249,249,242)},k.colorScheme_warningRed={highlightColor:new n(248,106,118),lighterColor:new n(220,85,96),darkerColor:new n(168,42,52),contrastColor:new n(41,8,0)},k.colorScheme_ivory={highlightColor:new n(252,232,215),lighterColor:new n(255,216,183),darkerColor:new n(241,186,40),contrastColor:new n(255,243,233)},k.currencyColorScheme_kiwi={frameColor:new n(55,33,27),backgroundColor:new n(111,89,77),counterFieldColor:new n(252,253,246)},k.currencyColorScheme_koin={frameColor:new n(42,8,0),backgroundColor:new n(107,62,55),counterFieldColor:new n(252,253,246)},k.currencyColorScheme_token={frameColor:new n(0,20,42),backgroundColor:new n(32,85,140),counterFieldColor:new n(250,250,243)},k.currencyColorScheme_freeBoost={frameColor:new n(55,33,27),backgroundColor:new n(255,255,255,127),counterFieldColor:new n(255,122,200)};e("ColorSchemes",function(e){return e[e.stone=0]="stone",e[e.golden=2]="golden",e[e.aqua=5]="aqua",e[e.aquaDark=6]="aquaDark",e[e.warningRed=7]="warningRed",e[e.kursed=8]="kursed",e[e.kursedBright=9]="kursedBright",e[e.adRequestBlue=10]="adRequestBlue",e[e.confirmationGreen=11]="confirmationGreen",e}({}));r._RF.pop()}}}));

System.register("chunks:///_virtual/GameSession.ts",["cc","./GameManager.ts"],(function(n){var e,t,i;return{setters:[function(n){e=n.cclegacy,t=n._decorator},function(n){i=n.GameManager}],execute:function(){var r;e._RF.push({},"0f444Koc2pIUZ7k2rbjQ7Qf","GameSession",void 0);var c=t.ccclass;t.property,n("GameSession",c("GameSession")(r=function(){function n(){}return n.getCurrencyAmount=function(n){return i.instance.getCurrencyAmountFromType(n)},n.getCurrencyData=function(n){return i.instance.getCurrencyDataFromType(n)},n.getAttribute=function(n){return i.instance.getAttributeFromType(n)},n.getBuildingData=function(n){return i.instance.getBuildingFromType(n)},n.getBoostForBuilding=function(n){return i.instance.getBoostFromBuildingType(n)},n.getAllSkillNodeData=function(){return i.instance.getAllSkillNodeData()},n.getSkillNodeData=function(n){return i.instance.getSkillNodeDataFromIdentifier(n)},n.getBoostManager=function(){return i.instance.demonBoostManager},n.getSekiwityMultiplier=function(){return i.instance.sekiwityClickMultiplierBonus},n.getScreenHeight=function(){return i.instance.screenHeight},n.getScreenWidth=function(){return i.instance.screenWidth},n.tryChargeCurrency=function(n,e){return i.instance.tryChargeCurrency(n,e)},n.groundsKiwiClickedCallback=function(n,e){i.instance.doGroundsKiwiClick(n,e)},n.sekiwityClickedCallback=function(){i.instance.doSekiwityClick()},n.tryPurchaseBuildingUpgrade=function(n,e){return i.instance.tryPurchaseUpgradeCountForBuilding(n,e)},n.requestBoostForBuilding=function(n){i.instance.requestActivateBoostForBuilding(n)},n}())||r);e._RF.pop()}}}));

System.register("chunks:///_virtual/GroundsEntity_Guard.ts",["./rollupPluginModLoBabelHelpers.js","cc","./DeliveryGroundsEntity.ts","./DeliveryLineSimulation.ts"],(function(t){var i,e,n,r,o,s,u;return{setters:[function(t){i=t.inheritsLoose,e=t.createClass},function(t){n=t.cclegacy,r=t._decorator},function(t){o=t.DeliveryGroundsEntity},function(t){s=t.GroundsEntityType,u=t.KiwiSize}],execute:function(){var a;n._RF.push({},"e74e9r1TpZBPpnujdPXSpi5","GroundsEntity_Guard",void 0);var d=r.ccclass;r.property,t("GroundsEntity_Guard",d("GroundsEntity_Guard")(a=function(t){function n(){return t.apply(this,arguments)||this}i(n,t);var r=n.prototype;return r.onStateEnter_entering=function(t){this.resetClicks(1),this.currentProgressPoint=1.1;var i=-this.deliverySimulation.kingsGuard_spacingOffset*(this.deliverySimulation.kingsGuard_maxCount-1-this.kiwiIdentifier),e=this.deliverySimulation.deliveryGrounds_progressPointEnd+i/this.deliverySimulation.deliveryLineCoordinateWidth;this.startMoveToTargetProgress(e,this.deliverySimulation.kingsGuard_marchDuration),this._stateEndTime=this.lastSimulationTime+this.moveDuration},r.onMoveComplete=function(){},e(n,[{key:"entityType",get:function(){return s.guard}},{key:"entitySize",get:function(){return u.normal}}]),n}(o))||a);n._RF.pop()}}}));

System.register("chunks:///_virtual/GroundsEntity_King.ts",["./rollupPluginModLoBabelHelpers.js","cc","./DeliveryGroundsEntity.ts","./DeliveryLineSimulation.ts","./GameManager.ts","./StaticDataStructures.ts","./GameSession.ts"],(function(t){var i,e,n,r,s,o,a,u,l,c,h,v;return{setters:[function(t){i=t.inheritsLoose,e=t.createClass},function(t){n=t.cclegacy,r=t._decorator,s=t.math},function(t){o=t.DeliveryGroundsEntity},function(t){a=t.GroundsEntityState,u=t.GroundsEntityType,l=t.KiwiSize},function(t){c=t.GameManager},function(t){h=t.WhatAttribute},function(t){v=t.GameSession}],execute:function(){var g;n._RF.push({},"62fd7y6tP9B9K5nmXweI7M6","GroundsEntity_King",void 0);var d=r.ccclass;r.property,t("GroundsEntity_King",d("GroundsEntity_King")(g=function(t){function n(i,e){var n;return(n=t.call(this,i,e)||this).kingClickAttribute=void 0,n.kingLevelAttribute=void 0,n.waitTimer=0,n.kingClickAttribute=v.getAttribute(h.king_clickPoints),n.kingLevelAttribute=v.getAttribute(h.king_currentLevel),n}i(n,t);var r=n.prototype;return r.onStateEnter_entering=function(){this.deliverySimulation.addActiveKing(),this.currentProgressPoint=1.1,this.startMoveToTargetProgress(this.deliveryGroundsCenterProgress,this.deliverySimulation.kingKiwi_entranceMoveDuration),this._stateEndTime=this.lastSimulationTime+this.moveDuration,this._entityKnockoutStrength=this.kingClickAttribute.currentValue,this.resetClicks(this.kingClickAttribute.currentValue)},r.onStateEnter_active=function(t){this.generateNewMovement()},r.onStateEnter_leaving=function(){this.waitTimer*=.5,this.startMoveToTargetProgress(this.moveEndProgressPoint=1.1,this.deliverySimulation.kingKiwi_leaveMoveDuration),this._stateEndTime=this.lastSimulationTime+this.moveDuration+this.waitTimer},r.onStateEnter_knockedOut=function(i){t.prototype.onStateEnter_knockedOut.call(this,i),c.instance.requestKingSpecialIncome(this.kiwiIdentifier)},r.onStateEnter_pooled=function(t){this.deliverySimulation.removeActiveKing(),t!=a.knockedOut&&c.instance.requestKingSpecialIncome(this.kiwiIdentifier)},r.receiveClick=function(){if(this.entityState>2||this.remainingClicks<=0)return null;this.entityState<2&&c.instance.requestResetKingVisitTimer(),this._clicksReceived++,c.instance.requestKingClickIncome(this.kiwiIdentifier,this.clicksReceived),this.remainingClicks>0||this.setEntityState(a.knockedOut,this.lastSimulationTime)},r.requestLeave=function(){this.setEntityState(a.leaving,this.lastSimulationTime)},r.moveEntity=function(i){this.waitTimer>0?this.waitTimer-=i:t.prototype.moveEntity.call(this,i)},r.onMoveComplete=function(){this.entityState!=a.leaving&&(this.entityState!=a.entering?this.generateNewMovement():this.setEntityState(a.active,this.lastSimulationTime))},r.generateNewMovement=function(){this.waitTimer=s.randomRange(this.deliverySimulation.kingKiwi_waitDurationMin,this.deliverySimulation.kingKiwi_waitDurationMax),this.moveTimer=0;var t=this.deliverySimulation.deliveryGrounds_progressPointStart,i=this.deliverySimulation.deliveryGrounds_progressPointEnd,e=this.deliverySimulation.deliveryLineCoordinateWidth,n=this.currentProgressPoint<s.randomRange(t,i),r=this.deliverySimulation.kingKiwi_averageUnitsPerSecond,o=s.randomRange(this.deliverySimulation.kingKiwi_randomMove_durationMin,this.deliverySimulation.kingKiwi_randomMove_durationMax)*r,a=o/e*(n?1:-1);this.moveEndProgressPoint=s.clamp(this.currentProgressPoint+a,t,i),this.moveStartProgressPoint=this.currentProgressPoint,o=Math.abs(this.moveEndProgressPoint-this.moveStartProgressPoint)*e,this.moveDuration=o/r},e(n,[{key:"entityType",get:function(){return u.king}},{key:"entitySize",get:function(){return l.king}},{key:"deliveryGroundsCenterProgress",get:function(){return(this.deliverySimulation.deliveryGrounds_progressPointStart+this.deliverySimulation.deliveryGrounds_progressPointEnd)/2}}]),n}(o))||g);n._RF.pop()}}}));

System.register("chunks:///_virtual/Hoarder.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var i,r,t,n,o,a,s,c;return{setters:[function(e){i=e.applyDecoratedDescriptor,r=e.inheritsLoose,t=e.initializerDefineProperty,n=e.assertThisInitialized},function(e){o=e.cclegacy,a=e._decorator,s=e.SpriteFrame,c=e.Component}],execute:function(){var p,l,u,h,f;o._RF.push({},"0b9507PU+5GQI3qz43exadG","Hoarder",void 0);var d=a.ccclass,S=a.property;e("Hoarder",(p=d("Hoarder"),l=S({type:s}),p((f=i((h=function(e){function i(){for(var i,r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return i=e.call.apply(e,[this].concat(o))||this,t(i,"iconSprites",f,n(i)),i.iconSpriteMap=new Map,i}r(i,e);var o=i.prototype;return o.initialize=function(){for(var e=0;e<this.iconSprites.length;e++)this.iconSpriteMap.set(this.iconSprites[e].name,this.iconSprites[e])},o.getSpriteFromIdentifier=function(e){return this.iconSpriteMap.has(e)?this.iconSpriteMap.get(e):(console.log("missing sprite requested with identifier "+e),null)},i}(c)).prototype,"iconSprites",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),u=h))||u));o._RF.pop()}}}));

System.register("chunks:///_virtual/InitializableInterfaceComponent.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var n,t,i,o;return{setters:[function(e){n=e.inheritsLoose},function(e){t=e.cclegacy,i=e._decorator,o=e.Component}],execute:function(){var r;t._RF.push({},"3c4e9zExfBPg670mqUfQmuB","InitializableInterfaceComponent",void 0);var c=i.ccclass;i.property,e("InitializableInterfaceComponent",c("InitializableInterfaceComponent")(r=function(e){function t(){return e.apply(this,arguments)||this}return n(t,e),t}(o))||r);t._RF.pop()}}}));

System.register("chunks:///_virtual/InterfaceManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BuildingUpgradeButton.ts","./Hoarder.ts","./GameManager.ts","./CurrencyCounterController.ts","./BuildingUpgradeWindowController.ts","./KiwiInterfaceComponent.ts","./BigKiwiController.ts","./KiwiHoardFillBar.ts","./StaticDataStructures.ts","./KingSummonRingController.ts","./SekiwityClickMultiplierCounter.ts","./SkillTreeScreenController.ts","./DemonKiwiViewController.ts","./FloatingNumberComponent.ts","./VolumeController.ts","./KiwiButtonController.ts","./KiwiText.ts","./KiwiGunController.ts","./PointerInputHandler.ts","./ClickOrTapField.ts"],(function(e){var t,n,i,r,o,l,a,u,c,s,p,d,f,h,g,C,y,b,m,w,B,k,v,P,T,S,z,A,H,I,K,F,O,W,M,L,N,_;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,i=e.initializerDefineProperty,r=e.assertThisInitialized,o=e.createClass},function(e){l=e.cclegacy,a=e._decorator,u=e.UITransform,c=e.Prefab,s=e.Node,p=e.KeyCode,d=e.instantiate,f=e.math,h=e.Component},function(e){g=e.BuildingUpgradeButton},function(e){C=e.Hoarder},function(e){y=e.OnButtonPress_countAsKeyPress,b=e.GameManager},function(e){m=e.CurrencyCounterController},function(e){w=e.BuildingUpgradeWindowController},function(e){B=e.KiwiInterfaceComponent},function(e){k=e.BigKiwiController},function(e){v=e.KiwiHoardFillBar},function(e){P=e.BuildingType,T=e.CurrencyType},function(e){S=e.KingSummonRingController},function(e){z=e.SekiwityClickMultiplierCounter},function(e){A=e.SkillTreeScreenController},function(e){H=e.DemonKiwiViewController},function(e){I=e.FloatingNumberComponent},function(e){K=e.VolumeController},function(e){F=e.KiwiButtonController,O=e.KiwiButtonPressAction},function(e){W=e.KiwiText},function(e){M=e.KiwiGunController},function(e){L=e.PointerInputHandler,N=e.PointerEventTypes},function(e){_=e.ClickOrTapField}],execute:function(){var R,U,D,G,q,x,E,j,V,Y,J,Q,X,Z,$,ee,te,ne,ie,re,oe,le,ae,ue,ce,se,pe,de,fe,he,ge,Ce,ye,be,me,we,Be,ke,ve,Pe,Te,Se,ze,Ae,He,Ie,Ke,Fe,Oe,We,Me,Le,Ne,_e,Re,Ue,De,Ge,qe;l._RF.push({},"6bc0bLs7ghMy5tw3aLY59o0","InterfaceManager",void 0);var xe=a.ccclass,Ee=a.property,je=(e("InterfaceManager",(R=xe("InterfaceManager"),U=Ee({type:u}),D=Ee({type:C}),G=Ee({type:_}),q=Ee({type:g}),x=Ee({type:m}),E=Ee({type:m}),j=Ee({type:v}),V=Ee({type:c}),Y=Ee({type:s}),J=Ee({type:w}),Q=Ee({type:A}),X=Ee({type:K}),Z=Ee({type:k}),$=Ee({type:S}),ee=Ee({type:H}),te=Ee({type:M}),ne=Ee({type:z}),ie=Ee({type:s}),re=Ee({type:s}),oe=Ee({type:F}),le=Ee({type:F}),ae=Ee({type:F}),ue=Ee({type:F}),ce=Ee({type:W}),se=Ee({type:s}),pe=Ee({type:s}),de=Ee({type:s}),fe=Ee({type:B}),R((Ce=t((ge=function(e){function t(){for(var t,n=arguments.length,o=new Array(n),l=0;l<n;l++)o[l]=arguments[l];return t=e.call.apply(e,[this].concat(o))||this,i(t,"canvasRootTransform",Ce,r(t)),i(t,"dataHoarder",ye,r(t)),i(t,"clickOrTapFieldToggles",be,r(t)),i(t,"buildingLevelButtons",me,r(t)),t.buildingTypeBuildingLevelButtonMap=new Map,t._lockedButtons=[],t._unlockedButtons=[],i(t,"currencyCounters",we,r(t)),i(t,"secondaryTokenCounter",Be,r(t)),t.currencyTypeCounterMap=new Map,i(t,"kiwiHoardBar",ke,r(t)),i(t,"floatingTextPrefab",ve,r(t)),i(t,"floatingTextContainer",Pe,r(t)),i(t,"upgradeWindowController",Te,r(t)),i(t,"skilltreeScreenController",Se,r(t)),i(t,"volumeController",ze,r(t)),i(t,"bigKiwiController",Ae,r(t)),i(t,"kingRingController",He,r(t)),i(t,"demonKiwiController",Ie,r(t)),i(t,"kiwiGunController",Ke,r(t)),i(t,"sekiwityMultiplierCounter",Fe,r(t)),i(t,"darkenerNode",Oe,r(t)),i(t,"helpContents",We,r(t)),i(t,"openHelpButton",Me,r(t)),i(t,"closeHelpButton",Le,r(t)),i(t,"adBreakAcceptButton",Ne,r(t)),i(t,"adBreakRefuseButton",_e,r(t)),i(t,"adBreakOfferDescriptionField",Re,r(t)),i(t,"adConfirmationContainer",Ue,r(t)),i(t,"adProcessingContainer",De,r(t)),i(t,"cheatInstructionPanel",Ge,r(t)),i(t,"frameInfoPanelController",qe,r(t)),t.inputHandler=new L,t.gameplayStarted=!1,t.floatingNumberPool=[],t.clickHorizontalOffset=0,t.liveUpdateableInterfaceComponents=[],t._animationTime=0,t.interfaceAnimators=[],t}n(t,e);var l=t.prototype;return l.getLevelButtonForBuilding=function(e){return this.buildingTypeBuildingLevelButtonMap.get(e)},l.toggleCheatPanel=function(){this.cheatInstructionPanel.active=!this.cheatInstructionPanel.active},l.setCheatPanelVisibility=function(e){this.cheatInstructionPanel.active=e},l.requestForcedDemonOffer=function(){this.demonKiwiController.forceDemonOffer()},l.toggleFramePanel=function(){this.frameInfoPanelController.node.active=!this.frameInfoPanelController.node.active},l.initializeInterface=function(){for(var e=0;e<this.buildingLevelButtons.length;e++)this.buildingLevelButtons[e].initialize(this),this.buildingTypeBuildingLevelButtonMap.set(this.buildingLevelButtons[e].buildingType,this.buildingLevelButtons[e]);this.kiwiHoardBar.initialize(this),this.liveUpdateableInterfaceComponents.push(this.kiwiHoardBar);for(var t=0;t<this.currencyCounters.length;t++)this.currencyCounters[t].initialize(this),this.currencyTypeCounterMap.set(this.currencyCounters[t].counterCurrencyType,this.currencyCounters[t]);this.upgradeWindowController.initialize(this),this.skilltreeScreenController.initialize(this),this.volumeController.initialize(this),this.openHelpButton.addPrimaryPointerAction(new Ye(this)),this.closeHelpButton.addPrimaryPointerAction(new Je(this)),this.bigKiwiController.initialize(this),this.kingRingController.initialize(this),this.sekiwityMultiplierCounter.initialize(this),this.demonKiwiController.initialize(this),this.kiwiGunController.initialize(this),this.openHelpButton.initialize(this),this.closeHelpButton.initialize(this),this.adBreakAcceptButton.initialize(this),this.adBreakAcceptButton.addPrimaryPointerAction(new Qe(this)),this.adBreakRefuseButton.initialize(this),this.adBreakRefuseButton.addPrimaryPointerAction(new Xe(this)),this.inputHandler.registerNodeForPointerEvents(this.canvasRootTransform.node,!0),this.inputHandler.addActionToInput(N.Mouse_down,new Ve(this),!0),this.inputHandler.addActionToInput(N.Touch_start,new je(this),!0),this.buildingTypeBuildingLevelButtonMap.get(P.bigKiwi).levelButtonController.addPrimaryPointerAction(new y(b.instance,p.BRACKET_LEFT)),this.buildingTypeBuildingLevelButtonMap.get(P.autoKiwiker).levelButtonController.addPrimaryPointerAction(new y(b.instance,p.BRACKET_RIGHT)),this.frameInfoPanelController.initialize(this)},l.requestAdBreakConfirmationScreen=function(e){this.isHelpScreenOpen&&this.closeHelpScreen(),this.adBreakOfferDescriptionField.text=e,this.darkenerNode.active=!0,this.adConfirmationContainer.active=!0},l.adBreakAcceptedCallback=function(){this.showAdProcessingScreen(),b.instance.requestDemonBoostAdBreak()},l.showAdProcessingScreen=function(){this.darkenerNode.active=!0,this.adConfirmationContainer.active=!1,this.adProcessingContainer.active=!0},l.closeAdBreakScreens=function(){this.darkenerNode.active=!1,this.adConfirmationContainer.active=!1,this.adProcessingContainer.active=!1},l.anythingClickedCallback=function(e){this.checkGameplayStarted(),this.clickOrTapFieldToggles.forEach((function(e){e.showClickString()})),2==e.getButton()?this.closeActiveWindows():this.upgradeWindowController.node.active&&this.upgradeWindowController.flagPlayerClick()},l.anythingTappedCallback=function(e){this.checkGameplayStarted(),this.clickOrTapFieldToggles.forEach((function(e){e.showTapString()})),this.upgradeWindowController.node.active&&this.upgradeWindowController.flagPlayerClick()},l.onMouseDown=function(e){this.checkGameplayStarted(),2==e.getButton()?this.closeActiveWindows():this.upgradeWindowController.node.active&&this.upgradeWindowController.flagPlayerClick()},l.onTouchStart=function(e){this.checkGameplayStarted(),this.upgradeWindowController.flagPlayerClick()},l.flagUpgradeWindowClick=function(){this.upgradeWindowController.flagWindowClick()},l.checkGameplayStarted=function(){this.gameplayStarted||(b.instance.genericPlayerInteractionCallback(),this.gameplayStarted=!0)},l.closeActiveWindows=function(){this.closeBuildingUpgradeWindow(),this.closeSkilltree()},l.requestFloatingNumberForCurrency=function(e,t,n){this.getFloatingNumberComponent().doFloatingNumberAtPosition(e,t,n)},l.returnFloatingNumberToPool=function(e){this.floatingNumberPool.push(e)},l.getFloatingNumberComponent=function(){if(this.floatingNumberPool.length>0)return this.floatingNumberPool.pop();var e=d(this.floatingTextPrefab).getComponent(I);return e.initialize(this),e.node.setParent(this.floatingTextContainer),e},l.setCurrencyCounterHiddenState=function(e,t){var n;n=e!=T.token?this.currencyTypeCounterMap.get(e):this.secondaryTokenCounter,t?n.hideCounter():n.unhideCounter()},l.chargeCurrencyByAmountCallback=function(e,t){var n=this.currencyTypeCounterMap.get(t).node.getWorldPosition().add3f(0,40,0);this.requestFloatingNumberForCurrency(n,-e,t)},l.notEnoughCurrencyCallback=function(e){this.currencyTypeCounterMap.get(e).doWarningFlash()},l.setBuildingLevelButtonHiddenState=function(e,t){var n=this.buildingTypeBuildingLevelButtonMap.get(e);t?n.hideButton():n.unhideButton()},l.buildingLevelButtonPressedCallback=function(e){this.upgradeWindowController.requestWindowForBuildingType(e)},l.requestOpenBuildingUpgradeWindow=function(e){return this.upgradeWindowController.windowContainer.active=!0,this.upgradeWindowController.openWindowForButton(this.buildingTypeBuildingLevelButtonMap.get(e)),!0},l.buildingUpgradeWindowClosedCallback=function(){},l.closeBuildingUpgradeWindow=function(){this.upgradeWindowController.closeWindow()},l.requestOpenSkilltreeScreen=function(){this.closeBuildingUpgradeWindow(),this.skilltreeScreenController.windowContainerTransform.node.active=!0},l.closeSkilltree=function(){this.skilltreeScreenController.closeScreen()},l.skilltreeClosedCallback=function(){this.isHelpScreenOpen||(b.instance.requestCommercialBreak(),b.instance.tryStartGameplay())},l.getBigKiwiClickPosition=function(){var e=this.bigKiwiController.bigKiwiSprite.node.getWorldPosition();return this.clickHorizontalOffset+=30,e.y+=150,e.x+=-110+f.pingPong(this.clickHorizontalOffset,220),e},l.bigKiwiClickedCallback=function(){b.instance.doBigKiwiClick()},l.requestBigKiwiBounce=function(e){this.bigKiwiController.doBigKiwiBounce(e)},l.openHelpScreen=function(){this.darkenerNode.active=!0,this.helpContents.active=!0,b.instance.tryStopGameplay()},l.closeHelpScreen=function(){this.darkenerNode.active=!1,this.helpContents.active=!1,this.skilltreeIsOpen||(b.instance.requestCommercialBreak(),b.instance.tryStartGameplay())},l.getSpriteFrameFromIdentifier=function(e){return this.dataHoarder.getSpriteFromIdentifier("icon_"+e)},l.updateLiveDataElements=function(){for(var e=0;e<this.liveUpdateableInterfaceComponents.length;e++)this.liveUpdateableInterfaceComponents[e].checkUpdateFlags(),this.liveUpdateableInterfaceComponents[e].updateIfFlagged()},l.registerLiveDataElement=function(e){this.liveUpdateableInterfaceComponents.push(e)},l.updateInterfaceAnimators=function(e){this._animationTime+=e,this.interfaceAnimators.filter((function(e){}));for(var t=0;t<this.interfaceAnimators.length;t++)this.interfaceAnimators[t].node.activeInHierarchy&&this.interfaceAnimators[t].updateAnimator(this.animationTime);this.inputHandler.processLastInput()},l.registerInterfaceAnimator=function(e){this.interfaceAnimators.push(e)},o(t,[{key:"skilltreeIsOpen",get:function(){return this.skilltreeScreenController.windowContainerTransform.node.activeInHierarchy}},{key:"isHelpScreenOpen",get:function(){return this.helpContents.activeInHierarchy}},{key:"animationTime",get:function(){return this._animationTime}}]),t}(h)).prototype,"canvasRootTransform",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ye=t(ge.prototype,"dataHoarder",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),be=t(ge.prototype,"clickOrTapFieldToggles",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),me=t(ge.prototype,"buildingLevelButtons",[q],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),we=t(ge.prototype,"currencyCounters",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Be=t(ge.prototype,"secondaryTokenCounter",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ke=t(ge.prototype,"kiwiHoardBar",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ve=t(ge.prototype,"floatingTextPrefab",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Pe=t(ge.prototype,"floatingTextContainer",[Y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Te=t(ge.prototype,"upgradeWindowController",[J],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Se=t(ge.prototype,"skilltreeScreenController",[Q],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ze=t(ge.prototype,"volumeController",[X],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ae=t(ge.prototype,"bigKiwiController",[Z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),He=t(ge.prototype,"kingRingController",[$],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ie=t(ge.prototype,"demonKiwiController",[ee],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ke=t(ge.prototype,"kiwiGunController",[te],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Fe=t(ge.prototype,"sekiwityMultiplierCounter",[ne],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Oe=t(ge.prototype,"darkenerNode",[ie],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),We=t(ge.prototype,"helpContents",[re],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Me=t(ge.prototype,"openHelpButton",[oe],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Le=t(ge.prototype,"closeHelpButton",[le],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ne=t(ge.prototype,"adBreakAcceptButton",[ae],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_e=t(ge.prototype,"adBreakRefuseButton",[ue],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Re=t(ge.prototype,"adBreakOfferDescriptionField",[ce],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ue=t(ge.prototype,"adConfirmationContainer",[se],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),De=t(ge.prototype,"adProcessingContainer",[pe],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ge=t(ge.prototype,"cheatInstructionPanel",[de],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),qe=t(ge.prototype,"frameInfoPanelController",[fe],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),he=ge))||he)),e("OnTouchStart_interfaceManager",function(e){function t(){return e.apply(this,arguments)||this}return n(t,e),t.prototype.doButtonPressAction=function(e){this.interactionObject.anythingTappedCallback(e)},t}(O))),Ve=e("OnMouseDown_interfaceManager",function(e){function t(){return e.apply(this,arguments)||this}return n(t,e),t.prototype.doButtonPressAction=function(e){this.interactionObject.anythingClickedCallback(e)},t}(O)),Ye=e("OnButtonPress_openHelp",function(e){function t(){return e.apply(this,arguments)||this}return n(t,e),t.prototype.doButtonPressAction=function(e){this.interactionObject.openHelpScreen()},t}(O)),Je=e("OnButtonPress_CloseHelp",function(e){function t(){return e.apply(this,arguments)||this}return n(t,e),t.prototype.doButtonPressAction=function(e){this.interactionObject.closeHelpScreen()},t}(O)),Qe=e("OnButtonPress_AcceptAdBreak",function(e){function t(){return e.apply(this,arguments)||this}return n(t,e),t.prototype.doButtonPressAction=function(e){this.interactionObject.adBreakAcceptedCallback()},t}(O)),Xe=e("OnButtonPress_RefuseAdBreak",function(e){function t(){return e.apply(this,arguments)||this}return n(t,e),t.prototype.doButtonPressAction=function(e){this.interactionObject.closeAdBreakScreens()},t}(O));l._RF.pop()}}}));

System.register("chunks:///_virtual/KingSummonRingController.ts",["./rollupPluginModLoBabelHelpers.js","cc","./KiwiInterfaceAnimator.ts","./StaticDataStructures.ts","./SimpleAnimator.ts","./TyrantUtils.ts","./GameSession.ts"],(function(e){var t,i,n,r,s,a,o,u,l,g,c,p,h,m;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,n=e.initializerDefineProperty,r=e.assertThisInitialized,s=e.createClass},function(e){a=e.cclegacy,o=e._decorator,u=e.Sprite},function(e){l=e.KiwiInterfaceAnimator},function(e){g=e.WhatAttribute},function(e){c=e.OnePerObjectAnimator,p=e.AnimateSpriteFillTo},function(e){h=e.EaseType},function(e){m=e.GameSession}],execute:function(){var y,f,A,P,R,v,k;a._RF.push({},"43b52h6+NZPF4fFW8FsYypI","KingSummonRingController",void 0);var b=o.ccclass,d=o.property;e("KingSummonRingController",(y=b("KingSummonRingController"),f=d({type:u}),A=d({type:u}),y((v=t((R=function(e){function t(){for(var t,i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return t=e.call.apply(e,[this].concat(s))||this,n(t,"summonProgressRing",v,r(t)),n(t,"kingRing",k,r(t)),t.animator=new c(1,!0),t.lastKingVisitProgress=-1,t.lastExperienceProgress=-1,t}i(t,e);var a=t.prototype;return a.initialize=function(t){e.prototype.initialize.call(this,t),t.registerLiveDataElement(this),this.liveDataArray.push(m.getAttribute(g.king_currentExperience)),this.liveDataArray.push(m.getAttribute(g.king_currentExperienceRequirement)),this.liveDataArray.push(m.getAttribute(g.king_kingVisitProgress))},a.onDataUpdate=function(){var e=this.kingProgress.currentValue;if(e!=this.lastKingVisitProgress){var t=this.lastKingVisitProgress-e;t>.4?this.animator.addAnimations([new p(this.kingRing,-e,1.2,[]).setEaseType(h.Out)]):t>.1?this.animator.addAnimations([new p(this.kingRing,-e,.15,[]).setEaseType(h.Out)]):this.kingRing.fillRange=-e,this.lastKingVisitProgress=this.kingProgress.currentValue}var i=this.experience.currentValue/this.experienceRequirement.currentValue;this.lastExperienceProgress!=i&&(this.animator.addAnimations([new p(this.summonProgressRing,-i,.15,[]).setEaseType(h.Out)]),this.lastExperienceProgress=i)},s(t,[{key:"experience",get:function(){return this.liveDataArray[0]}},{key:"experienceRequirement",get:function(){return this.liveDataArray[1]}},{key:"kingProgress",get:function(){return this.liveDataArray[2]}}]),t}(l)).prototype,"summonProgressRing",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=t(R.prototype,"kingRing",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=R))||P));a._RF.pop()}}}));

System.register("chunks:///_virtual/KiwiBodyAnimator.ts",["./rollupPluginModLoBabelHelpers.js","cc","./SimpleAnimator.ts","./TyrantUtils.ts","./GameParameters.ts"],(function(t){var i,o,e,r,n,a,s,l,d,c,h,u,p,f,y,m;return{setters:[function(t){i=t.applyDecoratedDescriptor,o=t.inheritsLoose,e=t.initializerDefineProperty,r=t.assertThisInitialized,n=t.createClass},function(t){a=t.cclegacy,s=t._decorator,l=t.Sprite,d=t.Color,c=t.math,h=t.Vec3,u=t.Component},function(t){p=t.SimpleAnimator},function(t){f=t.TyrantUtils},function(t){y=t.GameParameters,m=t.ColorFormatter}],execute:function(){var S,C,g,_,k,b,w;a._RF.push({},"a2f2cB6pa5NO7XFc3FUf++h","KiwiBodyAnimator",void 0);var v=s.ccclass,B=s.property;t("KiwiBodyAnimator",(S=v("KiwiBodyAnimator"),C=B({type:l}),g=B({type:l}),S((b=i((k=function(t){function i(){for(var i,o=arguments.length,n=new Array(o),a=0;a<o;a++)n[a]=arguments[a];return i=t.call.apply(t,[this].concat(n))||this,e(i,"bodySprite",b,r(i)),e(i,"trackedSprites",w,r(i)),i.originalTrackedSpritePositions=[],i._animator=new p(1,!0),i._kiwiNumber=void 0,i._bodyVerticalOffset=void 0,i.flaggedForColorUpdate=!1,i._currentColorIndex=-1,i._currentBodyColor=void 0,i._lastDeltaTime=0,i.lastHorizontalPosition=0,i.totalHorizontalDelta=0,i.horizontalUnitsForOneSecond=40,i.waddleInterval=1.5,i.waddleMinScale=.9,i.waddleMaxScale=1,i.defaultHorizontalScale=1,i._waddleScale=1,i._waddleTimer=0,i.bodyVerticalScale=void 0,i._additionalColor=new d(255,255,255),i}o(i,t);var a=i.prototype;return a.initialize=function(t){this._kiwiNumber=t,this.node.name=this.kiwiIdentifier+"_"+this.kiwiNumber,this._bodyVerticalOffset=-this.bodySprite.node.getPosition().y,this.setBodyColorByIndex(this.defaultBodyColorIndex),this.initializedTrackedSpritePositions(),this.onInitialize(t)},a.deactivate=function(){this.node.active=!1},a.reset=function(){this.node.setScale(1,1,1),this.node.setRotationFromEuler(0,0,0),this.resetSpriteColorsToDefault(),this.clearAnimations()},a.reActivate=function(){this.node.active=!0},a.clearAnimations=function(){this.animator.discardAllAnimations()},a.setPosition=function(t){this.node.setPosition(t.x,t.y+this.bodyVerticalOffset,t.z)},a.doKnockoutAnimation=function(t){var i=-this.node.getScale().x,o=t;this.node.setRotationFromEuler(0,0,c.randomRange(17,25));var e=y.getKnockoutAnimationBlock(this.node,i,o);this.animator.addAnimationBlock(e)},a.discardAllAnimations=function(){this.animator.discardAllAnimations()},a.addAnimations=function(t){this.animator.addAnimations(t)},a.updateAnimations=function(t){this._lastDeltaTime=t,this.flaggedForColorUpdate&&this.updateSpriteColorsExceptBeak(),this.node.activeInHierarchy&&(this.animator.updateAnimations(t),this.updateHorizontalDelta(this.node.getPosition().x),this.updateWaddling(),this.updateTrackedSpritePositions())},a.updateHorizontalDelta=function(t){this.totalHorizontalDelta+=Math.abs(t-this.lastHorizontalPosition),this.lastHorizontalPosition=t},a.updateWaddling=function(){this._waddleTimer+=this._lastDeltaTime;var t=f.easeInOut(c.pingPong(this._waddleTimer+this.totalHorizontalDelta/this.horizontalUnitsForOneSecond,this.waddleInterval)/this.waddleInterval);this._waddleScale=c.lerp(this.waddleMinScale,this.waddleMaxScale,t),this.bodySprite.node.setScale(this.defaultHorizontalScale,this._waddleScale,1)},a.initializedTrackedSpritePositions=function(){for(var t=0;t<this.trackedSprites.length;t++)this.originalTrackedSpritePositions.push(this.trackedSprites[t].node.getPosition())},a.updateTrackedSpritePositions=function(){this.bodyVerticalScale=this.bodySprite.node.scale.y;for(var t=0;t<this.trackedSprites.length;t++){var i=this.originalTrackedSpritePositions[t],o=new h(i.x,i.y-1.5*(1-this.bodyVerticalScale)*this.bodyVerticalOffset,i.z);this.trackedSprites[t].node.setPosition(o)}},a.setBodyColor=function(t){this._currentColorIndex=-1,this._currentBodyColor=t,this.flaggedForColorUpdate=!0},a.setBodyColorByIndex=function(t){this.currentColorIndex!=t&&(this._currentColorIndex=t,this._currentBodyColor=m.kiwiColors[this.currentColorIndex],this.flaggedForColorUpdate=!0)},a.resetSpriteColorsToDefault=function(){this._additionalColor.set(255,255,255),this.setBodyColorByIndex(this.defaultBodyColorIndex)},a.setSpriteColors=function(t){t.r==this._additionalColor.r&&t.g==this._additionalColor.g&&t.b==this._additionalColor.b||(this._additionalColor=t,this.flaggedForColorUpdate=!0)},a.updateSpriteColorsExceptBeak=function(){this.bodySprite.color=f.multiplyColors(this.currentBodyColor,this._additionalColor);for(var t=1;t<this.trackedSprites.length;t++)this.trackedSprites[t].color=this._additionalColor;this.flaggedForColorUpdate=!1},n(i,[{key:"beakSprite",get:function(){return this.trackedSprites[0]}},{key:"animator",get:function(){return this._animator}},{key:"kiwiNumber",get:function(){return this._kiwiNumber}},{key:"bodyVerticalOffset",get:function(){return this._bodyVerticalOffset}},{key:"currentColorIndex",get:function(){return this._currentColorIndex}},{key:"currentBodyColor",get:function(){return this._currentBodyColor}}]),i}(u)).prototype,"bodySprite",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=i(k.prototype,"trackedSprites",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),_=k))||_));a._RF.pop()}}}));

System.register("chunks:///_virtual/KiwiButtonController.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ToggleableColorScheme.ts","./KiwiInterfaceAnimator.ts","./SimpleAnimator.ts","./KiwiText.ts","./AudioController.ts","./PointerInputHandler.ts"],(function(t){var i,n,o,e,s,r,u,a,l,c,h,p,d,b,f,y,v;return{setters:[function(t){i=t.applyDecoratedDescriptor,n=t.createClass,o=t.inheritsLoose,e=t.initializerDefineProperty,s=t.assertThisInitialized},function(t){r=t.cclegacy,u=t._decorator,a=t.Button,l=t.Node,c=t.Vec3},function(t){h=t.ToggleableColorScheme},function(t){p=t.KiwiInterfaceAnimator},function(t){d=t.AnimateMovement},function(t){b=t.KiwiText},function(t){f=t.AudioController},function(t){y=t.PointerInputHandler,v=t.PointerEventTypes}],execute:function(){var P,w,_,m,T,A,g,B,I,C,H,D,S;r._RF.push({},"c46b33jEplPh7g/Wvcn2Y6T","KiwiButtonController",void 0);var k=u.ccclass,O=u.property,x=(t("KiwiButtonController",(P=k("KiwiButtonController"),w=O({type:h}),_=O({type:a}),m=O({type:l}),T=O({type:b}),P((B=i((g=function(t){function i(){for(var i,n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return i=t.call.apply(t,[this].concat(o))||this,e(i,"toggleableColor",B,s(i)),e(i,"buttonComponent",I,s(i)),e(i,"buttonTopNode",C,s(i)),e(i,"buttonKiwiTextField",H,s(i)),e(i,"buttonTopHoverDelta",D,s(i)),e(i,"startsInteractible",S,s(i)),i.buttonSunkPosition=void 0,i.buttonDefaultPosition=void 0,i.buttonRaisedPosition=void 0,i.inputHandler=new y,i._isVisuallyActive=!0,i._isVisuallyInteractable=!0,i._canBeInteractedWith=!0,i._eventsActive=!1,i}o(i,t);var r=i.prototype;return r.initialize=function(i){t.prototype.initialize.call(this,i),this.buttonDefaultPosition=this.buttonTopNode.getPosition(),this.buttonRaisedPosition=new c(this.buttonDefaultPosition.x,this.buttonDefaultPosition.y+this.buttonTopHoverDelta,this.buttonDefaultPosition.z),this.buttonSunkPosition=new c(this.buttonDefaultPosition.x,this.buttonDefaultPosition.y-this.buttonTopHoverDelta,this.buttonDefaultPosition.z),this.setCanBeInteractedWith(this.startsInteractible,!0),this.inputHandler.addActionToInput(v.Touch_start,new j(this),!0),this.inputHandler.addActionToInput(v.Mouse_down,new K(this)),this.inputHandler.addActionToInput(v.Mouse_up,new M(this),!0),this.inputHandler.addActionToInput(v.Mouse_enter,new V(this)),this.inputHandler.addActionToInput(v.Mouse_exit,new z(this))},r.onDataUpdate=function(){},r.lateUpdate=function(){this.inputHandler.processLastInput()},r.addPrimaryPointerAction=function(t){this.inputHandler.addPrimaryPointerAction(t)},r.addActionToInput=function(t,i,n){this.inputHandler.addActionToInput(t,i,n)},r.onHoverEnter=function(){this.animateToRaisedPosition(.15)},r.onHoverExit=function(){this.animateToLoweredPosition(.15)},r.onMouseDown=function(t){this.buttonTopNode.setPosition(this.buttonDefaultPosition)},r.onMouseUp=function(){this.animateToRaisedPosition(.05),f.instance.playOneShot("clickSound")},r.onTouchStart=function(){f.instance.playOneShot("clickSound")},r.reset=function(){this.animator.addAnimationBlock([]),this.buttonTopNode.setPosition(this.buttonDefaultPosition)},r.animateToLoweredPosition=function(t){this._isVisuallyInteractable&&this.animator.addAnimationBlock([new d(this.buttonTopNode,this.buttonDefaultPosition,t,[])])},r.animateToRaisedPosition=function(t){this._isVisuallyInteractable&&this.animator.addAnimationBlock([new d(this.buttonTopNode,this.buttonRaisedPosition,t,[])])},r.setButtonVisuals_activeColorScheme=function(t,i){(i||this._isVisuallyActive!=t)&&(this.toggleableColor.setSchemeToggle(t),this._isVisuallyActive=t)},r.setButtonVisuals_interactableState=function(t,i){(i||this._isVisuallyInteractable!=t)&&(this.animator.addAnimationBlock([]),this.buttonTopNode.setPosition(t?this.buttonDefaultPosition:this.buttonSunkPosition),this._isVisuallyInteractable=t)},r.setCanBeInteractedWith=function(t,i){(i||this._canBeInteractedWith!==t)&&(this.setButtonVisuals_activeColorScheme(t,i),this.setButtonVisuals_interactableState(t,i),this.buttonComponent.enabled=t,1!=this._eventsActive&&1==t?(this.inputHandler.registerNodeForPointerEvents(this.node),this._eventsActive=!0):1==this._eventsActive&&0==t&&(this.inputHandler.deregisterNodeForPointerEvents(this.node),this._eventsActive=!1),this._canBeInteractedWith=t)},r.setButtonColorScheme_visuallyActive=function(t){this.toggleableColor.setColorScheme_isOn(t)},r.setButtonColorScheme_visuallyInactive=function(t){this.toggleableColor.setColorScheme_isOff(t)},n(i,[{key:"kiwiText",get:function(){return this.buttonKiwiTextField}}]),i}(p)).prototype,"toggleableColor",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=i(g.prototype,"buttonComponent",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=i(g.prototype,"buttonTopNode",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),H=i(g.prototype,"buttonKiwiTextField",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=i(g.prototype,"buttonTopHoverDelta",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 6}}),S=i(g.prototype,"startsInteractible",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),A=g))||A)),t("KiwiButtonPressAction",function(){function t(t){this._interactionObject=void 0,this._interactionObject=t}return n(t,[{key:"interactionObject",get:function(){return this._interactionObject}}]),t}())),V=t("OnHoverEnter_kiwiButton",function(t){function i(){return t.apply(this,arguments)||this}return o(i,t),i.prototype.doButtonPressAction=function(t){this.interactionObject.onHoverEnter()},i}(x)),z=t("OnHoverExit_kiwiButton",function(t){function i(){return t.apply(this,arguments)||this}return o(i,t),i.prototype.doButtonPressAction=function(t){this.interactionObject.onHoverExit()},i}(x)),K=t("OnMouseDown_kiwiButton",function(t){function i(){return t.apply(this,arguments)||this}return o(i,t),i.prototype.doButtonPressAction=function(t){this.interactionObject.onMouseDown(t)},i}(x)),M=t("OnMouseUp_kiwiButton",function(t){function i(){return t.apply(this,arguments)||this}return o(i,t),i.prototype.doButtonPressAction=function(t){this.interactionObject.onMouseUp()},i}(x)),j=t("OnTouchStart_kiwiButton",function(t){function i(){return t.apply(this,arguments)||this}return o(i,t),i.prototype.doButtonPressAction=function(t){this.interactionObject.onTouchStart()},i}(x));r._RF.pop()}}}));

System.register("chunks:///_virtual/KiwiGunController.ts",["./rollupPluginModLoBabelHelpers.js","cc","./KiwiInterfaceAnimator.ts","./SimpleAnimator.ts","./TyrantUtils.ts","./GameSession.ts","./StaticDataStructures.ts","./GameParameters.ts","./KiwiText.ts","./AudioController.ts"],(function(t){var e,i,o,r,n,a,l,s,u,c,m,h,d,p,A,y,b,S,f,v,g,w,C,_,R,z,P,E;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,o=t.initializerDefineProperty,r=t.assertThisInitialized,n=t.createClass},function(t){a=t.cclegacy,l=t._decorator,s=t.Node,u=t.Sprite,c=t.ParticleSystem2D,m=t.Vec3,h=t.input,d=t.Input,p=t.math},function(t){A=t.KiwiInterfaceAnimator},function(t){y=t.OnePerObjectAnimator,b=t.AnimateScaleTo,S=t.AnimateColorFromTo,f=t.AnimateMovement,v=t.AnimateScaleFromTo,g=t.AnimateRelativeRotation,w=t.Animate},function(t){C=t.TyrantUtils},function(t){_=t.GameSession},function(t){R=t.WhatAttribute},function(t){z=t.ColorFormatter},function(t){P=t.KiwiText},function(t){E=t.AudioController}],execute:function(){var T,F,N,D,j,k,M,U,I,L,K,V,x,G,O,B,H,W,q;a._RF.push({},"89ab4TKLqNFKovs4UABBj3x","KiwiGunController",void 0);var Y=l.ccclass,J=l.property,Q=(t("KiwiGunController",(T=Y("KiwiGunController"),F=J({type:s}),N=J({type:s}),D=J({type:s}),j=J({type:s}),k=J({type:P}),M=J({type:u}),U=J({type:c}),I=J({type:c}),T((V=e((K=function(t){function e(){for(var e,i=arguments.length,n=new Array(i),a=0;a<i;a++)n[a]=arguments[a];return e=t.call.apply(t,[this].concat(n))||this,o(e,"shooterMoverNode",V,r(e)),o(e,"shooterRotatorNode",x,r(e)),o(e,"muzzleFlashNode",G,r(e)),o(e,"ammoCounterContainer",O,r(e)),o(e,"currentAmmoField",B,r(e)),o(e,"ammoCapacityScalerSprite",H,r(e)),o(e,"bulletEjectionParticleSystem",W,r(e)),o(e,"bulletCartridgeParticleSystem",q,r(e)),e.shooterHiddenRotation=-35,e.shooterPositions=[new m(3,85,0),new m(70,100,0)],e._lastAmmo=0,e._hasUnlocked=!1,e.animator=new y(1,!0),e._bulletEjectionEndTime=0,e.shooterActive=!1,e}i(e,t);var a=e.prototype;return a.initialize=function(e){t.prototype.initialize.call(this,e),e.registerLiveDataElement(this),this.liveDataArray.push(_.getAttribute(R.gun_ammoLimit)),this.liveDataArray.push(_.getAttribute(R.gun_reloadInterval)),this.liveDataArray.push(_.getAttribute(R.gun_currentAmmo)),h.on(d.EventType.MOUSE_MOVE,this.onMouseMove,this),this._lastAmmo=this.ammoAttribute.currentValue,this.bulletEjectionParticleSystem.resetSystem(),this.onDataUpdate()},a.onDataUpdate=function(){var t=this.ammoLimitAttribute.isUnlocked;if(this._hasUnlocked!=t&&(this._hasUnlocked=t,this.ammoCounterContainer.active=t),t){var e=this.ammoAttribute.currentValue;if(this.shooterActive!=e>0&&this.setShooterActiveState(e>0),this._lastAmmo!=e){if(0==e){E.instance.playOneShot("shooterReloadStart"),this.ammoCapacityScalerSprite.node.setScale(0,1,1),this.ammoCapacityScalerSprite.color=z.colorScheme_warningRed.lighterColor,this.currentAmmoField.color=z.colorScheme_stone.darkerColor;var i=this.reloadIntervalAttribute.defaultValue/this.reloadIntervalAttribute.additiveMultiplierTotal;this.animator.addAnimations([new b(this.ammoCapacityScalerSprite.node,new m(1,1,1),i,[new Q(this)])])}else e>this._lastAmmo?(E.instance.playOneShot("shooterReloadEnd"),this.animator.addAnimations([new S(this.ammoCapacityScalerSprite,z.color_white,z.color_lightningYellow,.25,[])]),this.ammoCapacityScalerSprite.node.setScale(1,1,1),this.currentAmmoField.color=z.color_white):(E.instance.playOneShot("shooterShooting"),this.bulletEjectionParticleSystem.emissionRate=20,this._bulletEjectionEndTime=this.lastAnimationTime+.05,this.ammoCapacityScalerSprite.node.setScale(p.clamp(e/this.ammoLimitAttribute.currentValue,0,1),1,1),this.shooterRotatorNode.setPosition(-5,0,0),this.animator.addAnimations([new f(this.shooterRotatorNode,new m(0,0,0),.05,[])]),this.animator.addAnimations([new v(this.muzzleFlashNode,new m(1,2,1),new m(1,0,1),.05,[])]));this._lastAmmo=e,this.currentAmmoField.text=e.toString()}}},a.reloadCompletedCallback=function(){this.ammoAttribute.setValue(this.ammoLimitAttribute.currentValue),this.bulletCartridgeParticleSystem.resetSystem()},a.updateAnimator=function(e){t.prototype.updateAnimator.call(this,e),h.getTouchCount()>0&&this.updateShooterRotation(h.getAllTouches()[0].getUILocation()),e>this._bulletEjectionEndTime&&this.bulletEjectionParticleSystem.emissionRate>0&&(this.bulletEjectionParticleSystem.emissionRate=0)},a.setShooterActiveState=function(t){t!=this.shooterActive&&(this.shooterActive=t,t?this.animator.addAnimations([new f(this.shooterMoverNode,this.shooterPositions[1],.15,[])]):(this.animator.addAnimations([new f(this.shooterMoverNode,this.shooterPositions[0],.15,[])]),this.animator.addAnimations([new g(this.shooterRotatorNode,this.shooterHiddenRotation,.15,[])])))},a.onMouseMove=function(t){this.updateShooterRotation(t.getUILocation())},a.updateShooterRotation=function(t){if(this._hasUnlocked&&this.shooterActive){var e=this.shooterRotatorNode.getWorldPosition(),i=C.angleFromVector(t.x-e.x,t.y-e.y);i=i<180?i:i-360,i=p.clamp(i,-50,20),this.shooterRotatorNode.setRotationFromEuler(0,0,i)}},n(e,[{key:"ammoLimitAttribute",get:function(){return this.liveDataArray[0]}},{key:"reloadIntervalAttribute",get:function(){return this.liveDataArray[1]}},{key:"ammoAttribute",get:function(){return this.liveDataArray[2]}}]),e}(A)).prototype,"shooterMoverNode",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=e(K.prototype,"shooterRotatorNode",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),G=e(K.prototype,"muzzleFlashNode",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=e(K.prototype,"ammoCounterContainer",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=e(K.prototype,"currentAmmoField",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),H=e(K.prototype,"ammoCapacityScalerSprite",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),W=e(K.prototype,"bulletEjectionParticleSystem",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),q=e(K.prototype,"bulletCartridgeParticleSystem",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=K))||L)),t("SpecialAnimateCallback_reloadAmmo",function(t){function e(e){return t.call(this,e,.001,[])||this}i(e,t);var o=e.prototype;return o.doAnimationInitialization=function(){this.objectToAnimate.reloadCompletedCallback()},o.doAnimationActions=function(){},e}(w)));a._RF.pop()}}}));

System.register("chunks:///_virtual/KiwiHoardFillBar.ts",["./rollupPluginModLoBabelHelpers.js","cc","./KiwiInterfaceAnimator.ts","./SimpleAnimator.ts","./TyrantUtils.ts","./StaticDataStructures.ts","./KiwiText.ts","./GameParameters.ts","./GameSession.ts"],(function(i){var e,t,r,n,a,l,o,s,c,u,h,g,p,m,f,w,S,y,b,d,P,A,v;return{setters:[function(i){e=i.applyDecoratedDescriptor,t=i.inheritsLoose,r=i.initializerDefineProperty,n=i.assertThisInitialized,a=i.createClass},function(i){l=i.cclegacy,o=i._decorator,s=i.Node,c=i.Sprite,u=i.Vec3,h=i.math},function(i){g=i.KiwiInterfaceAnimator},function(i){p=i.OnePerObjectAnimator,m=i.AnimateColor,f=i.AnimateKiwiTextColor,w=i.AnimateMovement,S=i.AnimateScaleFromTo},function(i){y=i.EaseType},function(i){b=i.WhatAttribute,d=i.CurrencyType},function(i){P=i.KiwiText},function(i){A=i.ColorFormatter},function(i){v=i.GameSession}],execute:function(){var C,F,k,D,z,B,K,T,H,_,x;l._RF.push({},"ca78c3FPpZIVLofDTfpG451","KiwiHoardFillBar",void 0);var E=o.ccclass,L=o.property;i("KiwiHoardFillBar",(C=E("KiwiHoardFillBar"),F=L({type:s}),k=L({type:c}),D=L({type:P}),z=L({type:s}),C((T=e((K=function(i){function e(){for(var e,t=arguments.length,a=new Array(t),l=0;l<t;l++)a[l]=arguments[l];return e=i.call.apply(i,[this].concat(a))||this,r(e,"fillBarScaler",T,n(e)),r(e,"fillBarSprite",H,n(e)),r(e,"notEnoughKiwisField",_,n(e)),r(e,"kiwiPileNode",x,n(e)),e.segmentSize=.3,e.bagCountPerSegment=[1,5,25,125],e.kiwiPileFillHeights=[-240,-164,-100,-12,270],e.animator=new p(1,!0),e.barScale=new u(0,1,1),e.pilePosition=new u(0,0,0),e.warningActive=!1,e}t(e,i);var l=e.prototype;return l.initialize=function(e){i.prototype.initialize.call(this,e),this.liveDataArray.push(v.getAttribute(b.stuffer_bagSize)),this.liveDataArray.push(v.getCurrencyData(d.kiwi))},l.onDataUpdate=function(){for(var i=this.kiwiCurrencyData.currentAmount/this.bagSizeData.currentValue,e=0;e<this.bagCountPerSegment.length&&!(i<this.bagCountPerSegment[e]);e++);this.warningActive!=e<1&&(this.warningActive=e<1,this.animator.addAnimations([new m(this.fillBarSprite,this.warningActive?A.color_errorRed:A.color_kiwiBarOlive,.4,[])]),this.animator.addAnimations([new f(this.notEnoughKiwisField,this.warningActive?A.color_errorRed:A.color_errorRedClear,.4,[])]));var t,r,n=this.segmentSize*e,a=e<this.bagCountPerSegment.length-1?this.segmentSize:1-n;if(e>=this.bagCountPerSegment.length)t=1,r=this.kiwiPileFillHeights[this.kiwiPileFillHeights.length-1];else{var l;e>0?(l=this.bagCountPerSegment[e]-this.bagCountPerSegment[e-1],i-=this.bagCountPerSegment[e-1]):l=this.bagCountPerSegment[0];var o=i/l;t=h.clamp(n+o*a,0,1),r=h.lerp(this.kiwiPileFillHeights[e],this.kiwiPileFillHeights[e+1],o)}t==this.barScale.x&&r==this.pilePosition.y||(this.barScale.x=t,this.pilePosition.y=r,this.animator.addAnimations([new w(this.kiwiPileNode,this.pilePosition,.1,[]).setEaseType(y.Linear)]),this.animator.addAnimations([new S(this.fillBarScaler,this.fillBarScaler.getScale(),this.barScale,.25,[]).setEaseType(y.Linear)]))},a(e,[{key:"bagSizeData",get:function(){return this.liveDataArray[0]}},{key:"kiwiCurrencyData",get:function(){return this.liveDataArray[1]}}]),e}(g)).prototype,"fillBarScaler",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),H=e(K.prototype,"fillBarSprite",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=e(K.prototype,"notEnoughKiwisField",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=e(K.prototype,"kiwiPileNode",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=K))||B));l._RF.pop()}}}));

System.register("chunks:///_virtual/KiwiInterfaceAnimator.ts",["./rollupPluginModLoBabelHelpers.js","cc","./SimpleAnimator.ts","./KiwiInterfaceComponent.ts"],(function(i){var t,n,e,a,r;return{setters:[function(i){t=i.inheritsLoose},function(i){n=i.cclegacy,e=i._decorator},function(i){a=i.SimpleAnimator},function(i){r=i.KiwiInterfaceComponent}],execute:function(){var o;n._RF.push({},"089f40oBJ1Ao6Rkqnisqy0c","KiwiInterfaceAnimator",void 0);var c=e.ccclass;e.property,i("KiwiInterfaceAnimator",c("KiwiInterfaceAnimator")(o=function(i){function n(){for(var t,n=arguments.length,e=new Array(n),r=0;r<n;r++)e[r]=arguments[r];return(t=i.call.apply(i,[this].concat(e))||this).animator=new a(1,!0),t.lastAnimationTime=0,t}t(n,i);var e=n.prototype;return e.initialize=function(t){i.prototype.initialize.call(this,t),this.lastAnimationTime=t.animationTime,this.registerToAnimatorUpdater()},e.registerToAnimatorUpdater=function(){this.interfaceManager.registerInterfaceAnimator(this)},e.updateAnimator=function(i){this.animator.updateAnimations(i-this.lastAnimationTime),this.lastAnimationTime=i},n}(r))||o);n._RF.pop()}}}));

System.register("chunks:///_virtual/KiwiInterfaceComponent.ts",["./rollupPluginModLoBabelHelpers.js","cc","./InitializableInterfaceComponent.ts"],(function(e){var t,i,n,a,r,o,l,c;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,n=e.initializerDefineProperty,a=e.assertThisInitialized,r=e.createClass},function(e){o=e.cclegacy,l=e._decorator},function(e){c=e.InitializableInterfaceComponent}],execute:function(){var s,f,p,g,u;o._RF.push({},"cf1c44xV1RJQKIRqLigeqoJ","KiwiInterfaceComponent",void 0);var d=l.ccclass,h=l.property;e("KiwiInterfaceComponent",(s=d("KiwiInterfaceComponent"),f=h({type:c}),s((u=t((g=function(e){function t(){for(var t,i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return t=e.call.apply(e,[this].concat(r))||this,n(t,"subInitializedComponents",u,a(t)),t._interfaceManager=null,t.liveDataArray=[],t._flaggedForUpdate=!0,t}i(t,e);var o=t.prototype;return o.initialize=function(e){null!=this.interfaceManager&&console.log("double initialization of interface element "+this.node.name),this._interfaceManager=e;for(var t=0;t<this.subInitializedComponents.length;t++)this.subInitializedComponents[t].initialize(e)},o.checkUpdateFlags=function(){if(!this.flaggedForUpdate&&0!=this.liveDataArray.length)for(var e=0;e<this.liveDataArray.length;e++)if(this.liveDataArray[e].hasChanged)return void(this._flaggedForUpdate=!0)},o.flagForForcedUpdate=function(){this._flaggedForUpdate=!0},o.updateIfFlagged=function(){this.flaggedForUpdate&&this.node.activeInHierarchy&&(this.onDataUpdate(),this._flaggedForUpdate=!1)},r(t,[{key:"interfaceManager",get:function(){return this._interfaceManager}},{key:"flaggedForUpdate",get:function(){return this._flaggedForUpdate}}]),t}(c)).prototype,"subInitializedComponents",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),p=g))||p));o._RF.pop()}}}));

System.register("chunks:///_virtual/KiwiSkillNodeController.ts",["./rollupPluginModLoBabelHelpers.js","cc","./KiwiButtonController.ts","./StaticDataStructures.ts","./GameParameters.ts","./KiwiInterfaceAnimator.ts","./SimpleAnimator.ts","./PointerInputHandler.ts"],(function(t){var e,o,i,n,l,r,a,s,c,u,d,h,p,k,C,b,f,S;return{setters:[function(t){e=t.applyDecoratedDescriptor,o=t.inheritsLoose,i=t.initializerDefineProperty,n=t.assertThisInitialized,l=t.createClass},function(t){r=t.cclegacy,a=t._decorator,s=t.Enum,c=t.UITransform,u=t.Sprite},function(t){d=t.KiwiButtonController,h=t.KiwiButtonPressAction},function(t){p=t.WhatAttribute,k=t.SkillNodeSize},function(t){C=t.ColorFormatter},function(t){b=t.KiwiInterfaceAnimator},function(t){f=t.AnimateColor},function(t){S=t.PointerEventTypes}],execute:function(){var m,y,N,v,g,A,_,D,B,w,z;r._RF.push({},"646c4dQLa9JX6DMW5k5gWZs","KiwiSkillNodeController",void 0);var T=a.ccclass,E=a.property,F=(t("KiwiSkillNodeController",(m=T("KiwiSkillNodeController"),y=E({type:s(p)}),N=E({type:c}),v=E({type:d}),g=E({type:u}),m((D=e((_=function(t){function e(){for(var e,o=arguments.length,l=new Array(o),r=0;r<o;r++)l[r]=arguments[r];return e=t.call.apply(t,[this].concat(l))||this,i(e,"nodeCategory",D,n(e)),i(e,"nodeTransform",B,n(e)),i(e,"buttonComponent",w,n(e)),i(e,"baseSprite",z,n(e)),e.nodeColorScheme=void 0,e.skillNodeManager=void 0,e.isUnlocked=!0,e.isUnlockable=!0,e.skillNodeSizeDiameters=[110,132,176,264,352],e}o(e,t);var r=e.prototype;return r.initialize=function(e){t.prototype.initialize.call(this,e),e.registerLiveDataElement(this),this.buttonComponent.initialize(e),this.nodeColorScheme=this.getSkillNodeColorSchemeForWhatAttribute(this.nodeCategory),this.buttonComponent.setButtonColorScheme_visuallyActive(this.nodeColorScheme.unlockable),this.node.setWorldRotationFromEuler(0,0,0),this.buttonComponent.addActionToInput(S.Mouse_enter,new F(this)),this.buttonComponent.addActionToInput(S.Mouse_exit,new M(this)),this.buttonComponent.addActionToInput(S.Mouse_up,new U(this),!0),this.buttonComponent.addActionToInput(S.Touch_start,new I(this),!0)},r.bindToLiveSkillNodeData=function(t,e){this.skillNodeManager=e,this.liveDataArray.push(t),this.liveDataArray=this.liveDataArray.concat(t.connectedNodes);var o=void 0!==t.skillNodeData.nodeSize?t.skillNodeData.nodeSize:k.Small,i=this.skillNodeSizeDiameters[o];this.nodeTransform.setContentSize(i,i),this.onDataUpdate()},r.onDataUpdate=function(){var t=this.boundSkillNodeData.isUnlocked,e=this.boundSkillNodeData.isUnlockable;this.updateSkillNodeState(t,e)},r.updateSkillNodeState=function(t,e){this.isUnlocked==t&&this.isUnlockable==e||(this.buttonComponent.setButtonColorScheme_visuallyInactive(t?this.nodeColorScheme.unlocked:this.nodeColorScheme.blocked),this.buttonComponent.setButtonVisuals_activeColorScheme(e,!0),this.buttonComponent.setButtonVisuals_interactableState(e,!0),this.animator.addAnimationBlock([new f(this.baseSprite,t?C.color_offWhite:C.currencyColorScheme_token.frameColor,.5,[])]),this.isUnlocked=t,this.isUnlockable=e)},r.getSkillNodeColorSchemeForWhatAttribute=function(t){var e=C.getColorForWhatAttribute(t);return this.getSkillNodeColorSchemeForColor(e)},r.getSkillNodeColorSchemeForColor=function(t){return{blocked:C.createButtonColorSchemeFromColor_off(t),unlockable:C.createButtonColorSchemeFromColor_on(t),unlocked:C.createButtonColorSchemeFromColor_lit(t)}},r.hoverEnterCallback=function(){this.nodeCategory!=p.undefined&&this.skillNodeManager.skillNodeHoverEnterCallback(this.boundSkillNodeData)},r.hoverExitCallback=function(){this.nodeCategory!=p.undefined&&this.skillNodeManager.skillNodeHoverExitCallback(this.boundSkillNodeData)},r.clickedCallback=function(){this.nodeCategory!=p.undefined&&this.skillNodeManager.skillNodeClickedCallback(this.boundSkillNodeData)},r.tappedCallback=function(){this.nodeCategory!=p.undefined&&this.skillNodeManager.skillNodeTappedCallback(this.boundSkillNodeData)},l(e,[{key:"boundSkillNodeData",get:function(){return this.liveDataArray[0]}}]),e}(b)).prototype,"nodeCategory",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return p.undefined}}),B=e(_.prototype,"nodeTransform",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=e(_.prototype,"buttonComponent",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=e(_.prototype,"baseSprite",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=_))||A)),t("ButtonAction_SkillNode_HoverEnter",function(t){function e(){return t.apply(this,arguments)||this}return o(e,t),e.prototype.doButtonPressAction=function(t){this.interactionObject.hoverEnterCallback()},e}(h))),M=t("ButtonAction_SkillNode_HoverExit",function(t){function e(){return t.apply(this,arguments)||this}return o(e,t),e.prototype.doButtonPressAction=function(t){this.interactionObject.hoverExitCallback()},e}(h)),U=t("ButtonAction_SkillNode_Clicked",function(t){function e(){return t.apply(this,arguments)||this}return o(e,t),e.prototype.doButtonPressAction=function(t){this.interactionObject.clickedCallback()},e}(h)),I=t("ButtonAction_SkillNode_Tapped",function(t){function e(){return t.apply(this,arguments)||this}return o(e,t),e.prototype.doButtonPressAction=function(t){this.interactionObject.tappedCallback()},e}(h));r._RF.pop()}}}));

System.register("chunks:///_virtual/KiwiText.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameParameters.ts"],(function(i){var e,t,l,n,s,r,o,a,h,u,F,d,b,c,f,z,x,m;return{setters:[function(i){e=i.applyDecoratedDescriptor,t=i.inheritsLoose,l=i.initializerDefineProperty,n=i.assertThisInitialized,s=i.createClass},function(i){r=i.cclegacy,o=i._decorator,a=i.RichText,h=i.UITransform,u=i.Enum,F=i.Label,d=i.CacheMode,b=i.Overflow,c=i.math,f=i.Component},function(i){z=i.KiwiTextFormat,x=i.NumberTextFormat,m=i.TextFormatter}],execute:function(){var S,g,p,y,T,v,L,w,C,k,A,H;r._RF.push({},"4bcdbv6pAZFfKhl992fwOky","KiwiText",void 0);var K=o.ccclass,M=o.property;i("KiwiText",(S=K("KiwiText"),g=M({type:a}),p=M({type:h}),y=M({type:u(z)}),T=M({type:u(x)}),S((w=e((L=function(i){function e(){for(var e,t=arguments.length,s=new Array(t),r=0;r<t;r++)s[r]=arguments[r];return e=i.call.apply(i,[this].concat(s))||this,l(e,"textField",w,n(e)),e.labelField=null,l(e,"fieldTransform",C,n(e)),l(e,"useLabel",k,n(e)),l(e,"formatStyle",A,n(e)),l(e,"numberFormat",H,n(e)),e.useFlexibleFontSize=void 0,e.initialized=!1,e.baseFontSize=void 0,e}t(e,i);var r=e.prototype;return r.setNumberFormat=function(i){this.numberFormat=i},r.initialize=function(){this.initialized=!0,this.baseFontSize=this.textField.fontSize,this.useFlexibleFontSize=0!=this.textField.maxWidth,this.useLabel?(this.labelField=this.textField.node.addComponent(F),this.labelField.fontSize=this.textField.fontSize,this.labelField.lineHeight=this.textField.lineHeight,this.labelField.useSystemFont=!1,this.labelField.font=this.textField.font,this.labelField.color=this.textField.fontColor,this.labelField.horizontalAlign=this.textField.horizontalAlign,this.labelField.verticalAlign=this.textField.verticalAlign,this.labelField.cacheMode=d.BITMAP,this.labelField.overflow=this.useFlexibleFontSize?b.SHRINK:b.NONE,this.fieldTransform.width=this.useFlexibleFontSize?this.textField.maxWidth:this.fieldTransform.width,m.setLabelFormatStyle(this.labelField,this.formatStyle),this.labelField.string=this.textField.string,this.textField.destroy(),this.textField=null):this.textField.cacheMode=d.BITMAP},r.setTextWithCharCountOverride=function(i,e){if(this.initialized||this.initialize(),this.useLabel)this.labelField.string=i;else{this.useFlexibleFontSize&&this.checkFlexibleSizing(e);var t=m.getTextStyleFromFormat(this.formatStyle);this.textField.string=t.openStyleString+i+t.closeStyleString}},r.checkFlexibleSizing=function(i){if(this.useFlexibleFontSize&&!this.useLabel){var e=i*this.baseFontSize*3/4;this.textField.fontSize=c.clamp(this.textField.maxWidth/e,.8,1.3)*this.baseFontSize}},r.numberToText=function(i,e){return m.getFormattedNumber(i,e,this.numberFormat)},r.setLineHeight=function(i){this.initialized||this.initialize(),this.useLabel?this.labelField.lineHeight=i:this.textField.lineHeight=i},r.setFontSize=function(i){this.initialized||this.initialize(),this.useLabel?this.labelField.fontSize=i:(this.baseFontSize=i,this.textField.fontSize=i)},s(e,[{key:"color",get:function(){return this.initialized||this.initialize(),this.useLabel?this.labelField.color:this.textField.fontColor},set:function(i){this.initialized||this.initialize(),this.useLabel?this.labelField.color=i:this.textField.fontColor=i}},{key:"fontSize",get:function(){return this.initialized||this.initialize(),this.useLabel?this.labelField.fontSize:this.textField.fontSize},set:function(i){this.setFontSize(i)}},{key:"text",get:function(){return this.initialized||this.initialize(),this.useLabel?this.labelField.string:this.textField.string},set:function(i){if(this.initialized||this.initialize(),this.useLabel)this.labelField.string=i;else{this.useFlexibleFontSize&&this.checkFlexibleSizing(i.length);var e=m.getTextStyleFromFormat(this.formatStyle);this.textField.string=e.openStyleString+i+e.closeStyleString}}}]),e}(f)).prototype,"textField",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=e(L.prototype,"fieldTransform",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=e(L.prototype,"useLabel",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),A=e(L.prototype,"formatStyle",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return z.regular}}),H=e(L.prototype,"numberFormat",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return x.regular}}),v=L))||v));r._RF.pop()}}}));

System.register("chunks:///_virtual/LiveDataStructures.ts",["./rollupPluginModLoBabelHelpers.js","cc","./StaticDataStructures.ts","./TyrantUtils.ts","./GameParameters.ts","./GameManager.ts","./GameSession.ts","./AudioController.ts"],(function(t){var e,i,a,u,r,n,l,o,s,c,d,h,b,v,g;return{setters:[function(t){e=t.createClass,i=t.inheritsLoose,a=t.assertThisInitialized},function(t){u=t.cclegacy},function(t){r=t.AttributeValueOperation,n=t.BuildingType,l=t.WhatAttribute,o=t.CurrencyType,s=t.AttributeStructure},function(t){c=t.TyrantUtils},function(t){d=t.GameParameters,h=t.NumberTextFormat},function(t){b=t.GameManager},function(t){v=t.GameSession},function(t){g=t.AudioController}],execute:function(){u._RF.push({},"267dd1n+c1FObpqk8do3NPR","LiveDataStructures",void 0);var f=t("LiveData",function(){function t(){this._hasChanged=!0,b.instance.registerLiveData(this)}var i=t.prototype;return i.clearLiveDataChangedFlag=function(){this._hasChanged=!1},i.flagLiveDataChange=function(){this._hasChanged=!0},e(t,[{key:"hasChanged",get:function(){return this._hasChanged}}]),t}()),p=t("LiveAttribute",function(t){function e(){return t.call(this)||this}return i(e,t),e}(f)),_=t("BasicAttribute",function(t){i(r,t);var u=r.prototype;function r(e,i,u,r,n,l,o,c){var d;return(d=t.call(this)||this)._value=0,d._unlockString="",d._attributeString="",d._isUnlocked=void 0,d._attributeStructure=void 0,d._whatAttribute=void 0,d._numberFormat=void 0,d._defaultValue=void 0,d._valueOperation=void 0,d._whatAttribute=e,d._defaultValue=i,d._valueOperation=u,d._isUnlocked=void 0===c||c,d._unlockString=void 0!==r?r:"",d._attributeString=void 0!==n?n:"",d._attributeStructure=void 0!==l?l:s.basic,d._numberFormat=void 0!==o?o:h.shortForm,d._value=d.defaultValue,b.instance.registerBasicAttribute(a(d)),d}return u.setUnlockedState=function(t){this._isUnlocked=t},r.getBasicAttributeFromStaticAttributeData=function(t){return new r(t.whatAttribute,t.defaultValue,t.attributeValueOperation,t.unlockString,t.attributeString,t.attributeStructure,t.valueTextFormat,t.startUnlocked)},u.setValue=function(t){this._value=t,this.flagLiveDataChange()},u.changeValueBy=function(t){this.setValue(this.currentValue+t)},e(r,[{key:"currentValue",get:function(){return this._value}},{key:"unlockString",get:function(){return this._unlockString}},{key:"attributeString",get:function(){return this._attributeString}},{key:"isUnlocked",get:function(){return this._isUnlocked}},{key:"attributeStructure",get:function(){return this._attributeStructure}},{key:"whatAttribute",get:function(){return this._whatAttribute}},{key:"numberFormat",get:function(){return this._numberFormat}},{key:"defaultValue",get:function(){return this._defaultValue}},{key:"valueOperation",get:function(){return this._valueOperation}}]),r}(p)),A=(t("BasicSaveableAttribute",function(t){function a(e,i){var a;return(a=t.call(this,e.whatAttribute,e.defaultValue,e.attributeValueOperation,e.unlockString,e.attributeString,e.attributeStructure,e.valueTextFormat,e.startUnlocked)||this).attributeSaveable=void 0,a.attributeSaveable=i,a}i(a,t);var u=a.prototype;return u.setValue=function(t){this.attributeSaveable.value=t,this.flagLiveDataChange()},u.changeValueBy=function(t){this.setValue(this.currentValue+t)},e(a,[{key:"currentValue",get:function(){return this.attributeSaveable.value}}]),a}(_)),t("CompositeAttribute",function(t){i(n,t);var u=n.prototype;function n(e){var i;return(i=t.call(this)||this)._baseAttribute=void 0,i._additiveBonus={flaggedForRecalculation:!0,attributeSources:[],attributeTotal:0},i._additiveMultiplier={flaggedForRecalculation:!0,attributeSources:[],attributeTotal:1},i._multiplicativeMultiplier={flaggedForRecalculation:!0,attributeSources:[],attributeTotal:1},i._totalValue=0,i._totalIsOutdated=!0,i._baseAttribute=e,i.recalculateTotalValue(),b.instance.registerCompositeAttribute(a(i)),i}return u.setUnlockedState=function(t){this.baseAttribute.setUnlockedState(t)},u.setValue=function(t){console.error("can't setValue directly for CompositeAttribute, if you want to change just the base value try setBaseValue")},u.changeValueBy=function(t){console.error("can't setValue directly for CompositeAttribute, if you want to change just the base value try changeBaseValueBy")},u.setBaseValue=function(t){this._baseAttribute.setValue(t)},u.changeBaseValueBy=function(t){this.setBaseValue(this.baseAttribute.currentValue+t)},u.flagTotalForRecalculation=function(){this._totalIsOutdated=!0},u.clearTotalRecalculationFlag=function(){this._totalIsOutdated=!1},u.addAttribute=function(t){switch(this.flagTotalForRecalculation(),t.valueOperation){default:console.log("received unconfigured AttributeValueOperation type "+t.valueOperation);break;case r.unlockAttribute:this.baseAttribute.setUnlockedState(!0),this._baseAttribute.setValue(t.currentValue);break;case r.baseValue:this._baseAttribute.setValue(t.currentValue);break;case r.additiveBonus:this._additiveBonus.attributeSources.push(t),this._additiveBonus.attributeTotal+=t.currentValue;break;case r.multiplierAdditive:this._additiveMultiplier.attributeSources.push(t),this._additiveMultiplier.attributeTotal+=t.currentValue;break;case r.multiplierMultiplicative:this._multiplicativeMultiplier.attributeSources.push(t),this._multiplicativeMultiplier.attributeTotal*=t.currentValue}},u.removeAttribute=function(t){var e;switch(this.flagTotalForRecalculation(),t.valueOperation){default:console.log("received unconfigured AttributeValueOperation type "+t.valueOperation);break;case r.unlockAttribute:case r.baseValue:this._baseAttribute.setValue(this.baseAttribute.currentValue-t.currentValue);break;case r.additiveBonus:e=this._additiveBonus.attributeSources,this._additiveBonus.attributeTotal-=t.currentValue;break;case r.multiplierAdditive:e=this._additiveMultiplier.attributeSources,this._additiveMultiplier.attributeTotal-=t.currentValue;break;case r.multiplierMultiplicative:e=this._multiplicativeMultiplier.attributeSources,this._additiveMultiplier.attributeTotal/=t.currentValue}e=e.filter((function(e){return e!=t}))},u.recalculateFlaggedValues=function(){this.arrayHasFlaggedValues(this._additiveBonus.attributeSources)&&this.recalculateTotalForOperation(r.additiveBonus),this.arrayHasFlaggedValues(this._additiveMultiplier.attributeSources)&&this.recalculateTotalForOperation(r.multiplierAdditive),this.arrayHasFlaggedValues(this._multiplicativeMultiplier.attributeSources)&&this.recalculateTotalForOperation(r.multiplierMultiplicative),this.totalFlaggedForRecalculation&&this.recalculateTotalValue()},u.arrayHasFlaggedValues=function(t){for(var e=0;e<t.length;e++)if(t[e].hasChanged)return!0;return!1},u.recalculateTotalForOperation=function(t){switch(this.flagTotalForRecalculation(),t){default:console.log("received unconfigured recalculate request for whatAttribute type "+t);break;case r.baseValue:console.log("trying to force recalculate base value for some reason?");break;case r.additiveBonus:for(var e=0,i=0;i<this._additiveBonus.attributeSources.length;i++)e+=this._additiveBonus.attributeSources[i].currentValue;this._additiveBonus.attributeTotal=e,this._additiveBonus.flaggedForRecalculation=!1;break;case r.multiplierAdditive:for(var a=1,u=0;u<this._additiveMultiplier.attributeSources.length;u++)a+=this._additiveMultiplier.attributeSources[u].currentValue;this._additiveMultiplier.attributeTotal=a,this._additiveMultiplier.flaggedForRecalculation=!1;break;case r.multiplierMultiplicative:for(var n=1,l=0;l<this._multiplicativeMultiplier.attributeSources.length;l++)n*=this._multiplicativeMultiplier.attributeSources[l].currentValue;this._multiplicativeMultiplier.attributeTotal=n,this._multiplicativeMultiplier.flaggedForRecalculation=!1}},u.recalculateTotalValue=function(){this._totalValue=(this.baseValue+this.additiveBonusTotal)*this.additiveMultiplierTotal*this.multiplicativeMultiplierTotal,this.clearTotalRecalculationFlag(),this.flagLiveDataChange()},u.getTotalWithAdditionalAttribute=function(t,e){switch(e){default:console.log("received unconfigured AttributeValueOperation type "+e);break;case r.unlockAttribute:case r.baseValue:return(t+this.additiveBonusTotal)*this.additiveMultiplierTotal*this.multiplicativeMultiplierTotal;case r.additiveBonus:return(this.baseValue+this.additiveBonusTotal+t)*this.additiveMultiplierTotal*this.multiplicativeMultiplierTotal;case r.multiplierAdditive:return(this.baseValue+this.additiveBonusTotal)*(this.additiveMultiplierTotal+t)*this.multiplicativeMultiplierTotal;case r.multiplierMultiplicative:return(this.baseValue+this.additiveBonusTotal)*this.additiveMultiplierTotal*(this.multiplicativeMultiplierTotal+t)}},e(n,[{key:"currentValue",get:function(){return this._totalValue}},{key:"isUnlocked",get:function(){return this.baseAttribute.isUnlocked}},{key:"unlockString",get:function(){return this.baseAttribute.unlockString}},{key:"attributeString",get:function(){return this.baseAttribute.attributeString}},{key:"whatAttribute",get:function(){return this.baseAttribute.whatAttribute}},{key:"defaultValue",get:function(){return this.baseAttribute.defaultValue}},{key:"valueOperation",get:function(){return this.baseAttribute.valueOperation}},{key:"attributeStructure",get:function(){return this.baseAttribute.attributeStructure}},{key:"numberFormat",get:function(){return this.baseAttribute.numberFormat}},{key:"baseAttribute",get:function(){return this._baseAttribute}},{key:"baseValue",get:function(){return this._baseAttribute.currentValue}},{key:"additiveBonusTotal",get:function(){return this._additiveBonus.attributeTotal}},{key:"additiveMultiplierTotal",get:function(){return this._additiveMultiplier.attributeTotal}},{key:"multiplicativeMultiplierTotal",get:function(){return this._multiplicativeMultiplier.attributeTotal}},{key:"totalFlaggedForRecalculation",get:function(){return this._totalIsOutdated||this.baseAttribute.hasChanged}}]),n}(p)));t("LiveCurrencyData",function(t){function a(e,i){var a;return(a=t.call(this)||this)._currencyData=void 0,a._amountGained=void 0,a._amountSpent=void 0,a._amountHighest=void 0,a._amountGained=e.totalGained,a._amountSpent=e.totalSpent,a._amountHighest=e.highestAmount,a._currencyData=i,a}return i(a,t),a.prototype.changeCurrencyByAmount=function(t){this.flagLiveDataChange(),t>0?this._amountGained.value+=t:this._amountSpent.value-=t;var e=this.currentAmount;e>this._amountHighest.value&&(this._amountHighest.value=e)},e(a,[{key:"currencyType",get:function(){return this._currencyData.currencyType}},{key:"staticCurrencyData",get:function(){return this._currencyData}},{key:"currentAmount",get:function(){return this._amountGained.value-this._amountSpent.value}},{key:"totalGained",get:function(){return this._amountGained.value}},{key:"totalSpent",get:function(){return this._amountSpent.value}},{key:"highestAmount",get:function(){return this._amountHighest.value}}]),a}(f)),t("LiveBuildingData",function(t){function a(e,i,a){var u;return(u=t.call(this)||this)._buildingData=void 0,u._buildingIcon=void 0,u._buildingLevel=void 0,u._compositeAttribute=void 0,u._buildingAttribute=void 0,u._compositeAttribute=e,u._buildingAttribute=e.baseAttribute,u._buildingLevel=i,u._buildingData=a,u.setBuildingLevel(u.buildingLevel),u}i(a,t);var u=a.prototype;return u.setBuildingLevel=function(t){this.flagLiveDataChange(),this._buildingLevel.value=t,this.updateAttributevalue()},u.getTotalCostForUpgradeLevelCount=function(t){for(var e=this._buildingData,i=e.tierInterval,a=this.buildingLevel,u=this.buildingLevel+t,r=Math.floor(a/i),n=Math.floor(u/i),l=0,o=n;o>=r;o--){var s=o*i;o==r&&(s+=a%i);var d=void 0;if(!((d=o<n?i+o*i:u)-s<=0)){var h=Math.pow(e.perTierCostExponent,o);l+=e.baseCost*h*(c.exponation(e.perLevelCostExponent,d)-c.exponation(e.perLevelCostExponent,s))}}return l},u.getMaxAffordableUpgradeLevelCountAndCostFromCurrencyAmount=function(t){var e=1,i=this.getTotalCostForUpgradeLevelCount(e);if(i>=t)return[e,i];for(var a=null,u=2*this._buildingData.tierInterval,r=d.maxRecursionIterations;null==a||u>0;){var n=this.getTotalCostForUpgradeLevelCount(u);if(n<=t?(e=u,i=n):a=u,null==a?u*=2:u=Math.floor((a+e)/2),!(--r>0)){console.log("ran out of iterations when calculating max purchaseable building levels");break}}return[e,i]},u.updateAttributevalue=function(){this._buildingAttribute.setValue(this.getAttributeValueForLevel(this._buildingLevel.value))},u.getAttributeValueForLevel=function(t){switch(this._buildingData.buildingType){default:return console.log("bad building type data when calculating value, received request for building type "+this._buildingData.buildingType),null;case n.sekiwity:return this.getAttributeValueForLevel_linearScaling(t);case n.autoKiwiker:return this.getAttributeValueForLevel_summationScaling(t);case n.bigKiwi:case n.stuffer:case n.castle:return this.getAttributeValueForLevel_exponentialScaling(t)}},u.getAttributeValueForLevel_linearScaling=function(t){for(var e=this._buildingData,i=Math.floor(t/e.tierInterval),a=t%e.tierInterval,u=this.buildingAttribute.defaultValue,r=0;r<=i;r++){var n=r!=i?e.tierInterval:a;0!=n&&(u+=e.firstLevelValueBonus+e.perLevelValueIncrement*(1+r)*n)}return u},u.getAttributeValueForLevel_exponentialScaling=function(t){for(var e=this._buildingData,i=Math.floor(t/e.tierInterval),a=t%e.tierInterval,u=this.buildingAttribute.defaultValue,r=0;r<=i;r++){var n=r!=i?e.tierInterval:a;0!=n&&(u+=e.firstLevelValueBonus+n*e.perLevelValueIncrement*Math.pow(e.perTierValueExponent,r))}return u},u.getAttributeValueForLevel_summationScaling=function(t){for(var e=this._buildingData,i=Math.floor(t/e.tierInterval),a=t%e.tierInterval,u=0,r=0;r<=i;r++){var n=r!=i?e.tierInterval:a;if(0!=n){var l=e.firstLevelValueBonus+n*e.perLevelValueIncrement;u+=(l*l+l)/2*Math.pow(e.perTierValueExponent,r)}}return u},e(a,[{key:"staticBuildingData",get:function(){return this._buildingData}},{key:"buildingType",get:function(){return this._buildingData.buildingType}},{key:"hasChanged",get:function(){return t.prototype.hasChanged||this.buildingAttribute.hasChanged}},{key:"startUnlocked",get:function(){return this.buildingLevel>0||this.compositeAttribute.isUnlocked}},{key:"buildingIcon",get:function(){return this._buildingIcon}},{key:"buildingTier",get:function(){return Math.floor(this.buildingLevel/this.staticBuildingData.tierInterval)}},{key:"buildingLevel",get:function(){return this._buildingLevel.value}},{key:"compositeAttribute",get:function(){return this._compositeAttribute}},{key:"buildingAttribute",get:function(){return this._buildingAttribute}}]),a}(f)),t("LiveBoostData",function(t){function a(e,i){var a;(a=t.call(this)||this)._boostBonusAttribute=void 0,a._affectedBuilding=void 0,a._timeLeft=0,a.boostActive=!1,a._affectedBuilding=i;var u=i.compositeAttribute,n=new _(u.whatAttribute,e.defaultMultiplier,r.multiplierMultiplicative,u.unlockString,u.attributeString,s.basic,u.numberFormat);return a._boostBonusAttribute=new A(n),a.boostBonusAttribute.addAttribute(v.getAttribute(l.buildingBoost_powerMultiplier)),a}i(a,t);var u=a.prototype;return u.activateBoost=function(){var t=v.getAttribute(l.buildingBoost_effectDuration).currentValue;this._timeLeft=Math.max(this.timeLeft,0)+t,this.boostActive||(this.boostActive=!0,this.flagLiveDataChange(),this.affectedBuilding.compositeAttribute.addAttribute(this.boostBonusAttribute))},u.deactivateBoost=function(){this._timeLeft=0,this.boostActive&&(this.boostActive=!1,this.flagLiveDataChange(),this.affectedBuilding.compositeAttribute.removeAttribute(this.boostBonusAttribute))},u.updateBoostTimer=function(t){this.boostActive&&(this._timeLeft-=t,this.timeLeft<=0&&this.deactivateBoost(),this.flagLiveDataChange())},u.getBonusAttributeDelta=function(){var t=this.affectedBuilding.compositeAttribute.currentValue;return(this.boostBonusAttribute.currentValue-1)*t},e(a,[{key:"boostBonusAttribute",get:function(){return this._boostBonusAttribute}},{key:"affectedBuilding",get:function(){return this._affectedBuilding}},{key:"timeLeft",get:function(){return this._timeLeft}}]),a}(f)),t("LiveSkillNodeData",function(t){function a(e,i){var a;return(a=t.call(this)||this).saveableUnlockedState=void 0,a.skillNodeData=void 0,a.nodeAttribute=void 0,a.effectApplied=!1,a.connectedNodes=[],a.saveableUnlockedState=i,i.value=i.value||e.baseCost<=0,a.skillNodeData=e,a.nodeAttribute=new _(a.skillNodeData.whatSkillNode.whatCategory,a.skillNodeData.baseValue,a.skillNodeData.nodeOperation),a.updateNodeEffectState(),a}i(a,t);var u=a.prototype;return u.tryUnlockNode=function(){if(this.isUnlocked)return!1;if(!this.isUnlockable)return g.instance.playOneShot("errorSound"),!1;var t=v.tryChargeCurrency(this.skillNodeData.baseCost,o.token);return this.setUnlockedState(t),t},u.setUnlockedState=function(t){t!=this.saveableUnlockedState.value&&(this.saveableUnlockedState.value=t,this.updateNodeEffectState(),this.flagLiveDataChange())},u.updateNodeEffectState=function(){if(this.effectApplied!=this.isUnlocked&&this.nodeAttribute.whatAttribute!=l.undefined){this.effectApplied=this.isUnlocked;var t=v.getAttribute(this.nodeAttribute.whatAttribute);this.isUnlocked?t.addAttribute(this.nodeAttribute):t.removeAttribute(this.nodeAttribute)}},u.registerConnectedNode=function(t){this.connectedNodes.lastIndexOf(t)>=0||this.connectedNodes.push(t)},e(a,[{key:"isUnlocked",get:function(){return this.saveableUnlockedState.value}},{key:"isUnlockable",get:function(){if(this.isUnlocked)return!1;for(var t=0;t<this.connectedNodes.length;t++)if(this.connectedNodes[t].isUnlocked)return!0;return!1}},{key:"identifier",get:function(){return this.saveableUnlockedState.identifier}}]),a}(f)),t("AttributeSourceCategory",function(t){return t[t.base=0]="base",t[t.building=1]="building",t[t.clicking=2]="clicking",t[t.skillTree=3]="skillTree",t[t.demonPower=11]="demonPower",t}({}));u._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./AudioController.ts","./AutoKiwikerSimulation.ts","./DeliveryLineSimulation.ts","./DeliveryLineViewController.ts","./GameManager.ts","./GameParameters.ts","./GameSession.ts","./Hoarder.ts","./InitializableInterfaceComponent.ts","./InterfaceManager.ts","./KiwiText.ts","./LiveDataStructures.ts","./AttributeCounter.ts","./AutoKiwikerViewController.ts","./BigKiwiController.ts","./BuildingBoostDurationTimer.ts","./BuildingUpgradeButton.ts","./BuildingUpgradeWindowController.ts","./CarHitterAnimator.ts","./CargoKiwiAnimator.ts","./CastleController.ts","./ClickOrTapField.ts","./ClickpointBar.ts","./CurrencyCounterController.ts","./DebugWindow.ts","./DeliveryGroundsEntity.ts","./DeliveryGroundsKiwiAnimator.ts","./DemonKiwiAnimator.ts","./DemonKiwiViewController.ts","./FloatingNumberComponent.ts","./FreeBoostProgressTracker.ts","./GroundsEntity_Guard.ts","./GroundsEntity_King.ts","./KingSummonRingController.ts","./KiwiBodyAnimator.ts","./KiwiButtonController.ts","./KiwiGunController.ts","./KiwiHoardFillBar.ts","./KiwiInterfaceAnimator.ts","./KiwiInterfaceComponent.ts","./KiwiSkillNodeController.ts","./PointerInputHandler.ts","./RepeatingPointer.ts","./RoundedGraphics.ts","./SekiwityClickMultiplierCounter.ts","./SekiwityKiwiAnimator.ts","./SekiwityViewController.ts","./SelectedSkillNodeIndicator.ts","./SimpleRotator.ts","./SkillNodeConnector.ts","./SkillNodeManager.ts","./SkillNodeTooltip.ts","./SkillTreeScreenController.ts","./SpriteShineEffect.ts","./TransformWhenBoosted.ts","./UnlockBuildingAnimationController.ts","./VolumeController.ts","./ProgressBubble.ts","./SaveableDataManager.ts","./SaveableDataStructures.ts","./SimpleAnimator.ts","./StaticData.ts","./StaticDataStructures.ts","./ToggleableColorScheme.ts","./TutorialController.ts","./TutorialStepView.ts","./TyrantUtils.ts","./PokiPlatform.ts"],(function(){return{setters:[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){}}}));

System.register("chunks:///_virtual/PointerInputHandler.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var o,n,e,i,s;return{setters:[function(t){o=t.createClass},function(t){n=t.cclegacy,e=t._decorator,i=t.Node,s=t.game}],execute:function(){var u;n._RF.push({},"bdbf7yIHWZOBIXUl+UMTjK1","PointerInputHandler",void 0);var c=e.ccclass,r=(e.property,t("PointerInputHandler",c("PointerInputHandler")(u=function(){function t(){var t=this;this.inputActionToButtonActionmap=new Map,this._lastInput=new h,this.isHovered=!1,this.isPressed=!1,Object.values(r).forEach((function(o){0!=o&&t.inputActionToButtonActionmap.set(r[o],[])}))}var o=t.prototype;return o.registerNodeForPointerEvents=function(t,o){var n=1==o;t.on(i.EventType.TOUCH_START,this.onTouchStart,this,n),t.on(i.EventType.TOUCH_MOVE,this.onTouchMove,this,n),t.on(i.EventType.TOUCH_END,this.onTouchEnd,this,n),t.on(i.EventType.TOUCH_CANCEL,this.onTouchEnd,this,n),t.on(i.EventType.MOUSE_DOWN,this.onMouseDown,this,n),t.on(i.EventType.MOUSE_UP,this.OnMouseUp,this,n),t.on(i.EventType.MOUSE_ENTER,this.onHoverEnter,this,n),t.on(i.EventType.MOUSE_LEAVE,this.onHoverExit,this,n),this.resetAllParamaters()},o.deregisterNodeForPointerEvents=function(t){t.off(i.EventType.TOUCH_START,this.onTouchStart,this),t.off(i.EventType.TOUCH_MOVE,this.onTouchMove,this),t.off(i.EventType.TOUCH_END,this.onTouchEnd,this),t.off(i.EventType.TOUCH_CANCEL,this.onTouchEnd,this),t.off(i.EventType.MOUSE_DOWN,this.onMouseDown,this),t.off(i.EventType.MOUSE_UP,this.OnMouseUp,this),t.off(i.EventType.MOUSE_ENTER,this.onHoverEnter,this),t.off(i.EventType.MOUSE_LEAVE,this.onHoverExit,this),this.resetAllParamaters()},o.resetAllParamaters=function(){this._lastInput.clearAction(),this.isPressed=!1,this.isHovered=!1},o.addActionToInput=function(t,o,n){t!=r.None&&(1==n||t!=r.Mouse_up&&t!=r.Touch_start||console.error("primary pointer action being set non-explicitly for "+typeof o+" - please use addPrimaryPointerAction if this is not intended, or make this explicit."),this.inputActionToButtonActionmap.get(t).push(o))},o.addPrimaryPointerAction=function(t){this.inputActionToButtonActionmap.get(r.Mouse_up).push(t),this.inputActionToButtonActionmap.get(r.Touch_start).push(t)},o.removeActionTypeFromInput=function(t,o){var n=this.inputActionToButtonActionmap.get(t);n=n.filter((function(t){return typeof t!=o}))},o.processLastInput=function(){if(this._lastInput.lastAction!=r.None){switch(this._lastInput.lastAction){default:break;case r.Touch_start:this.doTouchstartActions();break;case r.Touch_move:this.doTouchMoveActions();break;case r.Touch_end:this.doTouchEndActions();break;case r.Touch_tap:this.doTouchstartActions(),this.doTouchEndActions();break;case r.Mouse_enter:this.doHoverEnterActions();break;case r.Mouse_exit:this.doHoverExitActions();break;case r.Mouse_down:this.doMouseDownActions();break;case r.Mouse_up:this.doMouseUpActions();break;case r.Mouse_click:this.doMouseDownActions(),this.doMouseUpActions()}this._lastInput.clearAction()}},o.onHoverEnter=function(t){t.propagationStopped=!1,this._lastInput.registerAction(r.Mouse_enter,t)},o.onHoverExit=function(t){t.propagationStopped=!1,this._lastInput.registerAction(r.Mouse_exit,t)},o.onMouseDown=function(t){t.propagationStopped=!1,this._lastInput.registerAction(r.Mouse_down,t)},o.OnMouseUp=function(t){t.propagationStopped=!1,this._lastInput.registerAction(r.Mouse_up,t)},o.onTouchStart=function(t){t.propagationStopped=!1,this._lastInput.registerAction(r.Touch_start,t)},o.onTouchEnd=function(t){t.propagationStopped=!1,this._lastInput.registerAction(r.Touch_end,t)},o.onTouchMove=function(t){t.propagationStopped=!1,this._lastInput.registerAction(r.Touch_move,t)},o.doHoverEnterActions=function(){this.isHovered||(this.isHovered=!0,this.doActions(this.inputActionToButtonActionmap.get(r.Mouse_enter)))},o.doHoverExitActions=function(){this.isHovered&&(this.isHovered=!1,this.isPressed=!1,this.doActions(this.inputActionToButtonActionmap.get(r.Mouse_exit)))},o.doMouseDownActions=function(){this.isPressed||(this.isPressed=!0,this.doActions(this.inputActionToButtonActionmap.get(r.Mouse_down)))},o.doMouseUpActions=function(){this.isPressed&&(this.isPressed=!1,this.doActions(this.inputActionToButtonActionmap.get(r.Mouse_up)))},o.doTouchstartActions=function(){this.doActions(this.inputActionToButtonActionmap.get(r.Touch_start))},o.doTouchMoveActions=function(){this.doActions(this.inputActionToButtonActionmap.get(r.Touch_move))},o.doTouchEndActions=function(){this.doActions(this.inputActionToButtonActionmap.get(r.Touch_end))},o.doActions=function(t){if(0!=t.length)for(var o=this._lastInput.lastEventData,n=0;n<t.length;n++)t[n].doButtonPressAction(o)},t}())||u),t("PointerEventTypes",function(t){return t[t.None=0]="None",t[t.Touch_move=1]="Touch_move",t[t.Touch_start=2]="Touch_start",t[t.Touch_end=3]="Touch_end",t[t.Touch_tap=4]="Touch_tap",t[t.Mouse_enter=5]="Mouse_enter",t[t.Mouse_exit=6]="Mouse_exit",t[t.Mouse_down=7]="Mouse_down",t[t.Mouse_up=8]="Mouse_up",t[t.Mouse_click=9]="Mouse_click",t}({}))),h=t("PointerInput",function(){function t(){this._inputType=r.None,this._inputEventData=void 0,this._eventTime=0}var n=t.prototype;return n.registerAction=function(t,o){if(!(this._inputType>t)){var n=s.frameStartTime;this._inputType==r.Mouse_down&&t==r.Mouse_up?t=r.Mouse_click:this._inputType==r.Touch_start&&t==r.Touch_end&&(t=r.Touch_tap),this._inputType!=r.None&&this._eventTime!=n&&(console.error("mismatched frame timing for input!"),this.clearAction()),this._eventTime=s.frameStartTime,this._inputType=t,this._inputEventData=o}},n.clearAction=function(){this._inputType=r.None,this._inputEventData=null},o(t,[{key:"lastAction",get:function(){return this._inputType}},{key:"lastEventData",get:function(){return this._inputEventData}}]),t}());n._RF.pop()}}}));

System.register("chunks:///_virtual/PokiPlatform.ts",["cc"],(function(e){var t,n;return{setters:[function(e){t=e.cclegacy,n=e.game}],execute:function(){t._RF.push({},"5a510DDQhJLeKan+foOx3ch","PokiPlatform",void 0);var o=window.PokiSDK,r=e("CCPokiSDK",function(){function e(){}return e.rewardBreak=function(){if(void 0!==o)try{var t=n;o.rewardedBreak().then((function(n){t.emit(e.EVENT_REWARD_BREAK_DONE,n)}))}catch(e){console.log(e)}},e.commercialBreak=function(){if(void 0!==o){var t=n;o.commercialBreak().then((function(){t.emit(e.EVENT_COMMERCIAL_BREAK_DONE)}))}},e.gameplayStop=function(){void 0!==o&&o.gameplayStop()},e.gameplayStart=function(){void 0!==o&&o.gameplayStart()},e.shareableURL=function(t){var r=n;o.shareableURL(t).then((function(t){console.log(t),r.emit(e.EVENT_SHRABLE_URL_READY,t)}))},e.isAdBlocked=function(){return o.isAdBlocked()},e.getURLParam=function(e){return o.getURLParam(e)},e}());r.EVENT_REWARD_BREAK_DONE="prbr",r.EVENT_COMMERCIAL_BREAK_DONE="pcvr",r.EVENT_SHRABLE_URL_READY="psur",t._RF.pop()}}}));

System.register("chunks:///_virtual/ProgressBubble.ts",["./rollupPluginModLoBabelHelpers.js","cc","./KiwiText.ts","./KiwiInterfaceAnimator.ts","./SimpleAnimator.ts","./GameParameters.ts"],(function(e){var t,r,i,n,o,a,s,l,c,u,p,b,g,f,d,h,m,y,w;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,i=e.createClass,n=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){a=e.cclegacy,s=e._decorator,l=e.Node,c=e.UITransform,u=e.Sprite,p=e.math},function(e){b=e.KiwiText},function(e){g=e.KiwiInterfaceAnimator},function(e){f=e.OnePerObjectAnimator,d=e.AnimateUnique_KiwiBoing,h=e.AnimateWait,m=e.AnimateAlpha,y=e.Animate},function(e){w=e.ColorFormatter}],execute:function(){var S,B,A,M,T,z,P,k,C,v,x,O,F,I,_,N,D,K,j;a._RF.push({},"3f960GgIDdIwqNfTrmwacTj","ProgressBubble",void 0);var q=s.ccclass,R=s.property,U=(e("ProgressBubble",(S=q("ProgressBubble"),B=R({type:l}),A=R({type:c}),M=R({type:c}),T=R({type:u}),z=R({type:u}),P=R({type:b}),S((v=t((C=function(e){function t(){for(var t,r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return t=e.call.apply(e,[this].concat(i))||this,n(t,"doBubbleBounce",v,o(t)),n(t,"secondaryMessage",x,o(t)),n(t,"secondaryMessageProgress",O,o(t)),n(t,"completionMessage",F,o(t)),n(t,"hideNodesOnCompletion",I,o(t)),n(t,"progressMaskTransform",_,o(t)),n(t,"progressScalerTransform",N,o(t)),n(t,"progressScalerSprite",D,o(t)),n(t,"backgroundSprite",K,o(t)),n(t,"textField",j,o(t)),t.animator=new f(1,!0),t.hasChangedMessage=!1,t}r(t,e);var i=t.prototype;return i.initialize=function(t){e.prototype.initialize.call(this,t),this.doBubbleBounce&&this.addBubbleBounce(),null!=this.progressScalerTransform&&(this.progressScalerTransform.width=this.progressMaskTransform.width,this.progressScalerTransform.node.setPosition(-this.progressMaskTransform.width/2,0))},i.addBubbleBounce=function(){this.node.setScale(1,1,1),this.animator.addAnimations([new d(this.node,.6,[new h(4,[new U(this)])])])},i.onDataUpdate=function(){},i.setProgress=function(e){this.progressScalerSprite.node.setScale(p.clamp(e,0,1),1,1),!this.hasChangedMessage&&""!=this.secondaryMessage&&e>=this.secondaryMessageProgress&&(this.hasChangedMessage=!0,this.textField.text=this.secondaryMessage)},i.celebrateCompletion=function(){for(var e=0;e<this.hideNodesOnCompletion.length;e++)this.hideNodesOnCompletion[e].active=!1;this.backgroundSprite.color=this.progressScalerSprite.color,this.textField.color=w.color_offWhite,this.textField.text=this.completionMessage,this.animator.addAnimations([new m(this.backgroundSprite,0,1.2,[])])},t}(g)).prototype,"doBubbleBounce",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),x=t(C.prototype,"secondaryMessage",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),O=t(C.prototype,"secondaryMessageProgress",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.4}}),F=t(C.prototype,"completionMessage",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"HOOORAY!"}}),I=t(C.prototype,"hideNodesOnCompletion",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),_=t(C.prototype,"progressMaskTransform",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=t(C.prototype,"progressScalerTransform",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=t(C.prototype,"progressScalerSprite",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),K=t(C.prototype,"backgroundSprite",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),j=t(C.prototype,"textField",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=C))||k)),e("SpecialAnimateCallback_requestBubbleBounce",function(e){function t(t){return e.call(this,t,0,[])||this}r(t,e);var n=t.prototype;return n.doAnimationInitialization=function(){this.progressBubble.addBubbleBounce()},n.doAnimationActions=function(){},i(t,[{key:"progressBubble",get:function(){return this.objectToAnimate}}]),t}(y)));a._RF.pop()}}}));

System.register("chunks:///_virtual/RepeatingPointer.ts",["./rollupPluginModLoBabelHelpers.js","cc","./KiwiInterfaceAnimator.ts","./TyrantUtils.ts"],(function(t){var i,n,e,r,o,a,p,s,l,c,u;return{setters:[function(t){i=t.applyDecoratedDescriptor,n=t.inheritsLoose,e=t.initializerDefineProperty,r=t.assertThisInitialized},function(t){o=t.cclegacy,a=t._decorator,p=t.Sprite,s=t.SpriteFrame,l=t.math},function(t){c=t.KiwiInterfaceAnimator},function(t){u=t.TyrantUtils}],execute:function(){var g,f,m,h,d,y,v,S;o._RF.push({},"9e2e8rvP+NMOpQIVDVNP096","RepeatingPointer",void 0);var A=a.ccclass,b=a.property;t("RepeatingPointer",(g=A("RepeatingPointer"),f=b({type:p}),m=b({type:s}),g((y=i((d=function(t){function i(){for(var i,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return i=t.call.apply(t,[this].concat(o))||this,e(i,"pointingSprite",y,r(i)),e(i,"alternateSprites",v,r(i)),e(i,"doAnimation",S,r(i)),i.pointingTime=0,i.pointingInterval=.3,i.pointingCoordinateDelta=10,i}n(i,t);var o=i.prototype;return o.onDataUpdate=function(){},o.updateAnimator=function(i){var n=i-this.lastAnimationTime;if(t.prototype.updateAnimator.call(this,i),this.doAnimation){this.pointingTime=this.pointingTime+n;var e=u.easeInOut(l.pingPong(this.pointingTime,this.pointingInterval)/this.pointingInterval);this.pointingSprite.node.setPosition(0,e*this.pointingCoordinateDelta,0)}},o.setAnimationState=function(t){this.doAnimation=t},o.setSpriteIndex=function(t){this.pointingSprite.spriteFrame=this.alternateSprites[t]},i}(c)).prototype,"pointingSprite",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=i(d.prototype,"alternateSprites",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),S=i(d.prototype,"doAnimation",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),h=d))||h));o._RF.pop()}}}));

System.register("chunks:///_virtual/RoundedGraphics.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(r){var i,t,e,n,o,a,c,s,u;return{setters:[function(r){i=r.applyDecoratedDescriptor,t=r.inheritsLoose,e=r.initializerDefineProperty,n=r.assertThisInitialized},function(r){o=r.cclegacy,a=r._decorator,c=r.CCFloat,s=r.UITransform,u=r.Graphics}],execute:function(){var h,p,l,d,f;o._RF.push({},"c39ecXvcCNH6IJiMdzO5aSw","RoundedGraphics",void 0);var v=a.ccclass,y=a.property;r("RoundedGraphics",(h=v("RoundedGraphics"),p=y({type:c}),h((f=i((d=function(r){function i(){for(var i,t=arguments.length,o=new Array(t),a=0;a<t;a++)o[a]=arguments[a];return i=r.call.apply(r,[this].concat(o))||this,e(i,"cornerRadius",f,n(i)),i.uiTransform=void 0,i}t(i,r);var o=i.prototype;return o.start=function(){this.uiTransform=this.getComponent(s)},o.update=function(){var r=this.uiTransform;this.clear(),this.roundRect(-r.width/2,-r.height/2,r.width,r.height,this.cornerRadius),this.fill()},i}(u)).prototype,"cornerRadius",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),l=d))||l));o._RF.pop()}}}));

System.register("chunks:///_virtual/SaveableDataManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./SaveableDataStructures.ts","./StaticData.ts","./StaticDataStructures.ts","./TutorialController.ts"],(function(t){var e,a,i,l,n,o,s,r,c,u;return{setters:[function(t){e=t.createClass},function(t){a=t.cclegacy,i=t._decorator},function(t){l=t.Saveable,n=t.SaveableScope,o=t.SaveableBlock},function(t){s=t.StaticData},function(t){r=t.AttributeStructure,c=t.WhatAttribute},function(t){u=t.LearnAbout}],execute:function(){var S;a._RF.push({},"ed7d7HQk6dEHLa2kBySYQ+U","SaveableDataManager",void 0);var k=i.ccclass;i.property,t("SaveableDataManager",k("SaveableDataManager")(S=function(){function t(){this._settingsSaveableBlock=new o("settings_"),this._statsSaveableBlock=new o("stats_"),this._kingdomSaveableBlock=new o("kingdom_"),this._skilltreeSaveableBlock=new o("skilltree_"),this.savedCurrencyDataMap=new Map,this.attributeValueMap=new Map,this.buildingLevelMap=new Map,this.skillNodeUnlockStateMap=new Map,this.tutorialStepCompletionStateMap=new Map}var a=t.prototype;return a.saveAllBlocks=function(){this._settingsSaveableBlock.saveBlockData(),this._statsSaveableBlock.saveBlockData(),this._kingdomSaveableBlock.saveBlockData(),this._skilltreeSaveableBlock.saveBlockData()},a.wipeAllBlocks=function(){this._settingsSaveableBlock.resetBlockData(),this._statsSaveableBlock.resetBlockData(),this._kingdomSaveableBlock.resetBlockData(),this._skilltreeSaveableBlock.resetBlockData(),this.saveAllBlocks()},a.getSavedCurrencyData=function(t){return this.savedCurrencyDataMap.get(t)},a.loadCurrencyData=function(){for(var t=0;t<s.staticCurrencyData.length;t++){var e=s.staticCurrencyData[t],a={totalGained:new l(e.currencyIdentifier+"Plus",0),totalSpent:new l(e.currencyIdentifier+"Minus",0),highestAmount:new l(e.currencyIdentifier+"Max",0)};a.totalGained.initialize(this.getSaveblockForScope(e.currencyScope)),a.totalSpent.initialize(this.getSaveblockForScope(e.currencyScope)),a.highestAmount.initialize(this.getSaveblockForScope(n.statistics)),this.savedCurrencyDataMap.set(e.currencyType,a)}},a.getAttributeValue=function(t){return this.attributeValueMap.get(t)},a.loadAttributeData=function(){for(var t=0;t<s.staticAttributeData.length;t++)if(s.staticAttributeData[t].attributeStructure==r.basicSaveable){var e=s.staticAttributeData[t],a=new l(c[e.whatAttribute],e.defaultValue);a.initialize(this.getSaveblockForScope(e.saveableScope)),this.attributeValueMap.set(e.whatAttribute,a)}},a.getBuildingLevel=function(t){return this.buildingLevelMap.get(t)},a.loadBuildingData=function(){for(var t=0;t<s.staticBuildingData.length;t++){var e=s.staticBuildingData[t],a=new l(e.buildingIdentifier,0);a.initialize(this.getSaveblockForScope(n.kingdom)),this.buildingLevelMap.set(e.buildingType,a)}},a.getSkillNodeUnlockedState=function(t){return this.skillNodeUnlockStateMap.get(t)},a.loadSkillNodeUnlockData=function(){for(var t=0;t<s.skillNodeData.length;t++){var e=s.skillNodeData[t],a=c[e.whatSkillNode.whatCategory]+e.whatSkillNode.index,i=new l(a,!1);i.initialize(this.getSaveblockForScope(n.skilltree)),this.skillNodeUnlockStateMap.set(a,i)}},a.getTutorialStepCompletionState=function(t){return this.tutorialStepCompletionStateMap.get(t)},a.loadTutorialStepData=function(){for(var t=Object.keys(u),e=0;e<t.length;e++){var a="learnedAbout"+t[e],i=new l(a,!1);i.initialize(this.getSaveblockForScope(n.settings)),this.tutorialStepCompletionStateMap.set(a,i)}},a.getSaveblockForScope=function(t){var e;switch(t){default:return console.log("requested invalid save block scope as "+t),null;case n.kingdom:e=this._kingdomSaveableBlock;break;case n.skilltree:e=this._skilltreeSaveableBlock;break;case n.statistics:e=this._statsSaveableBlock;break;case n.settings:e=this._settingsSaveableBlock}return e},e(t,[{key:"saveableTutorialStepCompletionStates",get:function(){return this.tutorialStepCompletionStateMap}}]),t}())||S);a._RF.pop()}}}));

System.register("chunks:///_virtual/SaveableDataStructures.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(i){var e,t,a;return{setters:[function(i){e=i.createClass},function(i){t=i.cclegacy,a=i.sys}],execute:function(){t._RF.push({},"40aaazQrIVKRr8/hhoNemAu","SaveableDataStructures",void 0);i("SaveableScope",function(i){return i[i.kingdom=0]="kingdom",i[i.skilltree=1]="skilltree",i[i.statistics=99]="statistics",i[i.settings=100]="settings",i}({})),i("SaveableBlock",function(){function i(i){this._identifier=void 0,this._saveableDataMap=new Map,this._identifier=i}var t=i.prototype;return t.initializeSaveable=function(i){return this._saveableDataMap.has(i.identifier)?(console.log("requested duplicate saveable storage for "+i.identifier+" in "+this.identifier),!1):(this.load(i),this._saveableDataMap.set(i.identifier,i),!0)},t.saveBlockData=function(){var i=this;this._saveableDataMap.forEach((function(e){i.save(e)}))},t.forceReloadBlockData=function(){var i=this;this._saveableDataMap.forEach((function(e){i.load(e)}))},t.resetBlockData=function(){this._saveableDataMap.forEach((function(i){i.resetValue()}))},t.save=function(i){a.localStorage.setItem(this.identifier+i.identifier,i.value)},t.load=function(i){var e=a.localStorage.getItem(this.identifier+i.identifier);null===e?i.resetValue():i.value=JSON.parse(e)},e(i,[{key:"identifier",get:function(){return this._identifier}}]),i}()),i("Saveable",function(){function i(i,e){this._identifier=void 0,this._value=void 0,this._defaultValue=void 0,this._initialized=!1,this._identifier=i,this._defaultValue=e}var t=i.prototype;return t.initialize=function(i){return this._initialized?(console.log("duplicate initialization for "+i.identifier+this.identifier),null):(this._initialized=i.initializeSaveable(this),this._initialized?this:(console.log("failed saveable initialization for "+i.identifier+this.identifier),null))},t.resetValue=function(){this.value=this._defaultValue},e(i,[{key:"identifier",get:function(){return this._identifier}},{key:"value",get:function(){return this._initialized?this._value:(console.log("trying to access uninitialized saveable "+this.identifier),null)},set:function(i){this._value=i}}]),i}());t._RF.pop()}}}));

System.register("chunks:///_virtual/SekiwityClickMultiplierCounter.ts",["./rollupPluginModLoBabelHelpers.js","cc","./KiwiInterfaceComponent.ts","./KiwiText.ts","./StaticDataStructures.ts","./TyrantUtils.ts","./GameParameters.ts","./GameSession.ts"],(function(t){var i,e,r,n,l,a,u,o,s,c,p,f,y,h,m;return{setters:[function(t){i=t.applyDecoratedDescriptor,e=t.inheritsLoose,r=t.initializerDefineProperty,n=t.assertThisInitialized,l=t.createClass},function(t){a=t.cclegacy,u=t._decorator,o=t.Color,s=t.math},function(t){c=t.KiwiInterfaceComponent},function(t){p=t.KiwiText},function(t){f=t.WhatAttribute},function(t){y=t.TyrantUtils},function(t){h=t.TextFormatter},function(t){m=t.GameSession}],execute:function(){var C,k,w,v,S;a._RF.push({},"fdce27GBEZP24iGnQDVz0CF","SekiwityClickMultiplierCounter",void 0);var g=u.ccclass,M=u.property;t("SekiwityClickMultiplierCounter",(C=g("SekiwityClickMultiplierCounter"),k=M({type:p}),C((S=i((v=function(t){function i(){for(var i,e=arguments.length,l=new Array(e),a=0;a<e;a++)l[a]=arguments[a];return i=t.call.apply(t,[this].concat(l))||this,r(i,"multiplierCounter",S,n(i)),i.fontSizeRange={min:36,max:80},i.counterColor=new o(255,255,255),i}e(i,t);var a=i.prototype;return a.initialize=function(i){t.prototype.initialize.call(this,i),i.registerLiveDataElement(this),this.liveDataArray.push(m.getSekiwityMultiplier()),this.liveDataArray.push(m.getAttribute(f.sekiwity_clickMultiplierLimit))},a.onDataUpdate=function(){var t=this.sekiwityClickMultiplier.currentValue,i=s.inverseLerp(this.sekiwityClickMultiplier.defaultValue,this.maximumMultiplier.currentValue,t),e=y.easeOutIn(i);this.multiplierCounter.fontSize=s.lerp(this.fontSizeRange.min,this.fontSizeRange.max,e);var r=h.formatUniqueText_sekiwityClickMultiplier(t)+"x";this.multiplierCounter.text=r;var n=t>=1.5?this.counterColor:y.setColorAlpha(this.counterColor,s.lerp(.3,1,2*(t-1)));this.multiplierCounter.color=n},l(i,[{key:"sekiwityClickMultiplier",get:function(){return this.liveDataArray[0]}},{key:"maximumMultiplier",get:function(){return this.liveDataArray[1]}}]),i}(c)).prototype,"multiplierCounter",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=v))||w));a._RF.pop()}}}));

System.register("chunks:///_virtual/SekiwityKiwiAnimator.ts",["./rollupPluginModLoBabelHelpers.js","cc","./KiwiBodyAnimator.ts","./SimpleAnimator.ts"],(function(i){var t,e,n,a,r,o,l,s,c,u,p;return{setters:[function(i){t=i.applyDecoratedDescriptor,e=i.inheritsLoose,n=i.initializerDefineProperty,a=i.assertThisInitialized,r=i.createClass},function(i){o=i.cclegacy,l=i._decorator,s=i.SpriteFrame},function(i){c=i.KiwiBodyAnimator},function(i){u=i.AnimateShake,p=i.Animate}],execute:function(){var h,d,k,f,m,y,w;o._RF.push({},"0de02uyn4JC/rT2B4KuLaPT","SekiwityKiwiAnimator",void 0);var S=l.ccclass,g=l.property,A=(i("SekiwityKiwiAnimator",(h=S("SekiwityKiwiAnimator"),d=g({type:s}),k=g({type:s}),h((y=t((m=function(i){function t(){for(var t,e=arguments.length,r=new Array(e),o=0;o<e;o++)r[o]=arguments[o];return t=i.call.apply(i,[this].concat(r))||this,n(t,"normalBeak",y,a(t)),n(t,"strainingBeak",w,a(t)),t.defaultBodyColorIndex=1,t.isShaking=!1,t}e(t,i);var o=t.prototype;return o.onInitialize=function(i){},o.doLittleShake=function(i){this.isShaking=!0,this.beakSprite.spriteFrame=this.strainingBeak,this.animator.addAnimationBlock([new u(this.node,2,.075,i,[new A(this)])])},o.endLittleShake=function(){this.isShaking=!1,this.beakSprite.spriteFrame=this.normalBeak},o.updateWaddling=function(){this.isShaking||i.prototype.updateWaddling.call(this)},r(t,[{key:"kiwiIdentifier",get:function(){return"sekiwityMage"}}]),t}(c)).prototype,"normalBeak",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=t(m.prototype,"strainingBeak",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),f=m))||f)),i("SpecialAnimateCallback_endLittleShake",function(i){function t(t){var e;return(e=i.call(this,t,0,[])||this).sekiwityKiwi=void 0,e}e(t,i);var n=t.prototype;return n.doAnimationInitialization=function(){this.objectToAnimate.endLittleShake()},n.doAnimationActions=function(){},t}(p)));o._RF.pop()}}}));

System.register("chunks:///_virtual/SekiwityViewController.ts",["./rollupPluginModLoBabelHelpers.js","cc","./TyrantUtils.ts","./GameParameters.ts","./SekiwityKiwiAnimator.ts","./SimpleAnimator.ts","./GameSession.ts","./StaticDataStructures.ts","./PointerInputHandler.ts","./KiwiButtonController.ts"],(function(t){var i,e,n,o,r,s,a,l,u,h,c,d,m,p,g,f,y,w,T,S,k,C,b,A;return{setters:[function(t){i=t.applyDecoratedDescriptor,e=t.inheritsLoose,n=t.initializerDefineProperty,o=t.assertThisInitialized,r=t.createClass},function(t){s=t.cclegacy,a=t._decorator,l=t.Sprite,u=t.ParticleSystem2D,h=t.Node,c=t.math,d=t.Component},function(t){m=t.EaseType,p=t.TyrantUtils},function(t){g=t.ColorFormatter},function(t){f=t.SekiwityKiwiAnimator},function(t){y=t.SimpleAnimator,w=t.AnimateUnique_KiwiBoing,T=t.AnimateColorFromTo},function(t){S=t.GameSession},function(t){k=t.WhatAttribute},function(t){C=t.PointerInputHandler,b=t.PointerEventTypes},function(t){A=t.KiwiButtonPressAction}],execute:function(){var v,D,_,E,P,H,I,O,L,R,B,F,N,z,M,V,x,K,U,j,G,q,J;s._RF.push({},"7181d8vlMJFSbLuPxI7U5FH","SekiwityViewController",void 0);var W=a.ccclass,Y=a.property,Q=(t("SekiwityViewController",(v=W("SekiwityViewController"),D=Y({type:l}),_=Y({type:u}),E=Y({type:l}),P=Y({type:h}),H=Y({type:f}),I=Y({type:h}),O=Y({type:h}),L=Y({type:l}),R=Y({type:h}),B=Y({type:h}),v((z=i((N=function(t){function i(){for(var i,e=arguments.length,r=new Array(e),s=0;s<e;s++)r[s]=arguments[s];return i=t.call.apply(t,[this].concat(r))||this,n(i,"chargeProgressLightningSprite",z,o(i)),n(i,"chargingBoltsParticleSystem",M,o(i)),n(i,"sekiwityHighlightSprite",V,o(i)),n(i,"sekiwityFrontNode",x,o(i)),n(i,"sekiwityKiwi",K,o(i)),n(i,"sekiwityLeftDoor",U,o(i)),n(i,"sekiwityRightDoor",j,o(i)),n(i,"cloudSprites",G,o(i)),n(i,"lightningStrikeNode",q,o(i)),n(i,"xRayEffectNode",J,o(i)),i.liveDataArray=[],i.inputHandler=new C,i._isHovered=!1,i._mouseDown=!1,i.boltEmissionEndTime=0,i.currentChargeDuration=1,i.currentLightningDuration=1,i.timeItTakesToCloseDoor=.25,i.doorOpenScale=.2,i.doorClosingStartTime=0,i.doorClosingEndTime=0,i.doorOpeningStartTime=0,i.doorOpeningEndTime=0,i.chargeStartTime=0,i.chargeEndTime=0,i.lightningStartTime=0,i.lightningEndTime=0,i.isFlickered=!1,i.lightningFlickerInterval=.15,i._shotCooldown=0,i._shotInterval=.05,i.lastSimulationTime=0,i.lastCloudColorProgress=0,i.animator=new y(1,!0),i.cloudRotationSpeeds=[8,11,-9],i.cloudRotationTimer=0,i.cloudFloatingOffset=void 0,i}e(i,t);var s=i.prototype;return s.initialize=function(){this.sekiwityKiwi.initialize(0),this.updateAnimations(0),this.setCloudColor(1),this.liveDataArray.push(S.getAttribute(k.gun_ammoLimit)),this.liveDataArray.push(S.getAttribute(k.gun_currentAmmo)),this.inputHandler.registerNodeForPointerEvents(this.sekiwityHighlightSprite.node),this.inputHandler.addActionToInput(b.Mouse_enter,new Q(this)),this.inputHandler.addActionToInput(b.Mouse_exit,new X(this)),this.inputHandler.addActionToInput(b.Mouse_down,new Z(this)),this.inputHandler.addActionToInput(b.Mouse_up,new $(this),!0),this.inputHandler.addActionToInput(b.Touch_start,new tt(this),!0),this.inputHandler.addActionToInput(b.Touch_end,new it(this))},s.onHoverEnter=function(){this._isHovered=!0,this.sekiwityHighlightSprite.enabled=this._isHovered},s.onHoverExit=function(){this._isHovered=!1,this._mouseDown=!1,this.sekiwityHighlightSprite.enabled=this._isHovered},s.onMouseDown=function(){this._mouseDown=!0,this.doSekiwityClick()},s.onMouseUp=function(){this._mouseDown=!1},s.onTouchStart=function(){this._mouseDown=!0,this.doSekiwityClick()},s.onTouchEnd=function(){this._mouseDown=!1},s.doSekiwityClick=function(){this.sekiwityFrontNode.setScale(1.05,.95,1),this.animator.addAnimationBlock([new w(this.sekiwityFrontNode,.6,[]),new T(this.chargeProgressLightningSprite,g.color_white,g.color_lightningYellow,.25,[]).setEaseType(m.In)]),S.sekiwityClickedCallback()},s.emitChargingBoltsFromBanner=function(){this.chargingBoltsParticleSystem.emissionRate=50,this.boltEmissionEndTime=this.lastSimulationTime+.05},s.updateChargingBoltParticleSystem=function(){this.chargingBoltsParticleSystem.emissionRate>0&&this.lastSimulationTime>this.boltEmissionEndTime&&(this.chargingBoltsParticleSystem.emissionRate=0)},s.startCharging=function(t,i){this.chargeStartTime=t,this.chargeEndTime=t+i,this.currentChargeDuration=i},s.startLightning=function(t,i){this.sekiwityKiwi.doLittleShake(i),this.lightningStartTime=t,this.lightningEndTime=t+i,this.currentLightningDuration=i,this.lightningStrikeNode.active=!0,this.closeDoorsIfTheresTime(i)},s.closeDoorsIfTheresTime=function(t){var i=t-2*this.timeItTakesToCloseDoor;i<this.timeItTakesToCloseDoor||(this.doorClosingStartTime=this.lightningStartTime,this.doorClosingEndTime=this.doorClosingStartTime+this.timeItTakesToCloseDoor,this.doorOpeningStartTime=this.doorClosingEndTime+i,this.doorOpeningEndTime=this.doorOpeningStartTime+this.timeItTakesToCloseDoor)},s.updateSimulationTime=function(t){var i=t-this.lastSimulationTime;if(this.inputHandler.processLastInput(),this.updateDoorAnimation(t),this.updateChargeAnimation(t),this.updateLightningAnimation(t),this.updateChargingBoltParticleSystem(),this.lastSimulationTime=t,this.ammoLimitAttribute.isUnlocked){this._shotCooldown-=i;var e=this.currentAmmoAttribute.currentValue;this._mouseDown&&this._shotCooldown<=0&&e>0&&(this.doSekiwityClick(),this.currentAmmoAttribute.setValue(e-1),this._shotCooldown=this._shotInterval)}},s.updateDoorAnimation=function(t){if(!(t<this.doorClosingStartTime||this.lastSimulationTime>=this.doorOpeningEndTime)){var i;if(t>this.doorOpeningStartTime)i=c.lerp(this.doorOpenScale,1,1-p.easeThirdInOut((t-this.doorOpeningStartTime)/this.timeItTakesToCloseDoor));else{if(!(this.lastSimulationTime<this.doorClosingEndTime))return;i=c.lerp(this.doorOpenScale,1,p.easeThirdInOut((t-this.doorClosingStartTime)/this.timeItTakesToCloseDoor))}i=c.clamp(i,0,1),this.sekiwityLeftDoor.setScale(1,i,1),this.sekiwityRightDoor.setScale(1,i,1)}},s.updateChargeAnimation=function(t){if(!(this.lastSimulationTime>=this.chargeEndTime)){var i=c.clamp((t-this.chargeStartTime)/this.currentChargeDuration,0,1);this.chargeProgressLightningSprite.node.setScale(1,i,1),this.setCloudColor(p.easeIn(i))}},s.updateLightningAnimation=function(t){if(!(this.lastSimulationTime>=this.lightningEndTime))if(t>this.lightningEndTime)this.setCloudColor(0),this.lightningStrikeNode.active=!1,this.xRayEffectNode.active=!1;else{var i=t-this.lightningStartTime,e=c.repeat(i,2*this.lightningFlickerInterval)>this.lightningFlickerInterval;if(this.isFlickered!=e){var n=1-.3*i/this.currentLightningDuration;this.isFlickered=e,this.setCloudColor(n*(e?.6:1)),this.lightningStrikeNode.setScale(e?-1:1,1,1),this.xRayEffectNode.active=e}}},s.setCloudColor=function(t){if((t=c.clamp(t,0,1))!=this.lastCloudColorProgress){for(var i=p.lerpColors(g.cloudColor_clear,g.cloudColor_storm,t),e=0;e<this.cloudSprites.length;e++)this.cloudSprites[e].color=i;this.lastCloudColorProgress=t}},s.updateAnimations=function(t){this.animator.updateAnimations(t),this.sekiwityKiwi.updateAnimations(t),this.updateCloudRotations(t)},s.updateCloudRotations=function(t){this.cloudRotationTimer=(this.cloudRotationTimer+t)%360;for(var i=0;i<this.cloudSprites.length;i++)this.cloudSprites[i].node.setRotationFromEuler(0,0,this.cloudRotationTimer*this.cloudRotationSpeeds[i])},r(i,[{key:"ammoLimitAttribute",get:function(){return this.liveDataArray[0]}},{key:"currentAmmoAttribute",get:function(){return this.liveDataArray[1]}}]),i}(d)).prototype,"chargeProgressLightningSprite",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=i(N.prototype,"chargingBoltsParticleSystem",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),V=i(N.prototype,"sekiwityHighlightSprite",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=i(N.prototype,"sekiwityFrontNode",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),K=i(N.prototype,"sekiwityKiwi",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),U=i(N.prototype,"sekiwityLeftDoor",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),j=i(N.prototype,"sekiwityRightDoor",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),G=i(N.prototype,"cloudSprites",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),q=i(N.prototype,"lightningStrikeNode",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),J=i(N.prototype,"xRayEffectNode",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=N))||F)),t("OnHoverEnter_sekiwityView",function(t){function i(){return t.apply(this,arguments)||this}return e(i,t),i.prototype.doButtonPressAction=function(t){this.interactionObject.onHoverEnter()},i}(A))),X=t("OnHoverExit_sekiwityView",function(t){function i(){return t.apply(this,arguments)||this}return e(i,t),i.prototype.doButtonPressAction=function(t){this.interactionObject.onHoverExit()},i}(A)),Z=t("OnMouseDown_sekiwityView",function(t){function i(){return t.apply(this,arguments)||this}return e(i,t),i.prototype.doButtonPressAction=function(t){this.interactionObject.onMouseDown()},i}(A)),$=t("OnMouseUp_sekiwityView",function(t){function i(){return t.apply(this,arguments)||this}return e(i,t),i.prototype.doButtonPressAction=function(t){this.interactionObject.onMouseUp()},i}(A)),tt=t("OnTouchStart_sekiwityView",function(t){function i(){return t.apply(this,arguments)||this}return e(i,t),i.prototype.doButtonPressAction=function(t){this.interactionObject.onTouchStart()},i}(A)),it=t("OnTouchEnd_sekiwityView",function(t){function i(){return t.apply(this,arguments)||this}return e(i,t),i.prototype.doButtonPressAction=function(t){this.interactionObject.onTouchEnd()},i}(A));s._RF.pop()}}}));

System.register("chunks:///_virtual/SelectedSkillNodeIndicator.ts",["./rollupPluginModLoBabelHelpers.js","cc","./TyrantUtils.ts","./KiwiText.ts","./GameParameters.ts"],(function(i){var t,e,n,o,r,a,s,l,c,d,u,h,m;return{setters:[function(i){t=i.applyDecoratedDescriptor,e=i.inheritsLoose,n=i.initializerDefineProperty,o=i.assertThisInitialized},function(i){r=i.cclegacy,a=i._decorator,s=i.Node,l=i.Vec3,c=i.math,d=i.Component},function(i){u=i.TyrantUtils},function(i){h=i.KiwiText},function(i){m=i.ColorFormatter}],execute:function(){var w,p,f,T,g,y,F,v,x;r._RF.push({},"d866beusu9L6ZHsoslCty+/","SelectedSkillNodeIndicator",void 0);var N=a.ccclass,P=a.property;i("SelectedSkillNodeIndicator",(w=N("SelectedSkillNodeIndicator"),p=P({type:h}),f=P({type:s}),T=P({type:s}),w((F=t((y=function(i){function t(){for(var t,e=arguments.length,r=new Array(e),a=0;a<e;a++)r[a]=arguments[a];return t=i.call.apply(i,[this].concat(r))||this,n(t,"warnintTextField",F,o(t)),n(t,"arrowFrameNode",v,o(t)),n(t,"arrowRotatorNode",x,o(t)),t.animationTime=0,t}e(t,i);var r=t.prototype;return r.moveToNodePosition=function(i){var t=i.getWorldPosition();this.node.setWorldPosition(t.x,t.y+40,t.z),this.animationTime=0,this.updateAnimation(0),this.node.active=!0},r.showWarningForParameters=function(i,t,e){t?this.hideWarning():i?e?this.hideWarning():this.showWarning_clickToPurchase():this.showWarning_missingConnection()},r.hideWarning=function(){this.warnintTextField.node.active=!1},r.showWarning_clickToPurchase=function(){this.warnintTextField.node.active=!0,this.warnintTextField.color=m.color_white,this.warnintTextField.text="CLICK\nTO BUY"},r.showWarning_missingConnection=function(){this.warnintTextField.node.active=!0,this.warnintTextField.color=m.colorScheme_warningRed.lighterColor,this.warnintTextField.text="LOCKED"},r.updateAnimation=function(i){if(0!=this.node.activeInHierarchy){this.animationTime=(this.animationTime+i)%1,this.arrowRotatorNode.setRotationFromEuler(0,180*this.animationTime,0);var t=new l(0,0-10*u.easeInOut(c.pingPong(this.animationTime,.5)/.5));this.arrowFrameNode.setPosition(t),this.arrowRotatorNode.setPosition(t)}},t}(d)).prototype,"warnintTextField",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=t(y.prototype,"arrowFrameNode",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=t(y.prototype,"arrowRotatorNode",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=y))||g));r._RF.pop()}}}));

System.register("chunks:///_virtual/SimpleAnimator.ts",["./rollupPluginModLoBabelHelpers.js","cc","./TyrantUtils.ts","./AudioController.ts"],(function(t){var i,o,n,e,s,a,r,h,l;return{setters:[function(t){i=t.createClass,o=t.inheritsLoose},function(t){n=t.cclegacy,e=t.Vec3,s=t.math,a=t.Color},function(t){r=t.TyrantUtils,h=t.EaseType},function(t){l=t.AudioController}],execute:function(){n._RF.push({},"2b8f6FXYiFIm4BtHWQnVluY","SimpleAnimator",void 0);var c=t("SimpleAnimator",function(){var t=o.prototype;function o(t,i){this.activeAnimationArray=[],this.animationQueueArray=[],this.nextAnimationBlock=[],this._scaleSignOverride=0,this.allowAnimationOverride=void 0,this.hurryMultiplier=void 0,this.maxIterations=8,this.allowAnimationOverride=i,this.hurryMultiplier=t}return t.setScaleOverride=function(t){this._scaleSignOverride=t},t.updateAnimations=function(t){this.nextAnimationBlock.length>0&&(t*=this.hurryMultiplier),this.activeAnimationArray=this.activeAnimationArray.filter((function(i){return 0==i.updateAnimation(t)})),0==this.activeAnimationArray.length&&0==this.animationQueueArray.length&&this.nextAnimationBlock.length>0&&this.queueNextBlock(),this.addQueuedAnimations()},t.completeAllAnimationsImmediately=function(){for(;this.activeAnimationArray.length>0;)if(this.updateAnimations(999),0>=this.maxIterations){console.error("animator failed to complete all animations, with "+this.activeAnimationArray.length+" animations left");break}},t.addAnimationBlock=function(t){1==this.allowAnimationOverride&&this.discardAllAnimations(),this.nextAnimationBlock.length=0,this.nextAnimationBlock=this.nextAnimationBlock.concat(t)},t.queueNextBlock=function(){this.addAnimations(this.nextAnimationBlock),this.nextAnimationBlock.length=0},t.addAnimations=function(t){this.animationQueueArray=this.animationQueueArray.concat(t)},t.addQueuedAnimations=function(){for(var t=0;t<this.animationQueueArray.length;t++)this.animationQueueArray[t].startAnimation(this);this.activeAnimationArray=this.activeAnimationArray.concat(this.animationQueueArray),this.animationQueueArray.length=0},t.discardAllAnimations=function(){this.activeAnimationArray.length=0,this.animationQueueArray.length=0,this.nextAnimationBlock.length=0},i(o,[{key:"isAnimating",get:function(){return this.activeAnimationArray.length>0||this.animationQueueArray.length>0||this.nextAnimationBlock.length>0}},{key:"scaleSignOverride",get:function(){return this._scaleSignOverride}}]),o}()),u=(t("OnePerObjectAnimator",function(t){function i(){for(var i,o=arguments.length,n=new Array(o),e=0;e<o;e++)n[e]=arguments[e];return(i=t.call.apply(t,[this].concat(n))||this).queuedObjectToAnimationMap=new Map,i.activeObjectToAnimationMap=new Map,i}o(i,t);var n=i.prototype;return n.addAnimationBlock=function(t){console.log("One per object animator can't override blocks, animations wll be added as if AddAnimations was used"),this.addAnimations(t)},n.addAnimations=function(t){for(var i=0;i<t.length;i++)this.queuedObjectToAnimationMap.set(t[i].objectToAnimate,t[i])},n.updateAnimations=function(t){var i=this;this.activeObjectToAnimationMap.forEach((function(o,n){o.updateAnimation(t)&&i.activeObjectToAnimationMap.delete(n)})),this.addQueuedAnimations()},n.discardAllAnimationsWithObjet=function(t){this.queuedObjectToAnimationMap.delete(t),this.activeObjectToAnimationMap.delete(t)},n.addQueuedAnimations=function(){var t=this;this.queuedObjectToAnimationMap.forEach((function(i,o){t.activeObjectToAnimationMap.set(o,i),t.queuedObjectToAnimationMap.delete(o),i.startAnimation(t)}))},n.discardAllAnimations=function(){this.queuedObjectToAnimationMap.clear(),this.activeObjectToAnimationMap.clear()},i}(c)),t("Animate",function(){function t(t,i,o){this.timer=0,this.duration=void 0,this.progress=0,this.sourceAnimator=void 0,this.chainedAnimations=void 0,this.easeType=h.InOut,this._objectToAnimate=void 0,this.hasInitialized=!1,this.lastDeltaTime=0,this._objectToAnimate=t,this.duration=i,this.chainedAnimations=o}var o=t.prototype;return o.setEaseType=function(t){return this.easeType=t,this},o.startAnimation=function(t){this.hasInitialized=!0,this.sourceAnimator=t,this.doAnimationInitialization()},o.updateProgress=function(t){this.timer=Math.min(this.timer+t,this.duration),this.progress=r.ease(this.timer/this.duration,this.easeType),this.lastDeltaTime=t},o.updateAnimation=function(t){return this.hasInitialized?(this.updateProgress(t),this.doAnimationActions(),this.isCompleted()):(console.error("animation being updated without initialization"),!1)},o.isCompleted=function(){if(this.timer<this.duration)return!1;if(this.chainedAnimations.length>0)for(var t=0;t<this.chainedAnimations.length;t++)this.sourceAnimator.addAnimations([this.chainedAnimations[t]]);return this.chainedAnimations=null,!0},i(t,[{key:"objectToAnimate",get:function(){return this._objectToAnimate}}]),t}()));t("AnimateMovement",function(t){function i(i,o,n,e){var s;return(s=t.call(this,i,n,e)||this).startPosition=void 0,s.endPosition=void 0,s.offSet=void 0,s.endPosition=o,s}o(i,t);var n=i.prototype;return n.doAnimationInitialization=function(){this.startPosition=this.objectToAnimate.getPosition(),this.offSet=new e(this.endPosition.x-this.startPosition.x,this.endPosition.y-this.startPosition.y,this.endPosition.z-this.startPosition.z)},n.doAnimationActions=function(){this.objectToAnimate.setPosition(new e(this.startPosition.x+this.offSet.x*this.progress,this.startPosition.y+this.offSet.y*this.progress,this.startPosition.z+this.offSet.z*this.progress))},i}(u)),t("AnimateShake",function(t){function i(i,o,n,e,s){var a;return(a=t.call(this,i,e,s)||this).startPosition=void 0,a.shakeSign=0,a.shakeInterval=void 0,a.offset=void 0,a.offset=o,a.shakeInterval=n,a}o(i,t);var n=i.prototype;return n.doAnimationInitialization=function(){this.startPosition=this.objectToAnimate.getPosition()},n.doAnimationActions=function(){if(this.progress>=1)this.objectToAnimate.setPosition(this.startPosition);else{var t=s.repeat(this.timer,2*this.shakeInterval)>this.shakeInterval?1:-1;this.shakeSign!=t&&(this.shakeSign=t,this.objectToAnimate.setPosition(this.startPosition.x+this.offset*this.shakeSign,this.startPosition.y,this.startPosition.z))}},i}(u)),t("AnimateMoveToTargetNode",function(t){function i(i,o,n,e,s){var a;return(a=t.call(this,i,e,s)||this).startPosition=void 0,a.targetPositionNode=void 0,a.offSet=void 0,a.targetPositionNode=o,a.offSet=n,a}o(i,t);var n=i.prototype;return n.doAnimationInitialization=function(){this.startPosition=this.objectToAnimate.getPosition()},n.doAnimationActions=function(){var t=this.targetPositionNode.getPosition();this.objectToAnimate.setPosition(new e(s.lerp(this.startPosition.x,t.x+this.offSet.x,this.progress),s.lerp(this.startPosition.y,t.y+this.offSet.y,this.progress),s.lerp(this.startPosition.z,t.z+this.offSet.z,this.progress)))},i}(u)),t("AnimateSpriteFillTo",function(t){function i(i,o,n,e){var s;return(s=t.call(this,i,n,e)||this).startFill=void 0,s.endFill=void 0,s.endFill=o,s}o(i,t);var n=i.prototype;return n.doAnimationInitialization=function(){this.startFill=this.objectToAnimate.fillRange},n.doAnimationActions=function(){this.objectToAnimate.fillRange=s.lerp(this.startFill,this.endFill,this.progress)},i}(u)),t("AnimateScaleTo",function(t){function i(i,o,n,e){var s;return(s=t.call(this,i,n,e)||this).startScale=void 0,s.endScale=void 0,s.scaleOffset=void 0,s.endScale=o,s}o(i,t);var n=i.prototype;return n.doAnimationInitialization=function(){this.startScale=this.objectToAnimate.getScale(),0!=this.sourceAnimator.scaleSignOverride&&(this.startScale.x=Math.abs(this.startScale.x),this.endScale.x=Math.abs(this.startScale.x)),this.scaleOffset=new e(this.endScale.x-this.startScale.x,this.endScale.y-this.startScale.y,this.endScale.z-this.startScale.z)},n.doAnimationActions=function(){var t=new e(this.startScale.x+this.scaleOffset.x*this.progress,this.startScale.y+this.scaleOffset.y*this.progress,this.startScale.z+this.scaleOffset.z*this.progress);0!=this.sourceAnimator.scaleSignOverride&&(t.x=Math.abs(t.x)*this.sourceAnimator.scaleSignOverride),this.objectToAnimate.setScale(t)},i}(u)),t("AnimateScaleFromTo",function(t){function i(i,o,n,e,s){var a;return(a=t.call(this,i,e,s)||this).startScale=void 0,a.endScale=void 0,a.scaleOffset=void 0,a.startScale=o,a.endScale=n,a}o(i,t);var n=i.prototype;return n.doAnimationInitialization=function(){0!=this.sourceAnimator.scaleSignOverride&&(this.startScale.x=Math.abs(this.startScale.x),this.endScale.x=Math.abs(this.startScale.x)),this.scaleOffset=new e(this.endScale.x-this.startScale.x,this.endScale.y-this.startScale.y,this.endScale.z-this.startScale.z)},n.doAnimationActions=function(){var t=new e(this.startScale.x+this.scaleOffset.x*this.progress,this.startScale.y+this.scaleOffset.y*this.progress,this.startScale.z+this.scaleOffset.z*this.progress);0!=this.sourceAnimator.scaleSignOverride&&(t.x=Math.abs(t.x)*this.sourceAnimator.scaleSignOverride),this.objectToAnimate.setScale(t)},i}(u)),t("AnimateUITransformSizeFromTo",function(t){function i(i,o,n,e,s){var a;return(a=t.call(this,i,e,s)||this).startSize=void 0,a.endSize=void 0,a.startSize=o,a.endSize=n,a}o(i,t);var n=i.prototype;return n.doAnimationInitialization=function(){},n.doAnimationActions=function(){this.objectToAnimate.width=s.lerp(this.startSize.x,this.endSize.x,this.progress),this.objectToAnimate.height=s.lerp(this.startSize.y,this.endSize.y,this.progress)},i}(u)),t("AnimateAlpha",function(t){function i(i,o,n,e){var s;return(s=t.call(this,i,n,e)||this).startColor=void 0,s.endAlpha=void 0,s.endColor=void 0,s.endAlpha=255*o,s}o(i,t);var n=i.prototype;return n.doAnimationInitialization=function(){this.startColor=this.objectToAnimate.color,this.endColor=new a(this.startColor.r,this.startColor.g,this.startColor.b,this.endAlpha)},n.doAnimationActions=function(){this.objectToAnimate.color=new a(this.startColor.r,this.startColor.g,this.startColor.b,s.lerp(this.startColor.a,this.endColor.a,this.progress))},i}(u)),t("AnimateFadeIn",function(t){function i(i,o,n){var e;return(e=t.call(this,i,o,n)||this).startColor=void 0,e.endColor=void 0,e}o(i,t);var n=i.prototype;return n.doAnimationInitialization=function(){this.startColor=new a(this.objectToAnimate.color.r,this.objectToAnimate.color.g,this.objectToAnimate.color.b,0),this.objectToAnimate.color=this.startColor,this.endColor=new a(this.startColor.r,this.startColor.g,this.startColor.b,255)},n.doAnimationActions=function(){this.objectToAnimate.color=new a(this.startColor.r,this.startColor.g,this.startColor.b,s.lerp(this.startColor.a,this.endColor.a,this.progress))},i}(u)),t("AnimateFadeOut",function(t){function i(i,o,n){var e;return(e=t.call(this,i,o,n)||this).startColor=void 0,e.endColor=void 0,e}o(i,t);var n=i.prototype;return n.doAnimationInitialization=function(){this.startColor=this.objectToAnimate.color,this.endColor=new a(this.startColor.r,this.startColor.g,this.startColor.b,0)},n.doAnimationActions=function(){this.objectToAnimate.color=new a(this.startColor.r,this.startColor.g,this.startColor.b,s.lerp(this.startColor.a,this.endColor.a,this.progress))},i}(u)),t("AnimateColor",function(t){function i(i,o,n,e){var s;return(s=t.call(this,i,n,e)||this).startColor=void 0,s.endColor=void 0,s.endColor=o,s}o(i,t);var n=i.prototype;return n.doAnimationInitialization=function(){this.startColor=this.objectToAnimate.color},n.doAnimationActions=function(){this.objectToAnimate.color=new a(s.lerp(this.startColor.r,this.endColor.r,this.progress),s.lerp(this.startColor.g,this.endColor.g,this.progress),s.lerp(this.startColor.b,this.endColor.b,this.progress),s.lerp(this.startColor.a,this.endColor.a,this.progress))},i}(u)),t("AnimateColorFromTo",function(t){function i(i,o,n,e,s){var a;return(a=t.call(this,i,e,s)||this).startColor=void 0,a.endColor=void 0,a.endColor=n,a.startColor=o,a}o(i,t);var n=i.prototype;return n.doAnimationInitialization=function(){},n.doAnimationActions=function(){this.objectToAnimate.color=new a(s.lerp(this.startColor.r,this.endColor.r,this.progress),s.lerp(this.startColor.g,this.endColor.g,this.progress),s.lerp(this.startColor.b,this.endColor.b,this.progress),s.lerp(this.startColor.a,this.endColor.a,this.progress))},i}(u)),t("AnimateKiwiTextColor",function(t){function i(i,o,n,e){var s;return(s=t.call(this,i,n,e)||this).startColor=void 0,s.endColor=void 0,s.endColor=o,s}o(i,t);var n=i.prototype;return n.doAnimationInitialization=function(){this.startColor=this.objectToAnimate.color},n.doAnimationActions=function(){this.objectToAnimate.color=new a(s.lerp(this.startColor.r,this.endColor.r,this.progress),s.lerp(this.startColor.g,this.endColor.g,this.progress),s.lerp(this.startColor.b,this.endColor.b,this.progress),s.lerp(this.startColor.a,this.endColor.a,this.progress))},i}(u)),t("AnimateRotateTo",function(t){function i(i,o,n,e){var s;return(s=t.call(this,i,n,e)||this).startRotation=void 0,s.targetRotation=void 0,s.targetRotation=o,s}o(i,t);var n=i.prototype;return n.doAnimationInitialization=function(){var t=this.objectToAnimate.eulerAngles;this.startRotation=new e(t.x,t.y,t.z)},n.doAnimationActions=function(){this.objectToAnimate.setRotationFromEuler(this.startRotation.x,this.startRotation.y,s.lerp(this.startRotation.z,this.targetRotation,this.progress))},i}(u)),t("AnimateRelativeRotation",function(t){function i(i,o,n,e){var s;return(s=t.call(this,i,n,e)||this).startRotation=void 0,s.rotationOffset=void 0,s.rotationOffset=o,s}o(i,t);var n=i.prototype;return n.doAnimationInitialization=function(){var t=this.objectToAnimate.eulerAngles;this.startRotation=new e(t.x,t.y,t.z)},n.doAnimationActions=function(){this.objectToAnimate.setRotationFromEuler(this.startRotation.x,this.startRotation.y,this.startRotation.z+this.progress*this.rotationOffset)},i}(u)),t("AnimateWait",function(t){function i(i,o){return t.call(this,null,i,o)||this}o(i,t);var n=i.prototype;return n.doAnimationInitialization=function(){},n.doAnimationActions=function(){},i}(u)),t("AnimateInstant_SetNodeActiveState",function(t){function i(i,o){var n;return(n=t.call(this,i,.001,[])||this).targetState=void 0,n.targetState=o,n}o(i,t);var n=i.prototype;return n.doAnimationInitialization=function(){this.objectToAnimate.active=this.targetState},n.doAnimationActions=function(){},i}(u)),t("AnimateMoveInLaunchTrajectory",function(t){function i(i,o,n,s,a){var r;return(r=t.call(this,i,s,a)||this).startPosition=void 0,r.horizontalOffset=void 0,r.peakOffset=void 0,r.easeType=h.Linear,r.parabolaPortion=.5,r.offSet=new e(0,0,0),r.horizontalOffset=n,r.peakOffset=o,r}o(i,t);var n=i.prototype;return n.setEaseType=function(t){return console.log("can't set easeType for complex animations like LaunchTrajectory"),this},n.doAnimationInitialization=function(){this.startPosition=this.objectToAnimate.getPosition()},n.doAnimationActions=function(){var t,i=this.progress;this.offSet.x=s.lerp(0,this.horizontalOffset,i/this.parabolaPortion),t=i<this.parabolaPortion?1-Math.pow(1-s.pingPong(2*i,this.parabolaPortion)/this.parabolaPortion,3):1-Math.pow(i/this.parabolaPortion,3),this.offSet.y=this.peakOffset*t,this.objectToAnimate.setPosition(new e(this.startPosition.x+this.offSet.x,this.startPosition.y+this.offSet.y,this.startPosition.z+this.offSet.z))},i}(u)),t("AnimateUnique_CastleTrumpeter",function(t){function i(i,o,n){var e;return(e=t.call(this,i,o,n)||this).easeType=h.Linear,e.animationPoints=[{pointProgress:0,pointValue:.7},{pointProgress:.05,pointValue:.8},{pointProgress:.1,pointValue:.65},{pointProgress:.14,pointValue:.8},{pointProgress:.17,pointValue:.65},{pointProgress:.2,pointValue:.8},{pointProgress:.28,pointValue:.61},{pointProgress:.37,pointValue:1.025},{pointProgress:.48,pointValue:.57},{pointProgress:.54,pointValue:.81},{pointProgress:.6,pointValue:.59},{pointProgress:.66,pointValue:1.03},{pointProgress:.69,pointValue:.995},{pointProgress:.73,pointValue:1.1},{pointProgress:.76,pointValue:1},{pointProgress:.81,pointValue:1.1},{pointProgress:.83,pointValue:1},{pointProgress:.88,pointValue:1.1},{pointProgress:.9,pointValue:1},{pointProgress:.93,pointValue:1.1},{pointProgress:1,pointValue:.8}],e.rotationAnimation_valueOffset=-.7403,e.rotationAnimation_magnitudeMultiplier=3.584,e.rotationDelta=15,e}o(i,t);var n=i.prototype;return n.setEaseType=function(t){return console.log("can't set easeType for complex animations like CastleTrumpeter"),this},n.doAnimationInitialization=function(){l.instance.playOneShot("kazooFanfare")},n.doAnimationActions=function(){for(var t=0,i=1;i<this.animationPoints.length;i++)if(!(this.progress>this.animationPoints[i].pointProgress&&i+1<this.animationPoints.length)){t=i-1;break}var o=this.animationPoints[t],n=this.animationPoints[t+1],e=r.easeThirdInOut((this.progress-o.pointProgress)/(n.pointProgress-o.pointProgress)),a=s.lerp(o.pointValue,n.pointValue,e),h=this.rotationDelta*(a+this.rotationAnimation_valueOffset)*3.584;this.objectToAnimate.setScale(1,a,1),this.objectToAnimate.setRotationFromEuler(0,0,h)},i}(u)),t("AnimateUnique_KiwiBoing",function(t){function i(i,o,n){var e;return(e=t.call(this,i,o,n)||this).easeType=h.Linear,e.verticalPoints=[{pointProgress:0,pointValue:.9},{pointProgress:.04,pointValue:.886},{pointProgress:.3,pointValue:1.05},{pointProgress:.6,pointValue:.98},{pointProgress:.75,pointValue:1.01},{pointProgress:.9,pointValue:.995},{pointProgress:1,pointValue:1}],e}o(i,t);var n=i.prototype;return n.setEaseType=function(t){return console.log("can't set easeType for complex animations like CastleTrumpeter"),this},n.doAnimationInitialization=function(){},n.doAnimationActions=function(){for(var t=0,i=1;i<this.verticalPoints.length;i++)if(!(this.progress>this.verticalPoints[i].pointProgress&&i+1<this.verticalPoints.length)){t=i-1;break}var o=this.verticalPoints[t],n=this.verticalPoints[t+1],e=r.easeThirdInOut((this.progress-o.pointProgress)/(n.pointProgress-o.pointProgress)),a=1-s.lerp(o.pointValue,n.pointValue,e),h=1-a,l=1+a;0!=this.sourceAnimator.scaleSignOverride&&(l=Math.abs(l)*this.sourceAnimator.scaleSignOverride),this.objectToAnimate.setScale(l,h,1)},i}(u));n._RF.pop()}}}));

System.register("chunks:///_virtual/SimpleRotator.ts",["./rollupPluginModLoBabelHelpers.js","cc","./TyrantUtils.ts"],(function(t){var e,r,i,o,n,a,s,c,l,u;return{setters:[function(t){e=t.applyDecoratedDescriptor,r=t.inheritsLoose,i=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){n=t.cclegacy,a=t._decorator,s=t.Node,c=t.math,l=t.Component},function(t){u=t.TyrantUtils}],execute:function(){var p,h,m,d,f;n._RF.push({},"13176sO7udNDqdSKxYAhizs","SimpleRotator",void 0);var y=a.ccclass,g=a.property;t("SimpleRotator",(p=y("SimpleRotator"),h=g({type:s}),p((f=e((d=function(t){function e(){for(var e,r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return e=t.call.apply(t,[this].concat(n))||this,i(e,"carNode",f,o(e)),e.timer=0,e}return r(e,t),e.prototype.update=function(t){this.timer=(this.timer+t)%3,this.node.setRotationFromEuler(0,0,-120*this.timer);var e=.7+.1*u.easeInOut(c.pingPong(this.timer,.1)/.2);this.carNode.setScale(-.8,e,.8)},e}(l)).prototype,"carNode",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=d))||m));n._RF.pop()}}}));

System.register("chunks:///_virtual/SkillNodeConnector.ts",["./rollupPluginModLoBabelHelpers.js","cc","./KiwiInterfaceAnimator.ts","./GameParameters.ts","./SimpleAnimator.ts","./TyrantUtils.ts"],(function(t){var e,i,n,o,r,a,s,c,l,u,p,h,f,d,y;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,o=t.assertThisInitialized,r=t.createClass},function(t){a=t.cclegacy,s=t._decorator,c=t.Sprite,l=t.UITransform,u=t.Vec3},function(t){p=t.KiwiInterfaceAnimator},function(t){h=t.ColorFormatter},function(t){f=t.OnePerObjectAnimator,d=t.AnimateColor},function(t){y=t.TyrantUtils}],execute:function(){var m,v,S,A,g,D,N;a._RF.push({},"5afb5AcWsNNzZBiC2UPweNa","SkillNodeConnector",void 0);var C=s.ccclass,k=s.property;t("SkillNodeConnector",(m=C("SkillNodeConnector"),v=k({type:c}),S=k({type:l}),m((D=e((g=function(t){function e(){for(var e,i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];return e=t.call.apply(t,[this].concat(r))||this,n(e,"connectionSprites",D,o(e)),n(e,"containerTransform",N,o(e)),e.animator=new f(1,!0),e.spriteStates=[!1,!1],e}i(e,t);var a=e.prototype;return a.initialize=function(e){t.prototype.initialize.call(this,e),e.registerLiveDataElement(this)},a.bindToSkillNodes=function(t,e){this.liveDataArray.push(t),this.liveDataArray.push(e),this.updateActiveStatesFromNodeData()},a.setConnectionNodes=function(t,e){var i=[t.getWorldPosition().toVec2(),e.getWorldPosition().toVec2()],n=y.getVector2planeDistance(i[0],i[1]);this.node.setWorldPosition(new u(i[0].x+i[1].x,i[0].y+i[1].y,0).multiplyScalar(.5)),this.containerTransform.height=n.length(),this.node.setRotationFromEuler(0,0,-90+y.angleFromVector(n.x,n.y))},a.onDataUpdate=function(){this.updateActiveStatesFromNodeData()},a.updateActiveStatesFromNodeData=function(){this.liveDataArray.length<1||(this.setSpriteIndexActiveState(0,this.firstNodeData.isUnlocked),this.liveDataArray.length<2||this.setSpriteIndexActiveState(1,this.secondNodeData.isUnlocked))},a.setSpriteIndexActiveState=function(t,e){this.spriteStates[t]!=e&&(this.spriteStates[t]=e,this.animator.addAnimations([new d(this.connectionSprites[t],e?this.activeColor:this.inactiveColor,.5,[])]))},r(e,[{key:"inactiveColor",get:function(){return h.currencyColorScheme_token.frameColor}},{key:"activeColor",get:function(){return h.color_offWhite}},{key:"firstNodeData",get:function(){return this.liveDataArray[0]}},{key:"secondNodeData",get:function(){return this.liveDataArray[1]}}]),e}(p)).prototype,"connectionSprites",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),N=e(g.prototype,"containerTransform",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=g))||A));a._RF.pop()}}}));

System.register("chunks:///_virtual/SkillNodeManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./StaticDataStructures.ts","./KiwiSkillNodeController.ts","./SkillNodeConnector.ts","./KiwiInterfaceAnimator.ts","./SkillNodeTooltip.ts","./GameSession.ts"],(function(e){var t,i,o,l,n,a,r,s,c,d,k,N,u,h,p,f;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,o=e.initializerDefineProperty,l=e.assertThisInitialized,n=e.createClass},function(e){a=e.cclegacy,r=e._decorator,s=e.Node,c=e.Prefab,d=e.instantiate},function(e){k=e.WhatAttribute},function(e){N=e.KiwiSkillNodeController},function(e){u=e.SkillNodeConnector},function(e){h=e.KiwiInterfaceAnimator},function(e){p=e.SkillNodeTooltip},function(e){f=e.GameSession}],execute:function(){var g,C,S,y,v,M,b,w,T;a._RF.push({},"1dc6cNnPM1B/5XWgiM9nuYN","SkillNodeManager",void 0);var D=r.ccclass,m=r.property;e("SkillNodeManager",(g=D("SkillNodeManager"),C=m({type:s}),S=m({type:c}),y=m({type:p}),g((b=t((M=function(e){function t(){for(var t,i=arguments.length,n=new Array(i),a=0;a<i;a++)n[a]=arguments[a];return t=e.call.apply(e,[this].concat(n))||this,o(t,"skillNodeContainer",b,l(t)),o(t,"nodeConnectorPrefab",w,l(t)),o(t,"skillNodeTooltip",T,l(t)),t.skillNodes=[],t.skillNodeConnectorMap=new Map,t.skillNodeCategoryMap=new Map,t}i(t,e);var a=t.prototype;return a.initialize=function(t){e.prototype.initialize.call(this,t),this.populateSkillNodeReferences(),this.generateSkillNodeConnectors()},a.onDataUpdate=function(){},a.populateSkillNodeReferences=function(){this.crawlNodeTreeRecursively(this.skillNodeContainer)},a.crawlNodeTreeRecursively=function(e){if(this.checkForSkillNodeComponent(e),0!=e.children.length)for(var t=0;t<e.children.length;t++)this.crawlNodeTreeRecursively(e.children[t])},a.checkForSkillNodeComponent=function(e){var t=e.getComponent(N);if(null!=t){this.skillNodes.push(t),t.initialize(this.interfaceManager);var i=t.nodeCategory;this.skillNodeCategoryMap.has(i)||this.skillNodeCategoryMap.set(i,[]);var o=k[i]+this.skillNodeCategoryMap.get(i).length;t.bindToLiveSkillNodeData(f.getSkillNodeData(o),this),this.skillNodeCategoryMap.get(i).push(t)}},a.generateSkillNodeConnectors=function(){for(var e=this,t=f.getAllSkillNodeData(),i=function(){var i=t[o],l=i.identifier;t[o].connectedNodes.forEach((function(t){var o=t.identifier;if(!e.skillNodeConnectorMap.has(l+o)&&!e.skillNodeConnectorMap.has(o+l)){var n=e.createPairedConnector(i,t);null!=n&&e.skillNodeConnectorMap.set(l+o,n)}}))},o=0;o<t.length;o++)i()},a.createPairedConnector=function(e,t){var i,o;try{i=this.skillNodeCategoryMap.get(e.skillNodeData.whatSkillNode.whatCategory)[e.skillNodeData.whatSkillNode.index].node,o=this.skillNodeCategoryMap.get(t.skillNodeData.whatSkillNode.whatCategory)[t.skillNodeData.whatSkillNode.index].node}catch(i){return console.error(i+"  "+e.identifier+"  "+t.identifier),null}var l=this.instantiateConnector();return l.setConnectionNodes(i,o),l.bindToSkillNodes(e,t),l},a.instantiateConnector=function(){var e=d(this.nodeConnectorPrefab).getComponent(u);return e.initialize(this.interfaceManager),e.node.setParent(this.skillNodeContainer),e.node.setSiblingIndex(0),e},a.clearActiveSelections=function(){this.deselectSkillNode()},a.skillNodeClickedCallback=function(e){this.skillNodeTooltip.skillnodeClickedCallback()},a.skillNodeHoverEnterCallback=function(e){this.selectSkillNode(e)},a.skillNodeHoverExitCallback=function(e){this.deselectSkillNode()},a.skillNodeTappedCallback=function(e){this.toggleSelectSkillNode(e)},a.selectSkillNode=function(e){var t=e.skillNodeData.whatSkillNode,i=this.skillNodeCategoryMap.get(t.whatCategory)[t.index].node;this.skillNodeTooltip.selectSkillNode(e,i,!1)},a.deselectSkillNode=function(){this.skillNodeTooltip.deselectSkillNode()},a.toggleSelectSkillNode=function(e){var t=e.skillNodeData.whatSkillNode,i=this.skillNodeCategoryMap.get(t.whatCategory)[t.index].node;this.skillNodeTooltip.toggleSelectSkillNode(e,i,!0)},n(t,[{key:"hasNodeSelected",get:function(){return this.skillNodeTooltip.hasNodeSelected}}]),t}(h)).prototype,"skillNodeContainer",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=t(M.prototype,"nodeConnectorPrefab",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=t(M.prototype,"skillNodeTooltip",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=M))||v));a._RF.pop()}}}));

System.register("chunks:///_virtual/SkillNodeTooltip.ts",["./rollupPluginModLoBabelHelpers.js","cc","./KiwiButtonController.ts","./KiwiText.ts","./KiwiInterfaceAnimator.ts","./StaticDataStructures.ts","./GameParameters.ts","./SimpleAnimator.ts","./TyrantUtils.ts","./GameSession.ts","./SelectedSkillNodeIndicator.ts"],(function(t){var e,i,o,n,a,r,l,s,d,c,u,h,p,b,f,y,m,N,k,D,P,F,v;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,o=t.initializerDefineProperty,n=t.assertThisInitialized,a=t.createClass},function(t){r=t.cclegacy,l=t._decorator,s=t.Sprite,d=t.Vec3},function(t){c=t.KiwiButtonController,u=t.KiwiButtonPressAction},function(t){h=t.KiwiText},function(t){p=t.KiwiInterfaceAnimator},function(t){b=t.CurrencyType,f=t.AttributeValueOperation},function(t){y=t.ColorFormatter,m=t.TextFormatter},function(t){N=t.OnePerObjectAnimator,k=t.AnimateColor,D=t.AnimateMovement},function(t){P=t.TyrantUtils},function(t){F=t.GameSession},function(t){v=t.SelectedSkillNodeIndicator}],execute:function(){var w,S,g,A,C,T,U,B,I,_,V,z,W,O,x,E,K,R,H;r._RF.push({},"f145aJ6wClEEo1ZyhRWNP3o","SkillNodeTooltip",void 0);var $=l.ccclass,j=l.property,q=(t("SkillNodeTooltip",(w=$("SkillNodeTooltip"),S=j({type:v}),g=j({type:c}),A=j({type:h}),C=j({type:s}),T=j({type:s}),U=j({type:h}),B=j({type:s}),I=j({type:s}),w((z=e((V=function(t){function e(){for(var e,i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return e=t.call.apply(t,[this].concat(a))||this,o(e,"selectedNodeIndicator",z,n(e)),o(e,"purchaseNodeButton",W,n(e)),o(e,"nodePriceField",O,n(e)),o(e,"disconnectedWarningFader",x,n(e)),o(e,"nodeEffectFader",E,n(e)),o(e,"nodeEffectField",K,n(e)),o(e,"outerFrameSprite",R,n(e)),o(e,"innerFrameSprite",H,n(e)),e.visiblePosition=void 0,e.hiddenPosition=void 0,e.buttonVisiblePosition=void 0,e.buttonHiddenPosition=void 0,e.animator=new N(1,!0),e.selectedNodeData=null,e}i(e,t);var r=e.prototype;return r.initialize=function(e){t.prototype.initialize.call(this,e),this.liveDataArray.push(F.getCurrencyData(b.token)),this.visiblePosition=this.node.getPosition(),this.hiddenPosition=new d(this.visiblePosition.x,this.visiblePosition.y-200,this.visiblePosition.y),this.buttonVisiblePosition=this.purchaseNodeButton.node.getPosition(),this.buttonHiddenPosition=new d(this.buttonVisiblePosition.x,this.buttonVisiblePosition.y-200),this.purchaseNodeButton.addPrimaryPointerAction(new q(this)),this.updateDisplayedData()},r.onDataUpdate=function(){if(null!=this.selectedNodeData){var t=this.selectedNodeData.skillNodeData.baseCost;this.nodePriceField.text=t.toString(),this.nodePriceField.color=this.liveTokenCurrency.currentAmount>=t?y.color_white:y.color_errorRed}},r.updateAnimator=function(e){var i=e-this.lastAnimationTime;t.prototype.updateAnimator.call(this,e),this.selectedNodeIndicator.updateAnimation(i)},r.selectSkillNode=function(t,e,i){this.selectedNodeData=t,this.onDataUpdate(),this.updateDisplayedData(),null!=this.selectedNodeData?(this.selectedNodeIndicator.node.active=!0,this.selectedNodeIndicator.moveToNodePosition(e),this.selectedNodeIndicator.showWarningForParameters(t.isUnlockable,t.isUnlocked,i)):this.selectedNodeIndicator.node.active=!1},r.deselectSkillNode=function(){this.selectedNodeData=null,this.selectedNodeIndicator.node.active=!1,this.onDataUpdate(),this.updateDisplayedData()},r.toggleSelectSkillNode=function(t,e,i){this.selectedNodeData==t?this.deselectSkillNode():this.selectSkillNode(t,e,i)},r.updateDisplayedData=function(){if(null==this.selectedNodeData)return this.purchaseNodeButton.setCanBeInteractedWith(!1,!1),void this.setTooltipVisibility(!1);var t=this.selectedNodeData;this.setTooltipVisibility(!0),this.setButtonVisibility(!t.isUnlocked&&t.isUnlockable),this.animator.addAnimations([new k(this.outerFrameSprite,t.isUnlocked?y.color_white:y.colorScheme_aquaDark.contrastColor,.15,[])]),this.animator.addAnimations([new k(this.innerFrameSprite,t.isUnlocked?y.colorScheme_aqua.lighterColor:y.colorScheme_aquaDark.lighterColor,.15,[])]),this.purchaseNodeButton.setCanBeInteractedWith(t.isUnlockable,!1),this.disconnectedWarningFader.color=t.isUnlocked||t.isUnlockable?y.color_whiteClear:y.color_white,this.setButtonVisibility(!t.isUnlocked);var e=t.skillNodeData.baseCost;this.nodePriceField.text=e.toString(),this.nodePriceField.color=this.liveTokenCurrency.currentAmount>=e?y.color_white:y.color_errorRed;var i=t.nodeAttribute,o=F.getAttribute(i.whatAttribute),n=i.valueOperation!=f.unlockAttribute?o.attributeString:o.unlockString,a="<color=#FFFFFF>"+m.getFormattedOperation(i.currentValue,i.valueOperation)+"</color>",r=o.currentValue,l=o.getTotalWithAdditionalAttribute(i.currentValue,i.valueOperation),s="<color=#FFFFFF>(+"+Math.floor(l-r)+")</color>";n=(n=n.replace("$val$",a)).replace("$dif$",s),this.nodeEffectField.setTextWithCharCountOverride(n,n.length-20),this.nodeEffectFader.color=t.isUnlocked?y.color_white:P.setColorAlpha(y.color_white,.5)},r.setTooltipVisibility=function(t){t?(this.node.setPosition(this.hiddenPosition),this.animator.addAnimations([new D(this.node,this.visiblePosition,.2,[])])):(this.node.setPosition(this.hiddenPosition),this.animator.addAnimations([new D(this.node,this.hiddenPosition,.01,[])]))},r.setButtonVisibility=function(t){t?this.animator.addAnimations([new D(this.purchaseNodeButton.node,this.buttonVisiblePosition,.2,[])]):this.animator.addAnimations([new D(this.purchaseNodeButton.node,this.buttonHiddenPosition,.2,[])])},r.skillnodeClickedCallback=function(){null!=this.selectedNodeData&&this.selectedNodeData.tryUnlockNode()&&(this.updateDisplayedData(),this.selectedNodeIndicator.showWarningForParameters(this.selectedNodeData.isUnlockable,this.selectedNodeData.isUnlocked,!1))},r.purchaseButtonTappedCallback=function(){null!=this.selectedNodeData&&this.selectedNodeData.tryUnlockNode()&&(this.updateDisplayedData(),this.selectedNodeIndicator.showWarningForParameters(this.selectedNodeData.isUnlockable,this.selectedNodeData.isUnlocked,!0))},a(e,[{key:"liveTokenCurrency",get:function(){return this.liveDataArray[0]}},{key:"hasNodeSelected",get:function(){return null!=this.selectedNodeData}}]),e}(p)).prototype,"selectedNodeIndicator",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),W=e(V.prototype,"purchaseNodeButton",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=e(V.prototype,"nodePriceField",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=e(V.prototype,"disconnectedWarningFader",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=e(V.prototype,"nodeEffectFader",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),K=e(V.prototype,"nodeEffectField",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=e(V.prototype,"outerFrameSprite",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),H=e(V.prototype,"innerFrameSprite",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=V))||_)),t("OnButtonPress_TryUnlockSkillNode",function(t){function e(){return t.apply(this,arguments)||this}return i(e,t),e.prototype.doButtonPressAction=function(t){this.interactionObject.purchaseButtonTappedCallback()},e}(u)));r._RF.pop()}}}));

System.register("chunks:///_virtual/SkillTreeScreenController.ts",["./rollupPluginModLoBabelHelpers.js","cc","./KiwiInterfaceAnimator.ts","./SimpleAnimator.ts","./KiwiButtonController.ts","./SkillNodeManager.ts","./StaticDataStructures.ts","./GameSession.ts","./PointerInputHandler.ts","./GameManager.ts"],(function(t){var n,e,i,o,r,a,s,l,u,c,h,g,d,f,p,m,S,b,T,y,B,C,w,z,v;return{setters:[function(t){n=t.applyDecoratedDescriptor,e=t.inheritsLoose,i=t.initializerDefineProperty,o=t.assertThisInitialized,r=t.createClass},function(t){a=t.cclegacy,s=t._decorator,l=t.UITransform,u=t.Sprite,c=t.Vec3,h=t.NodeEventType,g=t.Vec2,d=t.math},function(t){f=t.KiwiInterfaceAnimator},function(t){p=t.OnePerObjectAnimator,m=t.AnimateMovement},function(t){S=t.KiwiButtonController,b=t.KiwiButtonPressAction},function(t){T=t.SkillNodeManager},function(t){y=t.WhatAttribute,B=t.CurrencyType},function(t){C=t.GameSession},function(t){w=t.PointerInputHandler,z=t.PointerEventTypes},function(t){v=t.GameManager}],execute:function(){var P,A,O,M,k,D,I,_,E,x,H,L,Z,j,N,G,U;a._RF.push({},"bc595YIC3RMvLjxXAn8M0af","SkillTreeScreenController",void 0);var K=s.ccclass,R=s.property,W=(t("SkillTreeScreenController",(P=K("SkillTreeScreenController"),A=R({type:l}),O=R({type:T}),M=R({type:u}),k=R({type:S}),D=R({type:S}),I=R({type:S}),_=R({type:l}),P((H=n((x=function(t){function n(){for(var n,e=arguments.length,r=new Array(e),a=0;a<e;a++)r[a]=arguments[a];return n=t.call.apply(t,[this].concat(r))||this,i(n,"windowContainerTransform",H,o(n)),i(n,"skillNodeManager",L,o(n)),i(n,"openScreenButtonSprite",Z,o(n)),i(n,"closeScreenButton",j,o(n)),i(n,"zoomInButton",N,o(n)),i(n,"zoomOutButton",G,o(n)),i(n,"draggableContentTransform",U,o(n)),n.allButtons=[],n.inputHandler=new w,n.skilltreeButtonInitialized=!1,n.draggableStartingPosition=new c(0,0,0),n.touchDragThreshold=20,n.mouseDragThreshold=5,n.dragMult=1,n.dragThreshold=0,n.isDragging=!1,n.animator=new p(1,!0),n.undraggableHeaderHeight=120,n.draggableContentEdgePaddingOffsets={side:560,center:420},n.draggableMoveTarget=new c(0,0,0),n.zoomLimits={min:.5,max:2.5},n.currentZoomScale=1,n}e(n,t);var a=n.prototype;return a.initialize=function(n){t.prototype.initialize.call(this,n),this.liveDataArray.push(C.getAttribute(y.king_currentLevel)),this.liveDataArray.push(C.getCurrencyData(B.token)),this.interfaceManager.registerLiveDataElement(this),this.initializeButtons(),this.initializeDragEvents(),this.skillNodeManager.initialize(n)},a.initializeButtons=function(){this.closeScreenButton.initialize(this.interfaceManager),this.closeScreenButton.addPrimaryPointerAction(new X(this)),this.allButtons.push(this.closeScreenButton),this.zoomInButton.initialize(this.interfaceManager),this.zoomInButton.addPrimaryPointerAction(new Y(this)),this.zoomOutButton.initialize(this.interfaceManager),this.zoomOutButton.addPrimaryPointerAction(new J(this)),this.allButtons.push(this.zoomInButton),this.allButtons.push(this.zoomOutButton)},a.initializeDragEvents=function(){this.inputHandler.registerNodeForPointerEvents(this.windowContainerTransform.node,!0),this.inputHandler.addActionToInput(z.Touch_start,new W(this),!0),this.inputHandler.addActionToInput(z.Touch_end,new V(this)),this.inputHandler.addActionToInput(z.Touch_move,new q(this)),this.inputHandler.addActionToInput(z.Mouse_down,new F(this),!0)},a.updateAnimator=function(n){this.inputHandler.processLastInput(),t.prototype.updateAnimator.call(this,n)},a.onDataUpdate=function(){!this.skilltreeButtonInitialized&&(this.playerLevel.currentValue>0||this.tokenCurrencyData.totalGained>0)&&(this.skilltreeButtonInitialized=!0,this.openScreenButtonSprite.node.on(h.MOUSE_ENTER,this.openButton_onHoverEnter,this),this.openScreenButtonSprite.node.on(h.MOUSE_LEAVE,this.openButton_onHoverExit,this),this.openScreenButtonSprite.node.on(h.TOUCH_START,this.requestOpenScreen,this))},a.openButton_onHoverEnter=function(){this.openScreenButtonSprite.enabled=!0},a.openButton_onHoverExit=function(){this.openScreenButtonSprite.enabled=!1},a.requestOpenScreen=function(){this.interfaceManager.requestOpenSkilltreeScreen(),v.instance.tryStopGameplay()},a.closeScreen=function(){for(var t=0;t<this.allButtons.length;t++)this.allButtons[t].reset();this.windowContainerTransform.node.active=!1,this.skillNodeManager.clearActiveSelections(),this.interfaceManager.skilltreeClosedCallback()},a.onMouseDown=function(t){this.dragThreshold=this.skillNodeManager.hasNodeSelected?this.mouseDragThreshold:0,this.draggableStartingPosition=this.draggableContentTransform.node.getPosition(),this.clearDraggableTransformAnimations(),this.isDragging=!0,this.dragMult=2},a.onTouchStart=function(t){this.dragThreshold=this.touchDragThreshold,this.draggableStartingPosition=this.draggableContentTransform.node.getPosition(),this.clearDraggableTransformAnimations(),this.isDragging=!0,this.dragMult=1},a.onTouchMove=function(t){if(this.isDragging){var n=t.getLocation().subtract(t.getStartLocation());if(this.dragThreshold>0){if(n.length()<this.dragThreshold)return;this.draggableStartingPosition=this.draggableContentTransform.node.getPosition(),n=t.getLocation().subtract(t.getStartLocation()),this.dragThreshold=0}var e=t.getUILocation(),i=new g(this.windowContainerTransform.width,this.windowContainerTransform.height);e.x>i.x||e.x<0||e.y>i.y||e.y<0?this.onTouchEnd(t):this.draggableContentTransform.node.setPosition(this.draggableStartingPosition.x+n.x*this.dragMult,this.draggableStartingPosition.y+n.y*this.dragMult,this.draggableStartingPosition.z)}},a.onTouchEnd=function(t){this.constrainContentToBounds(),this.isDragging=!1},a.constrainContentToBounds=function(){var t=C.getScreenWidth()/2,n=C.getScreenHeight()/2,e=this.draggableContentTransform.node.getScale(),i=-t+this.draggableContentEdgePaddingOffsets.side,o=t-this.draggableContentEdgePaddingOffsets.side,r=n-this.undraggableHeaderHeight-this.draggableContentEdgePaddingOffsets.center,a=-n+this.draggableContentEdgePaddingOffsets.center,s=this.draggableContentTransform.node.getPosition(),l=this.draggableContentTransform.width*e.x,u=this.draggableContentTransform.height*e.y,h=s.x-l*this.draggableContentTransform.anchorX,g=s.x+l*(1-this.draggableContentTransform.anchorX),d=s.y-u*this.draggableContentTransform.anchorY,f=s.y+u*(1-this.draggableContentTransform.anchorY),p=new c(0,0,0);g<i?p.x+=i-g:h>o&&(p.x+=o-h),f<a?p.y+=a-f:d>r&&(p.y+=r-d),this.draggableMoveTarget=new c(s.x+p.x,s.y+p.y,s.z),this.animator.addAnimations([new m(this.draggableContentTransform.node,this.draggableMoveTarget,1.2,[])])},a.clearDraggableTransformAnimations=function(){this.animator.discardAllAnimationsWithObjet(this.draggableContentTransform.node)},a.doZoomIn=function(){var t;t=this.currentZoomScale<1.5?.25:.5,this.setZoomScale(this.currentZoomScale+t)},a.doZoomOut=function(){var t;t=this.currentZoomScale<=1.5?-.25:-.5,this.setZoomScale(this.currentZoomScale+t)},a.setZoomScale=function(t){var n=(t=d.clamp(t,this.zoomLimits.min,this.zoomLimits.max))/this.draggableContentTransform.node.getScale().x;this.clearDraggableTransformAnimations();var e=this.draggableContentTransform.node.getPosition();this.draggableContentTransform.node.setScale(new c(t,t,1)),this.draggableContentTransform.node.setPosition(new c(e.x*n,e.y*n,e.z)),this.constrainContentToBounds(),this.currentZoomScale=t,this.zoomOutButton.setCanBeInteractedWith(this.currentZoomScale>this.zoomLimits.min,!1),this.zoomInButton.setCanBeInteractedWith(this.currentZoomScale<this.zoomLimits.max,!1)},r(n,[{key:"playerLevel",get:function(){return this.liveDataArray[0]}},{key:"tokenCurrencyData",get:function(){return this.liveDataArray[1]}}]),n}(f)).prototype,"windowContainerTransform",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=n(x.prototype,"skillNodeManager",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Z=n(x.prototype,"openScreenButtonSprite",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),j=n(x.prototype,"closeScreenButton",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=n(x.prototype,"zoomInButton",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),G=n(x.prototype,"zoomOutButton",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),U=n(x.prototype,"draggableContentTransform",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=x))||E)),t("OnTouchStart_skilltreeScreen",function(t){function n(){return t.apply(this,arguments)||this}return e(n,t),n.prototype.doButtonPressAction=function(t){this.interactionObject.onTouchStart(t)},n}(b))),V=t("OnTouchEnd_skilltreeScreen",function(t){function n(){return t.apply(this,arguments)||this}return e(n,t),n.prototype.doButtonPressAction=function(t){this.interactionObject.onTouchEnd(t)},n}(b)),q=t("OnTouchMove_skilltreeScreen",function(t){function n(){return t.apply(this,arguments)||this}return e(n,t),n.prototype.doButtonPressAction=function(t){this.interactionObject.onTouchMove(t)},n}(b)),F=t("OnMouseDown_skillTreeScreen",function(t){function n(){return t.apply(this,arguments)||this}return e(n,t),n.prototype.doButtonPressAction=function(t){this.interactionObject.onMouseDown(t)},n}(b)),X=t("OnButtonPress_skilltreeButton_close",function(t){function n(){return t.apply(this,arguments)||this}return e(n,t),n.prototype.doButtonPressAction=function(t){this.interactionObject.closeScreen()},n}(b)),Y=t("OnButtonPress_SkilltreeButton_zoomIn",function(t){function n(){return t.apply(this,arguments)||this}return e(n,t),n.prototype.doButtonPressAction=function(t){this.interactionObject.doZoomIn()},n}(b)),J=t("OnButtonPress_skillTreeButton_zoomOut",function(t){function n(){return t.apply(this,arguments)||this}return e(n,t),n.prototype.doButtonPressAction=function(t){this.interactionObject.doZoomOut()},n}(b));a._RF.pop()}}}));

System.register("chunks:///_virtual/SpriteShineEffect.ts",["./rollupPluginModLoBabelHelpers.js","cc","./KiwiInterfaceAnimator.ts","./SimpleAnimator.ts"],(function(i){var t,n,e,o,r,a,s,l,c,f,h,u;return{setters:[function(i){t=i.applyDecoratedDescriptor,n=i.inheritsLoose,e=i.initializerDefineProperty,o=i.assertThisInitialized},function(i){r=i.cclegacy,a=i._decorator,s=i.UITransform,l=i.Vec3},function(i){c=i.KiwiInterfaceAnimator},function(i){f=i.AnimateMovement,h=i.AnimateWait,u=i.Animate}],execute:function(){var p,m,d,S,b,v,y,A,w;r._RF.push({},"56f37XDxX9K/5vT1VmES0mr","SpriteShineEffect",void 0);var T=a.ccclass,g=a.property,z=(i("SpriteShineEffect",(p=T("SpriteShineEffect"),m=g({type:s}),d=g({type:s}),p((v=t((b=function(i){function t(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return t=i.call.apply(i,[this].concat(r))||this,e(t,"shineRootTransform",v,o(t)),e(t,"shineSpriteTransform",y,o(t)),e(t,"additionalOffset",A,o(t)),e(t,"shineIntervalDuration",w,o(t)),t.startPosition=void 0,t.endPosition=void 0,t}n(t,i);var r=t.prototype;return r.initialize=function(t){i.prototype.initialize.call(this,t),this.shineSpriteTransform.height=this.shineRootTransform.height+20+this.additionalOffset;var n=this.shineRootTransform.width/2+20+this.additionalOffset;this.startPosition=new l(-n,0,0),this.endPosition=new l(n,0,0),this.doShineAnimation()},r.shineCompletedCallback=function(){this.doShineAnimation()},r.doShineAnimation=function(){this.shineSpriteTransform.node.setPosition(this.startPosition),this.animator.addAnimationBlock([new f(this.shineSpriteTransform.node,this.endPosition,.6,[new h(this.shineIntervalDuration,[new z(this)])])])},r.onDataUpdate=function(){},t}(c)).prototype,"shineRootTransform",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=t(b.prototype,"shineSpriteTransform",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=t(b.prototype,"additionalOffset",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),w=t(b.prototype,"shineIntervalDuration",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 8}}),S=b))||S)),i("SpecialAnimateCallback_shineEffectComplete",function(i){function t(t){return i.call(this,t,0,[])||this}n(t,i);var e=t.prototype;return e.doAnimationInitialization=function(){this.objectToAnimate.shineCompletedCallback()},e.doAnimationActions=function(){},t}(u)));r._RF.pop()}}}));

System.register("chunks:///_virtual/StaticData.ts",["cc","./StaticDataStructures.ts","./SaveableDataStructures.ts","./GameParameters.ts"],(function(e){var t,i,a,o,n,r,l,u,d,s;return{setters:[function(e){t=e.cclegacy,i=e._decorator},function(e){a=e.CurrencyType,o=e.WhatAttribute,n=e.AttributeValueOperation,r=e.AttributeStructure,l=e.BuildingType,u=e.SkillNodeSize},function(e){d=e.SaveableScope},function(e){s=e.NumberTextFormat}],execute:function(){var c,w;t._RF.push({},"110b0ShzpxEE4CB3z0R7gyJ","StaticData",void 0);var b=i.ccclass;i.property,e("StaticData",b("StaticData")(((w=function(){}).staticCurrencyData=[{currencyType:a.kiwi,currencyScope:d.kingdom,currencyIdentifier:"kiwi",currencyUnitString:"kiwis"},{currencyType:a.koin,currencyScope:d.kingdom,currencyIdentifier:"koin",currencyUnitString:"koins"},{currencyType:a.token,currencyScope:d.skilltree,currencyIdentifier:"token",currencyUnitString:""},{currencyType:a.freeBoost,currencyScope:d.settings,currencyIdentifier:"freeBoost",currencyUnitString:""}],w.staticAttributeData=[{whatAttribute:o.kiwiProduction_click,attributeValueOperation:n.baseValue,attributeStructure:r.composite,defaultValue:1,attributeString:"$val$ click power $dif$",valueTextFormat:s.shortestForm},{whatAttribute:o.kiwiProduction_auto,attributeValueOperation:n.baseValue,attributeStructure:r.composite,defaultValue:6,attributeString:"$val$ car power $dif$",valueTextFormat:s.shortestForm},{startUnlocked:!1,whatAttribute:o.stuffer_bagSize,attributeValueOperation:n.baseValue,attributeStructure:r.composite,defaultValue:20,attributeString:"$val$ kiwis delivered $dif$",valueTextFormat:s.shortestForm},{startUnlocked:!1,whatAttribute:o.sekiwity_speed,attributeValueOperation:n.baseValue,attributeStructure:r.composite,defaultValue:1,attributeString:"$val$ delivery speed $dif$",valueTextFormat:s.percentage},{whatAttribute:o.sekiwity_deliveryInterval,attributeValueOperation:n.baseValue,attributeStructure:r.composite,defaultValue:8,attributeString:"base XRAY time reduced by $val$",valueTextFormat:s.minutesSeconds},{whatAttribute:o.sekiwity_clickMultiplierLimit,attributeValueOperation:n.baseValue,attributeStructure:r.composite,defaultValue:9.99},{startUnlocked:!1,whatAttribute:o.castle_kiwiValueMultiplier,attributeValueOperation:n.baseValue,attributeStructure:r.composite,defaultValue:1,attributeString:"$val$ koins per kiwi $dif$",valueTextFormat:s.shortestForm},{whatAttribute:o.king_currentLevel,attributeValueOperation:n.baseValue,attributeStructure:r.basicSaveable,defaultValue:0,saveableScope:d.kingdom},{whatAttribute:o.king_currentExperience,attributeValueOperation:n.baseValue,attributeStructure:r.basicSaveable,defaultValue:0,saveableScope:d.kingdom},{whatAttribute:o.king_currentExperienceRequirement,attributeValueOperation:n.baseValue,attributeStructure:r.composite,defaultValue:0,attributeString:"$val$ clicks to fill the king ring",valueTextFormat:s.shortestForm},{whatAttribute:o.king_kingVisitProgress,attributeValueOperation:n.baseValue,attributeStructure:r.basic,defaultValue:0},{whatAttribute:o.king_clickPoints,attributeValueOperation:n.baseValue,attributeStructure:r.composite,defaultValue:15,attributeString:"$val$ king koin clicks",valueTextFormat:s.shortestForm},{startUnlocked:!1,whatAttribute:o.buildingBoost_freeBoostInterval,attributeValueOperation:n.baseValue,attributeStructure:r.composite,defaultValue:0,unlockString:"get a <color=#FFFFFF>FREE BOOST</color> every 10 minutes",attributeString:"get <color=#FFFFFF>FREE BOOSTS</color>$val$sec faster",valueTextFormat:s.minutesSeconds},{whatAttribute:o.buildingBoost_effectDuration,attributeValueOperation:n.baseValue,attributeStructure:r.composite,defaultValue:60,attributeString:"$val$ longer boost duration",valueTextFormat:s.minutesSeconds},{whatAttribute:o.buildingBoost_powerMultiplier,attributeValueOperation:n.baseValue,attributeStructure:r.composite,defaultValue:1,attributeString:"$val$ stronger boost power",valueTextFormat:s.percentage},{whatAttribute:o.gun_ammoLimit,attributeValueOperation:n.baseValue,attributeStructure:r.composite,defaultValue:60,startUnlocked:!1,unlockString:"unlocks <color=#FFFFFF>KIWILASHNIKOV AUTOCLICKER</color>",attributeString:"$val$ max Kiwilashnikov ammo",valueTextFormat:s.regular},{whatAttribute:o.gun_reloadInterval,attributeValueOperation:n.baseValue,attributeStructure:r.composite,defaultValue:3,startUnlocked:!1,attributeString:"$val$ faster Kiwilashnikov reload",valueTextFormat:s.percentage},{whatAttribute:o.gun_currentAmmo,attributeValueOperation:n.baseValue,attributeStructure:r.basic,defaultValue:60,attributeString:"$val$ faster Kiwilashnikov reload",valueTextFormat:s.regular},{whatAttribute:o.timeBoost_timeMultiplier,attributeValueOperation:n.baseValue,attributeStructure:r.basic,defaultValue:1},{whatAttribute:o.timeBoost_currentDuration,attributeValueOperation:n.baseValue,attributeStructure:r.basic,defaultValue:0,valueTextFormat:s.minutesSeconds}],w.staticBuildingData=[{buildingType:l.autoKiwiker,pairedAttributeType:o.kiwiProduction_auto,buildingIdentifier:"autoKiwiker",buildingName:"AUTO KIWIKER",attributeTitle:"CAR POWER",upgradeCurrencyType:a.koin,baseCost:40,perLevelCostExponent:1.2,perTierCostExponent:35,firstLevelValueBonus:6,perLevelValueIncrement:2,perTierValueExponent:25,tierInterval:25},{buildingType:l.bigKiwi,pairedAttributeType:o.kiwiProduction_click,buildingIdentifier:"bigKiwi",buildingName:"KIWI KURSOR",attributeTitle:"CLICK POWER",upgradeCurrencyType:a.koin,baseCost:15,perLevelCostExponent:1.15,perTierCostExponent:15,firstLevelValueBonus:0,perLevelValueIncrement:1,perTierValueExponent:25,tierInterval:25},{buildingType:l.stuffer,pairedAttributeType:o.stuffer_bagSize,buildingIdentifier:"stuffer",buildingName:"BAG STUFFER",attributeTitle:"KIWIS DELIVERED",upgradeCurrencyType:a.koin,baseCost:100,perLevelCostExponent:1.25,perTierCostExponent:30,firstLevelValueBonus:0,perLevelValueIncrement:60,perTierValueExponent:20,tierInterval:20},{buildingType:l.sekiwity,pairedAttributeType:o.sekiwity_speed,buildingIdentifier:"sekiwity",buildingName:"SEKIWITY CHECK",attributeTitle:"DELIVERY SPEED",upgradeCurrencyType:a.koin,baseCost:5e3,perLevelCostExponent:1.5,perTierCostExponent:40,firstLevelValueBonus:0,perLevelValueIncrement:.1,perTierValueExponent:5,tierInterval:5},{buildingType:l.castle,pairedAttributeType:o.castle_kiwiValueMultiplier,buildingIdentifier:"castle",buildingName:"KIWING KASTLE",attributeTitle:"KOINS PER KIWI",upgradeCurrencyType:a.koin,baseCost:1e5,perLevelCostExponent:2,perTierCostExponent:80,firstLevelValueBonus:0,perLevelValueIncrement:1,perTierValueExponent:5,tierInterval:5}],w.skillNodeData=[{whatSkillNode:{index:0,whatCategory:o.undefined},baseCost:0,baseValue:0,nodeOperation:n.unlockAttribute,connectTo:[{index:0,whatCategory:o.buildingBoost_freeBoostInterval},{index:0,whatCategory:o.stuffer_bagSize},{index:0,whatCategory:o.kiwiProduction_click}]},{whatSkillNode:{index:0,whatCategory:o.kiwiProduction_click},baseCost:1,baseValue:.4,nodeOperation:n.multiplierAdditive,connectTo:[{index:1,whatCategory:o.kiwiProduction_click},{index:0,whatCategory:o.kiwiProduction_auto}]},{whatSkillNode:{index:1,whatCategory:o.kiwiProduction_click},baseCost:1,baseValue:.4,nodeOperation:n.multiplierAdditive,connectTo:[{index:2,whatCategory:o.kiwiProduction_click}]},{whatSkillNode:{index:2,whatCategory:o.kiwiProduction_click},baseCost:1,baseValue:.4,nodeOperation:n.multiplierAdditive,connectTo:[{index:3,whatCategory:o.kiwiProduction_click}]},{whatSkillNode:{index:3,whatCategory:o.kiwiProduction_click},baseCost:1,baseValue:.4,nodeOperation:n.multiplierAdditive,connectTo:[{index:1,whatCategory:o.castle_kiwiValueMultiplier}]},{whatSkillNode:{index:0,whatCategory:o.kiwiProduction_auto},baseCost:1,baseValue:.3,nodeOperation:n.multiplierAdditive,connectTo:[{index:1,whatCategory:o.kiwiProduction_auto}]},{whatSkillNode:{index:1,whatCategory:o.kiwiProduction_auto},baseCost:1,baseValue:.3,nodeOperation:n.multiplierAdditive,connectTo:[{index:2,whatCategory:o.kiwiProduction_auto}]},{whatSkillNode:{index:2,whatCategory:o.kiwiProduction_auto},baseCost:1,baseValue:.3,nodeOperation:n.multiplierAdditive,connectTo:[{index:1,whatCategory:o.castle_kiwiValueMultiplier}]},{whatSkillNode:{index:1,whatCategory:o.castle_kiwiValueMultiplier},baseCost:3,baseValue:.4,nodeOperation:n.multiplierAdditive,connectTo:[{index:0,whatCategory:o.castle_kiwiValueMultiplier},{index:2,whatCategory:o.castle_kiwiValueMultiplier},{index:4,whatCategory:o.kiwiProduction_click},{index:3,whatCategory:o.kiwiProduction_auto},{index:0,whatCategory:o.gun_ammoLimit}],nodeSize:u.Medium},{whatSkillNode:{index:0,whatCategory:o.castle_kiwiValueMultiplier},baseCost:3,baseValue:.4,nodeOperation:n.multiplierAdditive,connectTo:[{index:1,whatCategory:o.castle_kiwiValueMultiplier}],nodeSize:u.Medium},{whatSkillNode:{index:2,whatCategory:o.castle_kiwiValueMultiplier},baseCost:12,baseValue:2,nodeOperation:n.multiplierMultiplicative,nodeSize:u.Big},{whatSkillNode:{index:4,whatCategory:o.kiwiProduction_click},baseCost:2,baseValue:.5,nodeOperation:n.multiplierAdditive,connectTo:[{index:5,whatCategory:o.kiwiProduction_click}]},{whatSkillNode:{index:5,whatCategory:o.kiwiProduction_click},baseCost:4,baseValue:1.4,nodeOperation:n.multiplierMultiplicative,connectTo:[{index:6,whatCategory:o.kiwiProduction_click}],nodeSize:u.Medium},{whatSkillNode:{index:6,whatCategory:o.kiwiProduction_click},baseCost:2,baseValue:.5,nodeOperation:n.multiplierAdditive,connectTo:[{index:7,whatCategory:o.kiwiProduction_click}]},{whatSkillNode:{index:7,whatCategory:o.kiwiProduction_click},baseCost:4,baseValue:1.4,nodeOperation:n.multiplierMultiplicative,connectTo:[{index:8,whatCategory:o.kiwiProduction_click}],nodeSize:u.Medium},{whatSkillNode:{index:8,whatCategory:o.kiwiProduction_click},baseCost:2,baseValue:.5,nodeOperation:n.multiplierAdditive,connectTo:[{index:3,whatCategory:o.castle_kiwiValueMultiplier}]},{whatSkillNode:{index:3,whatCategory:o.kiwiProduction_auto},baseCost:2,baseValue:.6,nodeOperation:n.multiplierAdditive,connectTo:[{index:4,whatCategory:o.kiwiProduction_auto}]},{whatSkillNode:{index:4,whatCategory:o.kiwiProduction_auto},baseCost:6,baseValue:1.4,nodeOperation:n.multiplierMultiplicative,connectTo:[{index:5,whatCategory:o.kiwiProduction_auto}],nodeSize:u.Medium},{whatSkillNode:{index:5,whatCategory:o.kiwiProduction_auto},baseCost:2,baseValue:.6,nodeOperation:n.multiplierAdditive,connectTo:[{index:6,whatCategory:o.kiwiProduction_auto}]},{whatSkillNode:{index:6,whatCategory:o.kiwiProduction_auto},baseCost:6,baseValue:1.4,nodeOperation:n.multiplierMultiplicative,connectTo:[{index:7,whatCategory:o.kiwiProduction_auto}],nodeSize:u.Medium},{whatSkillNode:{index:7,whatCategory:o.kiwiProduction_auto},baseCost:2,baseValue:.6,nodeOperation:n.multiplierAdditive,connectTo:[{index:3,whatCategory:o.castle_kiwiValueMultiplier}]},{whatSkillNode:{index:3,whatCategory:o.castle_kiwiValueMultiplier},baseCost:15,baseValue:2,nodeOperation:n.multiplierMultiplicative,nodeSize:u.Bigger},{whatSkillNode:{index:0,whatCategory:o.stuffer_bagSize},baseCost:1,baseValue:.3,nodeOperation:n.multiplierAdditive,connectTo:[{index:1,whatCategory:o.stuffer_bagSize},{index:0,whatCategory:o.sekiwity_speed}]},{whatSkillNode:{index:0,whatCategory:o.sekiwity_speed},baseCost:1,baseValue:.15,nodeOperation:n.multiplierAdditive,connectTo:[{index:1,whatCategory:o.sekiwity_speed}]},{whatSkillNode:{index:1,whatCategory:o.sekiwity_speed},baseCost:1,baseValue:.15,nodeOperation:n.multiplierAdditive,connectTo:[{index:2,whatCategory:o.sekiwity_speed}]},{whatSkillNode:{index:2,whatCategory:o.sekiwity_speed},baseCost:1,baseValue:.15,nodeOperation:n.multiplierAdditive,connectTo:[{index:0,whatCategory:o.sekiwity_deliveryInterval}]},{whatSkillNode:{index:0,whatCategory:o.sekiwity_deliveryInterval},baseCost:5,baseValue:-1,nodeOperation:n.additiveBonus,connectTo:[{index:3,whatCategory:o.sekiwity_speed}],nodeSize:u.Medium},{whatSkillNode:{index:3,whatCategory:o.sekiwity_speed},baseCost:3,baseValue:.3,nodeOperation:n.multiplierAdditive,connectTo:[{index:1,whatCategory:o.sekiwity_deliveryInterval}]},{whatSkillNode:{index:1,whatCategory:o.sekiwity_deliveryInterval},baseCost:5,baseValue:-1,nodeOperation:n.additiveBonus,connectTo:[{index:5,whatCategory:o.sekiwity_speed}],nodeSize:u.Medium},{whatSkillNode:{index:5,whatCategory:o.sekiwity_speed},baseCost:3,baseValue:.3,nodeOperation:n.multiplierAdditive,connectTo:[{index:2,whatCategory:o.sekiwity_deliveryInterval}]},{whatSkillNode:{index:2,whatCategory:o.sekiwity_deliveryInterval},baseCost:5,baseValue:-1,nodeOperation:n.additiveBonus,connectTo:[{index:4,whatCategory:o.sekiwity_speed}],nodeSize:u.Medium},{whatSkillNode:{index:4,whatCategory:o.sekiwity_speed},baseCost:3,baseValue:.3,nodeOperation:n.multiplierAdditive,connectTo:[{index:3,whatCategory:o.sekiwity_deliveryInterval}]},{whatSkillNode:{index:1,whatCategory:o.stuffer_bagSize},baseCost:1,baseValue:.3,nodeOperation:n.multiplierAdditive,connectTo:[{index:2,whatCategory:o.stuffer_bagSize}]},{whatSkillNode:{index:2,whatCategory:o.stuffer_bagSize},baseCost:1,baseValue:.3,nodeOperation:n.multiplierAdditive,connectTo:[{index:3,whatCategory:o.stuffer_bagSize}]},{whatSkillNode:{index:3,whatCategory:o.stuffer_bagSize},baseCost:1,baseValue:.3,nodeOperation:n.multiplierAdditive,connectTo:[{index:6,whatCategory:o.stuffer_bagSize}]},{whatSkillNode:{index:6,whatCategory:o.stuffer_bagSize},baseCost:5,baseValue:1.3,nodeOperation:n.multiplierMultiplicative,connectTo:[{index:5,whatCategory:o.stuffer_bagSize}],nodeSize:u.Medium},{whatSkillNode:{index:5,whatCategory:o.stuffer_bagSize},baseCost:3,baseValue:.6,nodeOperation:n.multiplierAdditive,connectTo:[{index:4,whatCategory:o.stuffer_bagSize},{index:0,whatCategory:o.gun_ammoLimit}]},{whatSkillNode:{index:4,whatCategory:o.stuffer_bagSize},baseCost:5,baseValue:1.3,nodeOperation:n.multiplierMultiplicative,connectTo:[{index:7,whatCategory:o.stuffer_bagSize}],nodeSize:u.Medium},{whatSkillNode:{index:7,whatCategory:o.stuffer_bagSize},baseCost:3,baseValue:.6,nodeOperation:n.multiplierAdditive,connectTo:[{index:8,whatCategory:o.stuffer_bagSize}]},{whatSkillNode:{index:8,whatCategory:o.stuffer_bagSize},baseCost:5,baseValue:1.3,nodeOperation:n.multiplierMultiplicative,connectTo:[{index:9,whatCategory:o.stuffer_bagSize}],nodeSize:u.Medium},{whatSkillNode:{index:9,whatCategory:o.stuffer_bagSize},baseCost:3,baseValue:.6,nodeOperation:n.multiplierAdditive,connectTo:[{index:10,whatCategory:o.stuffer_bagSize}]},{whatSkillNode:{index:10,whatCategory:o.stuffer_bagSize},baseCost:9,baseValue:2,nodeOperation:n.multiplierMultiplicative,connectTo:[{index:7,whatCategory:o.castle_kiwiValueMultiplier}],nodeSize:u.Big},{whatSkillNode:{index:3,whatCategory:o.sekiwity_deliveryInterval},baseCost:9,baseValue:-2,nodeOperation:n.additiveBonus,connectTo:[{index:7,whatCategory:o.castle_kiwiValueMultiplier}],nodeSize:u.Big},{whatSkillNode:{index:7,whatCategory:o.castle_kiwiValueMultiplier},baseCost:18,baseValue:2.5,nodeOperation:n.multiplierMultiplicative,connectTo:[{index:5,whatCategory:o.castle_kiwiValueMultiplier},{index:6,whatCategory:o.castle_kiwiValueMultiplier},{index:4,whatCategory:o.castle_kiwiValueMultiplier}],nodeSize:u.Bigger},{whatSkillNode:{index:4,whatCategory:o.castle_kiwiValueMultiplier},baseCost:9,baseValue:1.2,nodeOperation:n.multiplierAdditive,nodeSize:u.Big},{whatSkillNode:{index:5,whatCategory:o.castle_kiwiValueMultiplier},baseCost:9,baseValue:1.2,nodeOperation:n.multiplierAdditive,nodeSize:u.Big},{whatSkillNode:{index:6,whatCategory:o.castle_kiwiValueMultiplier},baseCost:9,baseValue:1.2,nodeOperation:n.multiplierAdditive,nodeSize:u.Big},{whatSkillNode:{index:0,whatCategory:o.buildingBoost_freeBoostInterval},baseCost:3,baseValue:600,nodeOperation:n.unlockAttribute,connectTo:[{index:0,whatCategory:o.buildingBoost_effectDuration},{index:0,whatCategory:o.king_clickPoints}],nodeSize:u.Medium},{whatSkillNode:{index:0,whatCategory:o.buildingBoost_effectDuration},baseCost:1,baseValue:.15,nodeOperation:n.multiplierAdditive,connectTo:[{index:1,whatCategory:o.buildingBoost_effectDuration}]},{whatSkillNode:{index:1,whatCategory:o.buildingBoost_effectDuration},baseCost:1,baseValue:.15,nodeOperation:n.multiplierAdditive,connectTo:[{index:2,whatCategory:o.buildingBoost_effectDuration}]},{whatSkillNode:{index:2,whatCategory:o.buildingBoost_effectDuration},baseCost:1,baseValue:.15,nodeOperation:n.multiplierAdditive,connectTo:[{index:1,whatCategory:o.buildingBoost_freeBoostInterval}]},{whatSkillNode:{index:0,whatCategory:o.king_clickPoints},baseCost:1,baseValue:3,nodeOperation:n.additiveBonus,connectTo:[{index:1,whatCategory:o.king_clickPoints}]},{whatSkillNode:{index:1,whatCategory:o.king_clickPoints},baseCost:1,baseValue:3,nodeOperation:n.additiveBonus,connectTo:[{index:2,whatCategory:o.king_clickPoints}]},{whatSkillNode:{index:2,whatCategory:o.king_clickPoints},baseCost:1,baseValue:3,nodeOperation:n.additiveBonus,connectTo:[{index:1,whatCategory:o.buildingBoost_freeBoostInterval}]},{whatSkillNode:{index:1,whatCategory:o.buildingBoost_freeBoostInterval},baseCost:3,baseValue:-60,nodeOperation:n.additiveBonus,connectTo:[{index:2,whatCategory:o.buildingBoost_freeBoostInterval},{index:3,whatCategory:o.buildingBoost_effectDuration},{index:3,whatCategory:o.king_clickPoints},{index:0,whatCategory:o.king_currentExperienceRequirement}],nodeSize:u.Medium},{whatSkillNode:{index:2,whatCategory:o.buildingBoost_freeBoostInterval},baseCost:12,baseValue:-240,nodeOperation:n.additiveBonus,nodeSize:u.Big},{whatSkillNode:{index:0,whatCategory:o.king_currentExperienceRequirement},baseCost:5,baseValue:-.25,nodeOperation:n.multiplierAdditive,nodeSize:u.Medium},{whatSkillNode:{index:3,whatCategory:o.buildingBoost_effectDuration},baseCost:2,baseValue:.15,nodeOperation:n.multiplierAdditive,connectTo:[{index:0,whatCategory:o.buildingBoost_powerMultiplier}]},{whatSkillNode:{index:0,whatCategory:o.buildingBoost_powerMultiplier},baseCost:6,baseValue:.25,nodeOperation:n.multiplierAdditive,connectTo:[{index:4,whatCategory:o.buildingBoost_effectDuration}],nodeSize:u.Medium},{whatSkillNode:{index:4,whatCategory:o.buildingBoost_effectDuration},baseCost:2,baseValue:.2,nodeOperation:n.multiplierAdditive,connectTo:[{index:1,whatCategory:o.buildingBoost_powerMultiplier}]},{whatSkillNode:{index:1,whatCategory:o.buildingBoost_powerMultiplier},baseCost:6,baseValue:.25,nodeOperation:n.multiplierAdditive,connectTo:[{index:5,whatCategory:o.buildingBoost_effectDuration}]},{whatSkillNode:{index:5,whatCategory:o.buildingBoost_effectDuration},baseCost:2,baseValue:.2,nodeOperation:n.multiplierAdditive,connectTo:[{index:1,whatCategory:o.king_currentExperienceRequirement}]},{whatSkillNode:{index:3,whatCategory:o.king_clickPoints},baseCost:2,baseValue:6,nodeOperation:n.additiveBonus,connectTo:[{index:4,whatCategory:o.king_clickPoints}]},{whatSkillNode:{index:4,whatCategory:o.king_clickPoints},baseCost:6,baseValue:.25,nodeOperation:n.multiplierAdditive,connectTo:[{index:5,whatCategory:o.king_clickPoints}],nodeSize:u.Medium},{whatSkillNode:{index:5,whatCategory:o.king_clickPoints},baseCost:2,baseValue:6,nodeOperation:n.additiveBonus,connectTo:[{index:6,whatCategory:o.king_clickPoints}]},{whatSkillNode:{index:6,whatCategory:o.king_clickPoints},baseCost:6,baseValue:.25,nodeOperation:n.multiplierAdditive,connectTo:[{index:7,whatCategory:o.king_clickPoints}],nodeSize:u.Medium},{whatSkillNode:{index:7,whatCategory:o.king_clickPoints},baseCost:2,baseValue:6,nodeOperation:n.additiveBonus,connectTo:[{index:1,whatCategory:o.king_currentExperienceRequirement}]},{whatSkillNode:{index:1,whatCategory:o.king_currentExperienceRequirement},baseCost:15,baseValue:-.5,nodeOperation:n.multiplierAdditive,nodeSize:u.Bigger},{whatSkillNode:{index:0,whatCategory:o.gun_ammoLimit},baseCost:8,baseValue:100,nodeOperation:n.unlockAttribute,connectTo:[{index:1,whatCategory:o.gun_ammoLimit}],nodeSize:u.Gigantic},{whatSkillNode:{index:1,whatCategory:o.gun_ammoLimit},baseCost:2,baseValue:40,nodeOperation:n.additiveBonus,connectTo:[{index:0,whatCategory:o.gun_reloadInterval}]},{whatSkillNode:{index:0,whatCategory:o.gun_reloadInterval},baseCost:3,baseValue:.6,nodeOperation:n.multiplierAdditive,connectTo:[{index:2,whatCategory:o.gun_ammoLimit}],nodeSize:u.Medium},{whatSkillNode:{index:2,whatCategory:o.gun_ammoLimit},baseCost:2,baseValue:40,nodeOperation:n.additiveBonus,connectTo:[{index:1,whatCategory:o.gun_reloadInterval}]},{whatSkillNode:{index:1,whatCategory:o.gun_reloadInterval},baseCost:3,baseValue:.6,nodeOperation:n.multiplierAdditive,connectTo:[{index:3,whatCategory:o.gun_ammoLimit}],nodeSize:u.Medium},{whatSkillNode:{index:3,whatCategory:o.gun_ammoLimit},baseCost:2,baseValue:40,nodeOperation:n.additiveBonus,connectTo:[{index:2,whatCategory:o.gun_reloadInterval}]},{whatSkillNode:{index:2,whatCategory:o.gun_reloadInterval},baseCost:3,baseValue:.6,nodeOperation:n.multiplierAdditive,connectTo:[{index:4,whatCategory:o.gun_ammoLimit}],nodeSize:u.Medium},{whatSkillNode:{index:4,whatCategory:o.gun_ammoLimit},baseCost:2,baseValue:40,nodeOperation:n.additiveBonus,connectTo:[{index:3,whatCategory:o.gun_reloadInterval}]},{whatSkillNode:{index:3,whatCategory:o.gun_reloadInterval},baseCost:3,baseValue:.6,nodeOperation:n.multiplierAdditive,connectTo:[{index:5,whatCategory:o.gun_ammoLimit}],nodeSize:u.Medium},{whatSkillNode:{index:5,whatCategory:o.gun_ammoLimit},baseCost:2,baseValue:40,nodeOperation:n.additiveBonus,connectTo:[{index:4,whatCategory:o.gun_reloadInterval}]},{whatSkillNode:{index:4,whatCategory:o.gun_reloadInterval},baseCost:3,baseValue:.6,nodeOperation:n.multiplierAdditive,connectTo:[{index:6,whatCategory:o.gun_ammoLimit}],nodeSize:u.Medium},{whatSkillNode:{index:6,whatCategory:o.gun_ammoLimit},baseCost:10,baseValue:5,nodeOperation:n.multiplierMultiplicative,nodeSize:u.Bigger}],w.staticBoostData=[{boostedBuildingType:l.bigKiwi,defaultMultiplier:10},{boostedBuildingType:l.autoKiwiker,defaultMultiplier:8},{boostedBuildingType:l.stuffer,defaultMultiplier:6},{boostedBuildingType:l.sekiwity,defaultMultiplier:2},{boostedBuildingType:l.castle,defaultMultiplier:3}],c=w))||c);t._RF.pop()}}}));

System.register("chunks:///_virtual/StaticDataStructures.ts",["cc"],(function(i){var e;return{setters:[function(i){e=i.cclegacy}],execute:function(){e._RF.push({},"ab89antmFNKg5/qyBiNPxez","StaticDataStructures",void 0);i("CurrencyType",function(i){return i[i.kiwi=0]="kiwi",i[i.koin=1]="koin",i[i.token=2]="token",i[i.freeBoost=5]="freeBoost",i}({})),i("WhatAttribute",function(i){return i[i.kiwiProduction_click=0]="kiwiProduction_click",i[i.kiwiProduction_auto=1]="kiwiProduction_auto",i[i.stuffer_bagSize=10]="stuffer_bagSize",i[i.sekiwity_speed=20]="sekiwity_speed",i[i.sekiwity_clickMultiplierLimit=21]="sekiwity_clickMultiplierLimit",i[i.sekiwity_deliveryInterval=22]="sekiwity_deliveryInterval",i[i.castle_kiwiValueMultiplier=30]="castle_kiwiValueMultiplier",i[i.king_currentLevel=100]="king_currentLevel",i[i.king_currentExperience=101]="king_currentExperience",i[i.king_currentExperienceRequirement=102]="king_currentExperienceRequirement",i[i.king_kingVisitProgress=103]="king_kingVisitProgress",i[i.king_clickPoints=104]="king_clickPoints",i[i.gun_ammoLimit=700]="gun_ammoLimit",i[i.gun_reloadInterval=701]="gun_reloadInterval",i[i.gun_currentAmmo=702]="gun_currentAmmo",i[i.buildingBoost_freeBoostInterval=800]="buildingBoost_freeBoostInterval",i[i.buildingBoost_powerMultiplier=801]="buildingBoost_powerMultiplier",i[i.buildingBoost_effectDuration=802]="buildingBoost_effectDuration",i[i.timeBoost_timeMultiplier=810]="timeBoost_timeMultiplier",i[i.timeBoost_currentDuration=811]="timeBoost_currentDuration",i[i[void 0]=999]="undefined",i}({})),i("AttributeStructure",function(i){return i[i.basic=0]="basic",i[i.basicSaveable=1]="basicSaveable",i[i.composite=2]="composite",i}({})),i("AttributeValueOperation",function(i){return i[i.baseValue=0]="baseValue",i[i.additiveBonus=1]="additiveBonus",i[i.multiplierAdditive=2]="multiplierAdditive",i[i.multiplierMultiplicative=3]="multiplierMultiplicative",i[i.unlockAttribute=99]="unlockAttribute",i}({})),i("BuildingType",function(i){return i[i.bigKiwi=0]="bigKiwi",i[i.autoKiwiker=1]="autoKiwiker",i[i.stuffer=2]="stuffer",i[i.sekiwity=3]="sekiwity",i[i.castle=4]="castle",i}({})),i("SkillNodeSize",function(i){return i[i.Small=0]="Small",i[i.Medium=1]="Medium",i[i.Big=2]="Big",i[i.Bigger=3]="Bigger",i[i.Gigantic=4]="Gigantic",i}({}));e._RF.pop()}}}));

System.register("chunks:///_virtual/ToggleableColorScheme.ts",["./rollupPluginModLoBabelHelpers.js","cc","./KiwiText.ts","./GameParameters.ts"],(function(e){var t,o,r,i,n,s,l,c,h,a,u,m,f,g;return{setters:[function(e){t=e.applyDecoratedDescriptor,o=e.inheritsLoose,r=e.initializerDefineProperty,i=e.assertThisInitialized,n=e.createClass},function(e){s=e.cclegacy,l=e._decorator,c=e.Enum,h=e.Sprite,a=e.Button,u=e.Component},function(e){m=e.KiwiText},function(e){f=e.ColorSchemes,g=e.ColorFormatter}],execute:function(){var p,S,_,C,b,d,y,k,w,O,T,v,z,E,q,x,D;s._RF.push({},"060dcXDDNNLCrq7tzKIk01V","ToggleableColorScheme",void 0);var B=l.ccclass,F=l.property;e("ToggleableColorScheme",(p=B("ToggleableColorScheme"),S=F({type:c(f)}),_=F({type:c(f)}),C=F({type:h}),b=F({type:h}),d=F({type:h}),y=F({type:m}),k=F({type:a}),p((T=t((O=function(e){function t(){for(var t,o=arguments.length,n=new Array(o),s=0;s<o;s++)n[s]=arguments[s];return t=e.call.apply(e,[this].concat(n))||this,r(t,"toggleOnScheme",T,i(t)),t._onScheme=void 0,r(t,"toggleOffScheme",v,i(t)),t._offScheme=void 0,r(t,"sprites_lighterColor",z,i(t)),r(t,"sprites_darkerColor",E,i(t)),r(t,"sprites_contrastColor",q,i(t)),r(t,"kiwiTexts_contrastColor",x,i(t)),r(t,"buttons",D,i(t)),t._isOn=null,t}o(t,e);var s=t.prototype;return s.setSchemeToggle=function(e){e!=this._isOn&&(this._isOn=e,this.setElementsToScheme(this._isOn?this.onScheme:this.offScheme))},s.setColorScheme_isOn=function(e){this._onScheme=e,this.isOn&&this.setElementsToScheme(this.onScheme)},s.setColorScheme_isOff=function(e){this._offScheme=e,this.isOn||this.setElementsToScheme(this.offScheme)},s.setElementsToScheme=function(e){for(var t=0;t<this.sprites_lighterColor.length;t++)this.sprites_lighterColor[t].color=e.lighterColor;for(var o=0;o<this.sprites_darkerColor.length;o++)this.sprites_darkerColor[o].color=e.darkerColor;for(var r=0;r<this.sprites_contrastColor.length;r++)this.sprites_contrastColor[r].color=e.contrastColor;for(var i=0;i<this.kiwiTexts_contrastColor.length;i++)this.kiwiTexts_contrastColor[i].color=e.contrastColor;for(var n=0;n<this.buttons.length;n++)this.buttons[n].hoverColor=e.highlightColor,this.buttons[n].normalColor=e.lighterColor,this.buttons[n].pressedColor=e.lighterColor,this.buttons[n].disabledColor=e.contrastColor},s.getSchemeFromEnum=function(e){switch(e){default:case f.stone:return g.colorScheme_stone;case f.golden:return g.colorScheme_golden;case f.aqua:return g.colorScheme_aqua;case f.aquaDark:return g.colorScheme_aquaDark;case f.kursed:return g.colorScheme_kursed;case f.kursedBright:return g.colorScheme_kursedBright;case f.adRequestBlue:return g.colorScheme_adRequestBlue;case f.confirmationGreen:return g.colorScheme_confirmationGreen;case f.warningRed:return g.colorScheme_warningRed}},n(t,[{key:"onScheme",get:function(){return null==this._onScheme&&(this._onScheme=this.getSchemeFromEnum(this.toggleOnScheme)),this._onScheme}},{key:"offScheme",get:function(){return null==this._offScheme&&(this._offScheme=this.getSchemeFromEnum(this.toggleOffScheme)),this._offScheme}},{key:"isOn",get:function(){return this._isOn}}]),t}(u)).prototype,"toggleOnScheme",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return f.golden}}),v=t(O.prototype,"toggleOffScheme",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return f.stone}}),z=t(O.prototype,"sprites_lighterColor",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),E=t(O.prototype,"sprites_darkerColor",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),q=t(O.prototype,"sprites_contrastColor",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),x=t(O.prototype,"kiwiTexts_contrastColor",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),D=t(O.prototype,"buttons",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),w=O))||w));s._RF.pop()}}}));

System.register("chunks:///_virtual/TransformWhenBoosted.ts",["./rollupPluginModLoBabelHelpers.js","cc","./StaticDataStructures.ts","./KiwiText.ts","./KiwiInterfaceComponent.ts","./GameSession.ts"],(function(t){var e,r,i,n,a,o,l,s,u,p,f,c,m,h,b,y,S;return{setters:[function(t){e=t.applyDecoratedDescriptor,r=t.inheritsLoose,i=t.initializerDefineProperty,n=t.assertThisInitialized,a=t.createClass},function(t){o=t.cclegacy,l=t._decorator,s=t.Enum,u=t.ParticleSystem2D,p=t.Sprite,f=t.SpriteFrame,c=t.Color,m=t.CCString},function(t){h=t.BuildingType},function(t){b=t.KiwiText},function(t){y=t.KiwiInterfaceComponent},function(t){S=t.GameSession}],execute:function(){var g,d,T,w,C,z,B,v,P,x,D,K,A,F,L,W,_,k,I,R,E;o._RF.push({},"9ad49rypv1NO6CH6KwwqfhR","TransformWhenBoosted",void 0);var G=l.ccclass,H=l.property;t("TransformWhenBoosted",(g=G("TransformWhenBoosted"),d=H({type:s(h)}),T=H({type:u}),w=H({type:p}),C=H({type:f}),z=H({type:p}),B=H({type:c}),v=H({type:b}),P=H({type:m}),x=H({type:c}),g((A=e((K=function(t){function e(){for(var e,r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return e=t.call.apply(t,[this].concat(a))||this,i(e,"pairedBuildingType",A,n(e)),i(e,"transformationParticlePoof",F,n(e)),i(e,"transformableSprite",L,n(e)),i(e,"alternateSprites",W,n(e)),i(e,"recolorableSprite",_,n(e)),i(e,"alternateColors",k,n(e)),i(e,"transformableText",I,n(e)),i(e,"alternateStrings",R,n(e)),i(e,"alternateStringColors",E,n(e)),e.isTransformed=!1,e}r(e,t);var o=e.prototype;return o.initialize=function(e){t.prototype.initialize.call(this,e),this.interfaceManager.registerLiveDataElement(this),this.liveDataArray.push(S.getBoostForBuilding(this.pairedBuildingType))},o.onDataUpdate=function(){this.setTransformedState(this.pairedBoostAttribute.timeLeft>0)},o.setTransformedState=function(t){this.isTransformed!=t&&(this.isTransformed=t,t||null==this.transformationParticlePoof||this.transformationParticlePoof.resetSystem(),null!=this.transformableSprite&&(this.transformableSprite.spriteFrame=this.isTransformed?this.alternateSprites[1]:this.alternateSprites[0]),null!=this.recolorableSprite&&(this.recolorableSprite.color=this.isTransformed?this.alternateColors[1]:this.alternateColors[0]),null!=this.transformableText&&(this.transformableText.text=this.isTransformed?this.alternateStrings[1]:this.alternateStrings[0],this.transformableText.color=this.isTransformed?this.alternateStringColors[1]:this.alternateStringColors[0]))},a(e,[{key:"pairedBoostAttribute",get:function(){return this.liveDataArray[0]}}]),e}(y)).prototype,"pairedBuildingType",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return h.autoKiwiker}}),F=e(K.prototype,"transformationParticlePoof",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=e(K.prototype,"transformableSprite",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),W=e(K.prototype,"alternateSprites",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),_=e(K.prototype,"recolorableSprite",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=e(K.prototype,"alternateColors",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),I=e(K.prototype,"transformableText",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=e(K.prototype,"alternateStrings",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),E=e(K.prototype,"alternateStringColors",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),D=K))||D));o._RF.pop()}}}));

System.register("chunks:///_virtual/TutorialController.ts",["./rollupPluginModLoBabelHelpers.js","cc","./TutorialStepView.ts","./StaticDataStructures.ts","./GameSession.ts","./GameManager.ts"],(function(t){var e,i,r,n,a,s,u,o,l,c,p,h,g,y,f;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.createClass,r=t.inheritsLoose,n=t.initializerDefineProperty,a=t.assertThisInitialized},function(t){s=t.cclegacy,u=t._decorator,o=t.Enum,l=t.Component},function(t){c=t.TutorialStepView},function(t){p=t.CurrencyType,h=t.WhatAttribute,g=t.BuildingType},function(t){y=t.GameSession},function(t){f=t.GameManager}],execute:function(){var S,v,d,b,k,A,m,w,C,D,P,V;s._RF.push({},"56c24NdtV9ArpbaXlgRfsfM","TutorialController",void 0);var B=u.ccclass,M=u.property,T=t("LearnAbout",function(t){return t[t.KiwiProduction=0]="KiwiProduction",t[t.BagSize=1]="BagSize",t[t.SekiwityProcess=2]="SekiwityProcess",t[t.DeliveryProcess=3]="DeliveryProcess",t[t.UpgradingBuildings=4]="UpgradingBuildings",t[t.ClickingSekiwity=5]="ClickingSekiwity",t[t.UnlockingBuildings=6]="UnlockingBuildings",t[t.SummoningKings=7]="SummoningKings",t[t.BuyingSkills=8]="BuyingSkills",t[t.HelpOverlay=9]="HelpOverlay",t[t.FreeBoosts=10]="FreeBoosts",t[t.ForgettingToClickSekiwity=11]="ForgettingToClickSekiwity",t}({})),_=t("TutorialStepProperties",(S=B("TutorialStepProperties"),v=M({type:o(T)}),d=M({type:c}),S((A=e((k=function(){n(this,"tutorialStep",A,this),n(this,"tutorialStepView",m,this)}).prototype,"tutorialStep",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return T.KiwiProduction}}),m=e(k.prototype,"tutorialStepView",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=k))||b)),z=(t("TutorialController",(w=B("TutorialController"),C=M({type:_}),w((V=e((P=function(t){function e(){for(var e,i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return e=t.call.apply(t,[this].concat(r))||this,n(e,"tutorialSteps",V,a(e)),e._tutorialSteps=[],e._completionIndex=0,e}r(e,t);var i=e.prototype;return i.initialize=function(t,e){for(var i=0;i<this.tutorialSteps.length;i++){var r=this.tutorialSteps[i],n=q.CreateStepFor(r,t.get("learnedAbout"+T[r.tutorialStep]),e);this._tutorialSteps.push(n)}},i.updateTutorialStates=function(t){for(var e=this._completionIndex;e<this._tutorialSteps.length&&this._tutorialSteps[e].getUpdatedActiveStepCompletionState(t);e++)this._completionIndex=e+1},i.forceCompleteCurrentStep=function(){this._tutorialSteps[this._completionIndex].forceStepCompletion()},e}(l)).prototype,"tutorialSteps",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),D=P))||D)),t("TutorialStep",function(){function t(t,e,i,r,n){this.interfaceManager=void 0,this.learnAboutWhat=void 0,this.tutorialStepView=void 0,this.saveableCompletionState=void 0,this.liveDataArray=[],this.stepWasActivated=!1,this.stepIsVisible=!1,this._currentTime=0,this._stepProgress=0,this.interfaceManager=r,this.learnAboutWhat=t,this.saveableCompletionState=e,this.tutorialStepView=i,this.initializeParameters(),this.getUpdatedCompletionState()||(this.setPreCompletionConditions(),this.tutorialStepView.initializeSubComponents(this.interfaceManager))}var e=t.prototype;return e.setPreCompletionConditions=function(){},e.doActivationSetup=function(){},e.onCompletion=function(){},e.forceStepCompletion=function(){this.saveableCompletionState.value=!0,this.checkStepActivation(),this.onCompletion(),this.tutorialStepView.doCelebration()},e.getUpdatedCompletionState=function(){if(this.saveableCompletionState.value)return!0;this.updateStepProgress();var t=this.stepProgress>=1;return t==this.saveableCompletionState.value||(this.saveableCompletionState.value=t,t&&(this.checkStepActivation(),this.onCompletion(),this.tutorialStepView.doCelebration())),this.saveableCompletionState.value},e.checkStepActivation=function(){this.stepWasActivated||(this.stepWasActivated=!0,this.doActivationSetup())},e.trySetVisibilityState=function(t){this.stepIsVisible==t||!this.canSetVisible&&t||(this.tutorialStepView.setElementVisibilityState(t),this.stepIsVisible=t)},e.getUpdatedActiveStepCompletionState=function(t){return this._currentTime+=t,!!this.getUpdatedCompletionState()||(this.checkStepActivation(),this.stepIsVisible==this.saveableCompletionState.value&&this.trySetVisibilityState(!this.saveableCompletionState.value),!1)},i(t,[{key:"canSetVisible",get:function(){return this.currentTime>1}},{key:"currentTime",get:function(){return this._currentTime}},{key:"stepProgress",get:function(){return this._stepProgress},set:function(t){this.tutorialStepView.setProgress(t),this._stepProgress=t}}]),t}())),L=t("LearnAbout_KiwiProduction",function(t){function e(){return t.apply(this,arguments)||this}r(e,t);var n=e.prototype;return n.initializeParameters=function(){this.liveDataArray.push(y.getCurrencyData(p.kiwi))},n.updateStepProgress=function(){this.stepProgress=this.kiwiCurrencyData.currentAmount/10},i(e,[{key:"kiwiCurrencyData",get:function(){return this.liveDataArray[0]}}]),e}(z)),x=t("LearnAbout_BagSize",function(t){function e(){return t.apply(this,arguments)||this}r(e,t);var n=e.prototype;return n.initializeParameters=function(){this.liveDataArray.push(y.getCurrencyData(p.kiwi)),this.liveDataArray.push(y.getAttribute(h.stuffer_bagSize))},n.updateStepProgress=function(){this.stepProgress=(this.kiwiCurrencyData.currentAmount-10)/(this.bagStufferAttribute.currentValue-10)},i(e,[{key:"kiwiCurrencyData",get:function(){return this.liveDataArray[0]}},{key:"bagStufferAttribute",get:function(){return this.liveDataArray[1]}},{key:"canSetVisible",get:function(){return this.currentTime>.5}}]),e}(z)),U=t("LearnAbout_SekiwityProcess",function(t){function e(){for(var e,i=arguments.length,r=new Array(i),n=0;n<i;n++)r[n]=arguments[n];return(e=t.call.apply(t,[this].concat(r))||this).visibilityStartTime=-1,e}r(e,t);var n=e.prototype;return n.initializeParameters=function(){},n.trySetVisibilityState=function(e){var i=this.stepIsVisible;t.prototype.trySetVisibilityState.call(this,e),this.stepIsVisible!=i&&(this.visibilityStartTime=this.currentTime)},n.updateStepProgress=function(){this.stepProgress=this.visibilityStartTime>0?(this.currentTime-this.visibilityStartTime)/6:0},i(e,[{key:"canSetVisible",get:function(){return this.currentTime>4.5}}]),e}(z)),H=t("LearnAbout_DeliveryProcess",function(t){function e(){return t.apply(this,arguments)||this}r(e,t);var n=e.prototype;return n.initializeParameters=function(){this.liveDataArray.push(y.getCurrencyData(p.koin)),this.liveDataArray.push(y.getAttribute(h.stuffer_bagSize))},n.setPreCompletionConditions=function(){this.interfaceManager.setCurrencyCounterHiddenState(p.koin,!0)},n.doActivationSetup=function(){this.interfaceManager.setCurrencyCounterHiddenState(p.koin,!1)},n.updateStepProgress=function(){this.stepProgress=this.koinCurrencyData.totalGained/(2*this.bagStufferAttribute.currentValue-5)},i(e,[{key:"koinCurrencyData",get:function(){return this.liveDataArray[0]}},{key:"bagStufferAttribute",get:function(){return this.liveDataArray[1]}},{key:"canSetVisible",get:function(){return this.currentTime>2}}]),e}(z)),F=t("LearnAbout_UpgradingBuildings",function(t){function e(){return t.apply(this,arguments)||this}r(e,t);var n=e.prototype;return n.initializeParameters=function(){this.liveDataArray.push(y.getBuildingData(g.bigKiwi)),this.liveDataArray.push(y.getBuildingData(g.autoKiwiker))},n.updateStepProgress=function(){this.stepProgress=(this.bigKiwiBuildingData.buildingLevel+this.autoKiwikerBuildingData.buildingLevel)/2},i(e,[{key:"bigKiwiBuildingData",get:function(){return this.liveDataArray[0]}},{key:"autoKiwikerBuildingData",get:function(){return this.liveDataArray[1]}}]),e}(z)),I=t("LearnAbout_ClickingSekiwity",function(t){function e(){for(var e,i=arguments.length,r=new Array(i),n=0;n<i;n++)r[n]=arguments[n];return(e=t.call.apply(t,[this].concat(r))||this).clickCount=0,e.lastMultiplierValue=1,e}r(e,t);var n=e.prototype;return n.initializeParameters=function(){this.liveDataArray.push(y.getSekiwityMultiplier()),this.liveDataArray.push(y.getCurrencyData(p.kiwi)),this.liveDataArray.push(y.getAttribute(h.stuffer_bagSize))},n.updateStepProgress=function(){this.lastMultiplierValue<=this.sekiwityMultiplierAttribute.currentValue&&this.clickCount++,this.lastMultiplierValue=this.sekiwityMultiplierAttribute.currentValue,this.stepProgress=this.clickCount/20},i(e,[{key:"sekiwityMultiplierAttribute",get:function(){return this.liveDataArray[0]}},{key:"kiwiCurrencyData",get:function(){return this.liveDataArray[1]}},{key:"bagStufferAttribute",get:function(){return this.liveDataArray[2]}},{key:"canSetVisible",get:function(){return this.kiwiCurrencyData.currentAmount/this.bagStufferAttribute.currentValue>1}}]),e}(z)),K=t("LearnAbout_UnlockingBuildings",function(t){function e(){return t.apply(this,arguments)||this}r(e,t);var n=e.prototype;return n.initializeParameters=function(){this.liveDataArray.push(y.getCurrencyData(p.koin)),this.liveDataArray.push(y.getBuildingData(g.stuffer))},n.setPreCompletionConditions=function(){y.getAttribute(h.king_currentExperience).setUnlockedState(!1),this.interfaceManager.setBuildingLevelButtonHiddenState(g.stuffer,!0),this.interfaceManager.setBuildingLevelButtonHiddenState(g.sekiwity,!0),this.interfaceManager.setBuildingLevelButtonHiddenState(g.castle,!0)},n.doActivationSetup=function(){this.interfaceManager.setBuildingLevelButtonHiddenState(g.stuffer,!1)},n.onCompletion=function(){y.getAttribute(h.king_currentExperience).setUnlockedState(!0),this.interfaceManager.setBuildingLevelButtonHiddenState(g.sekiwity,!1),this.interfaceManager.setBuildingLevelButtonHiddenState(g.castle,!1)},n.updateStepProgress=function(){this.bagStufferData.buildingLevel>0?this.stepProgress=1:this.stepProgress=Math.min(.99,this.koinCurrencyData.currentAmount/this.bagStufferData.staticBuildingData.baseCost)},i(e,[{key:"koinCurrencyData",get:function(){return this.liveDataArray[0]}},{key:"bagStufferData",get:function(){return this.liveDataArray[1]}}]),e}(z)),E=t("LearnAbout_SummoningKings",function(t){function e(){for(var e,i=arguments.length,r=new Array(i),n=0;n<i;n++)r[n]=arguments[n];return(e=t.call.apply(t,[this].concat(r))||this).distanceFromMaximumExperience=30,e}r(e,t);var n=e.prototype;return n.initializeParameters=function(){this.liveDataArray.push(y.getAttribute(h.king_currentExperience)),this.liveDataArray.push(y.getAttribute(h.king_currentExperienceRequirement)),this.liveDataArray.push(y.getAttribute(h.king_currentLevel))},n.setPreCompletionConditions=function(){this.experienceAttribute.setUnlockedState(!1)},n.doActivationSetup=function(){this.experienceAttribute.setUnlockedState(!0)},n.updateStepProgress=function(){this.stepProgress=this.currentLevelAttribute.currentValue>0?1:(this.experienceAttribute.currentValue-(this.experienceRequirementAttribute.currentValue-this.distanceFromMaximumExperience))/this.distanceFromMaximumExperience},i(e,[{key:"experienceAttribute",get:function(){return this.liveDataArray[0]}},{key:"experienceRequirementAttribute",get:function(){return this.liveDataArray[1]}},{key:"currentLevelAttribute",get:function(){return this.liveDataArray[2]}},{key:"canSetVisible",get:function(){return this.experienceAttribute.currentValue>this.experienceRequirementAttribute.currentValue-this.distanceFromMaximumExperience}}]),e}(z)),R=t("LearnAbout_BuyingSkills",function(t){function e(){return t.apply(this,arguments)||this}r(e,t);var n=e.prototype;return n.initializeParameters=function(){this.liveDataArray.push(y.getCurrencyData(p.token))},n.setPreCompletionConditions=function(){this.interfaceManager.setCurrencyCounterHiddenState(p.token,!0)},n.doActivationSetup=function(){this.interfaceManager.setCurrencyCounterHiddenState(p.token,!1)},n.updateStepProgress=function(){this.stepProgress=this.tokenCurrencyData.totalSpent>0?1:0},i(e,[{key:"tokenCurrencyData",get:function(){return this.liveDataArray[0]}},{key:"canSetVisible",get:function(){return this.tokenCurrencyData.totalGained>0}}]),e}(z)),W=t("LearnAbout_HelpOverlay",function(t){function e(){return t.apply(this,arguments)||this}r(e,t);var i=e.prototype;return i.initializeParameters=function(){},i.doActivationSetup=function(){this.interfaceManager.openHelpScreen()},i.updateStepProgress=function(){this.stepProgress=this.stepWasActivated&&!this.interfaceManager.isHelpScreenOpen?1:0},e}(z)),G=t("LearnAbout_FreeBoosts",function(t){function e(){return t.apply(this,arguments)||this}r(e,t);var n=e.prototype;return n.initializeParameters=function(){this.liveDataArray.push(y.getBoostManager().timeMultiplierAttribute)},n.setPreCompletionConditions=function(){f.instance.getAttributeFromType(h.timeBoost_currentDuration).setUnlockedState(!1),this.timeMultiplierAttribute.setUnlockedState(!1)},n.doActivationSetup=function(){f.instance.getAttributeFromType(h.timeBoost_currentDuration).setUnlockedState(!0)},n.onCompletion=function(){this.timeMultiplierAttribute.setUnlockedState(!0)},n.updateStepProgress=function(){this.stepProgress=this.timeMultiplierAttribute.currentValue>1?1:0},i(e,[{key:"timeMultiplierAttribute",get:function(){return this.liveDataArray[0]}}]),e}(z)),O=t("LearnAbout_ForgetingToClickSekiwity",function(t){function e(){for(var e,i=arguments.length,r=new Array(i),n=0;n<i;n++)r[n]=arguments[n];return(e=t.call.apply(t,[this].concat(r))||this).lastHighMultiTime=0,e.checkIntervalDuration=30,e.highMultiThreshold=3,e}r(e,t);var n=e.prototype;return n.initializeParameters=function(){this.liveDataArray.push(y.getSekiwityMultiplier()),this.liveDataArray.push(y.getCurrencyData(p.kiwi)),this.liveDataArray.push(y.getAttribute(h.stuffer_bagSize))},n.trySetVisibilityState=function(e){var i=this.stepIsVisible;t.prototype.trySetVisibilityState.call(this,e),this.stepIsVisible!=i&&this.stepIsVisible&&(this.checkIntervalDuration+=15,this.lastHighMultiTime=this.currentTime,this.stepProgress=0)},n.updateStepProgress=function(){if(this.stepIsVisible)this.stepProgress=(this.sekiwityMultiplierAttribute.currentValue-1)/(this.highMultiThreshold-1);else{if(this.sekiwityMultiplierAttribute.currentValue<this.highMultiThreshold)return;this.lastHighMultiTime=this.currentTime}},i(e,[{key:"sekiwityMultiplierAttribute",get:function(){return this.liveDataArray[0]}},{key:"kiwiCurrency",get:function(){return this.liveDataArray[1]}},{key:"bagSize",get:function(){return this.liveDataArray[2]}},{key:"canSetVisible",get:function(){return this.currentTime-this.lastHighMultiTime>=this.checkIntervalDuration&&this.kiwiCurrency.currentAmount/this.bagSize.currentValue>=5}}]),e}(z)),q=t("TutorialStepFactory",function(t){function e(){return t.apply(this,arguments)||this}return r(e,t),e.CreateStepFor=function(t,e,i){switch(t.tutorialStep){default:return null;case T.KiwiProduction:return new L(T.KiwiProduction,e,t.tutorialStepView,i);case T.BagSize:return new x(T.BagSize,e,t.tutorialStepView,i);case T.SekiwityProcess:return new U(T.SekiwityProcess,e,t.tutorialStepView,i);case T.DeliveryProcess:return new H(T.DeliveryProcess,e,t.tutorialStepView,i);case T.UpgradingBuildings:return new F(T.UpgradingBuildings,e,t.tutorialStepView,i);case T.ClickingSekiwity:return new I(T.ClickingSekiwity,e,t.tutorialStepView,i);case T.UnlockingBuildings:return new K(T.UnlockingBuildings,e,t.tutorialStepView,i);case T.SummoningKings:return new E(T.SummoningKings,e,t.tutorialStepView,i);case T.BuyingSkills:return new R(T.BuyingSkills,e,t.tutorialStepView,i);case T.HelpOverlay:return new W(T.HelpOverlay,e,t.tutorialStepView,i);case T.FreeBoosts:return new G(T.FreeBoosts,e,t.tutorialStepView,i);case T.ForgettingToClickSekiwity:return new O(T.ForgettingToClickSekiwity,e,t.tutorialStepView,i)}},e}(z));s._RF.pop()}}}));

System.register("chunks:///_virtual/TutorialStepView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ProgressBubble.ts","./RepeatingPointer.ts"],(function(t){var e,i,r,n,o,l,u,s,a;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,r=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){o=t.cclegacy,l=t._decorator,u=t.Component},function(t){s=t.ProgressBubble},function(t){a=t.RepeatingPointer}],execute:function(){var p,c,b,h,f,g,v;o._RF.push({},"f9305n82ZdHlaimJeGksNWG","TutorialStepView",void 0);var y=l.ccclass,B=l.property;t("TutorialStepView",(p=y("TutorialStepView"),c=B({type:s}),b=B({type:a}),p((g=e((f=function(t){function e(){for(var e,i=arguments.length,o=new Array(i),l=0;l<i;l++)o[l]=arguments[l];return e=t.call.apply(t,[this].concat(o))||this,r(e,"tutorialBubble",g,n(e)),r(e,"pointers",v,n(e)),e}i(e,t);var o=e.prototype;return o.initializeSubComponents=function(t){null!=this.tutorialBubble&&this.tutorialBubble.initialize(t);for(var e=0;e<this.pointers.length;e++)this.pointers[e].initialize(t)},o.setElementVisibilityState=function(t){this.node.active=t,null!=this.tutorialBubble&&(this.tutorialBubble.node.active=t);for(var e=0;e<this.pointers.length;e++)this.pointers[e].node.active=t},o.setProgress=function(t){null!=this.tutorialBubble&&this.tutorialBubble.setProgress(t)},o.doCelebration=function(){for(var t=0;t<this.pointers.length;t++)this.pointers[t].node.active=!1;null!=this.tutorialBubble&&this.tutorialBubble.celebrateCompletion()},e}(u)).prototype,"tutorialBubble",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=e(f.prototype,"pointers",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),h=f))||h));o._RF.pop()}}}));

System.register("chunks:///_virtual/TyrantUtils.ts",["cc"],(function(t){var n,e,r,a,i,u;return{setters:[function(t){n=t.cclegacy,e=t._decorator,r=t.Vec3,a=t.Vec2,i=t.math,u=t.Color}],execute:function(){var o,s;n._RF.push({},"466c2OZIuZISq214vWwi0QI","TyrantUtils",void 0);var c=e.ccclass,l=(e.property,t("CardinalDirection",function(t){return t[t.NORTH=0]="NORTH",t[t.NORTHEAST=1]="NORTHEAST",t[t.EAST=2]="EAST",t[t.SOUTHEAST=3]="SOUTHEAST",t[t.SOUTH=4]="SOUTH",t[t.SOUTHWEST=5]="SOUTHWEST",t[t.WEST=6]="WEST",t[t.NORTHWEST=7]="NORTHWEST",t}({}))),h=t("EaseType",function(t){return t[t.Linear=0]="Linear",t[t.In=1]="In",t[t.Out=2]="Out",t[t.InOut=3]="InOut",t[t.OutIn=4]="OutIn",t[t.ThirdIn=5]="ThirdIn",t[t.ThirdOut=6]="ThirdOut",t[t.ThirdInOut=7]="ThirdInOut",t[t.OutElastic=8]="OutElastic",t[t.StepClimbTriple=9]="StepClimbTriple",t[t.HalfIn=10]="HalfIn",t[t.HalfOut=11]="HalfOut",t[t.HalfInOut=12]="HalfInOut",t}({}));t("TyrantUtils",c("TyrantUtils")(((s=function(){function t(){}return t.angleFromVector=function(t,n){return(360+57.3*Math.atan2(n,t))%360},t.vectorFromAngle=function(t){var n=this.degreesToRadians(t);return new a(Math.cos(n),Math.sin(n))},t.roundToOctaCardinalAngle=function(t){return t<22.5||t>=337.5?0:t<67.5?45:t<112.5?90:t<157.5?135:t<202.5?180:t<247.5?225:t<292.5?270:315},t.horizontalSignFromAngle=function(t){return t<=90||t>270?1:-1},t.verticalSignFromAngle=function(t){return t<180?1:-1},t.triCardinalDirectionFromAngle=function(t){return t<22.5||t>=337.5?[l.EAST,this.triCardinalDirectionData[2]]:t<67.5?[l.NORTHEAST,this.triCardinalDirectionData[1]]:t<112.5?[l.NORTH,this.triCardinalDirectionData[0]]:t<157.5?[l.NORTHEAST,this.triCardinalDirectionData[7]]:t<202.5?[l.EAST,this.triCardinalDirectionData[6]]:t<247.5?[l.NORTHEAST,this.triCardinalDirectionData[5]]:t<292.5?[l.NORTH,this.triCardinalDirectionData[4]]:[l.NORTHEAST,this.triCardinalDirectionData[3]]},t.pentaCardinalDirectionFromAngle=function(t){return t<22.5||t>=337.5?[l.EAST,this.pentaCardinalDirectionData[2]]:t<67.5?[l.NORTHEAST,this.pentaCardinalDirectionData[1]]:t<112.5?[l.NORTH,this.pentaCardinalDirectionData[0]]:t<157.5?[l.NORTHEAST,this.pentaCardinalDirectionData[7]]:t<202.5?[l.EAST,this.pentaCardinalDirectionData[6]]:t<247.5?[l.SOUTHEAST,this.pentaCardinalDirectionData[5]]:t<292.5?[l.SOUTH,this.pentaCardinalDirectionData[4]]:[l.SOUTHEAST,this.pentaCardinalDirectionData[3]]},t.setWorldToCanvasPosition=function(t,n,e){t.x-=n/2,t.y-=e/2},t.pingPong=function(t,n){var e=2*n;return(t%=e)>n?e-t:t},t.radiansToDegrees=function(t){return 57.2958*t},t.degreesToRadians=function(t){return t/57.2958},t.ease=function(t,n){switch(n){case h.Linear:return t;case h.In:return this.easeIn(t);case h.Out:return this.easeOut(t);default:case h.InOut:return this.easeInOut(t);case h.OutIn:return this.easeOutIn(t);case h.ThirdIn:return this.easeThirddIn(t);case h.ThirdOut:return this.easeThirdOut(t);case h.ThirdInOut:return this.easeThirdInOut(t);case h.OutElastic:return this.easeOutElastic(t);case h.In:return this.easeHalfIn(t);case h.Out:return this.easeHalfOut(t);case h.InOut:return this.easeHalfInOut(t)}},t.easeHalfIn=function(t){return Math.pow(t,1.5)},t.easeHalfOut=function(t){return 1-Math.pow(1-t,1.5)},t.easeHalfInOut=function(t){return t<.5?2*Math.pow(t,1.5):1-Math.pow(2-2*t,1.5)/2},t.easeIn=function(t){return Math.pow(t,2)},t.easeOut=function(t){return 1-Math.pow(1-t,2)},t.easeInOut=function(t){return t<.5?2*Math.pow(t,2):1-Math.pow(2-2*t,2)/2},t.easeOutIn=function(t){return t<.5?(1-Math.pow(1-2*t,2))/2:(1+Math.pow(2*t-1,2))/2},t.easeOutElastic=function(t){var n=i.TWO_PI/2;return t<=0?0:Math.pow(2,-10*t)*Math.sin((10*t-.75)*n)+1},t.easeThirdInOut=function(t){return Math.pow(t,3)*(3-2*t)},t.easeThirddIn=function(t){return Math.pow(t,3)},t.easeThirdOut=function(t){return t<.5?2*Math.pow(t,3):1-Math.pow(-2*t+2,3)/2},t.easeStepClimbTriple=function(t){return 1*Math.floor(3*t)/3+this.easeInOut(Math.min(1,t%(1/3)/(1/6)))},t.getVector2planeDistance=function(t,n){return new a(n.x-t.x,n.y-t.y)},t.getVector3planeDistance=function(t,n){return new a(n.x-t.x,n.y-t.y)},t.setLayerRecursively=function(t,n){if(t.layer=n,!(t.children.length<=0))for(var e=0;e<t.children.length;e++){var r=t.children[e];r.layer=n,r.children.length>0&&this.setLayerRecursively(r,n)}},t.setColorAlpha=function(t,n){return new u(t.r,t.g,t.b,255*n)},t.lerpColors=function(t,n,e){return new u(i.lerp(t.r,n.r,e),i.lerp(t.g,n.g,e),i.lerp(t.b,n.b,e))},t.multiplyColors=function(t,n){return new u(t.r*n.r/255,t.g*n.g/255,t.b*n.b/255,t.a)},t.multiplyColorsPartially=function(t,n,e){var r=this.multiplyColors(t,n),a=100-e;return new u((t.r*a+r.r*e)/100,(t.g*a+r.g*e)/100,(t.b*a+r.b*e)/100,t.a)},t.vector2lerp=function(t,n,e){return new a(i.lerp(t.x,n.x,e),i.lerp(t.y,n.y,e))},t.summation=function(t){return(t*t+t)/2},t.exponation=function(t,n){return(1-Math.pow(t,n))/(1-t)},t}()).triCardinalDirectionData=[new r(0,1,1),new r(1,1,1),new r(1,0,1),new r(1,-1,-1),new r(0,-1,-1),new r(-1,-1,1),new r(-1,0,-1),new r(-1,1,-1)],s.pentaCardinalDirectionData=[new r(0,1,1),new r(1,1,1),new r(1,0,1),new r(1,-1,1),new r(0,-1,1),new r(-1,-1,-1),new r(-1,0,-1),new r(-1,1,-1)],o=s))||o);n._RF.pop()}}}));

System.register("chunks:///_virtual/UnlockBuildingAnimationController.ts",["./rollupPluginModLoBabelHelpers.js","cc","./KiwiInterfaceAnimator.ts","./GameParameters.ts","./SimpleAnimator.ts"],(function(t){var i,n,o,e,r,a,l,c,s,u,p,m,h,d,f,w;return{setters:[function(t){i=t.applyDecoratedDescriptor,n=t.inheritsLoose,o=t.initializerDefineProperty,e=t.assertThisInitialized},function(t){r=t.cclegacy,a=t._decorator,l=t.Node,c=t.Sprite,s=t.ParticleSystem2D,u=t.Color},function(t){p=t.KiwiInterfaceAnimator},function(t){m=t.ColorFormatter},function(t){h=t.OnePerObjectAnimator,d=t.AnimateColorFromTo,f=t.AnimateShake,w=t.Animate}],execute:function(){var k,y,A,b,g,S,C,v,z,_,E;r._RF.push({},"be84cf2DWVPJ7YNzQ3sV+h1","UnlockBuildingAnimationController",void 0);var U=a.ccclass,D=a.property,P=(t("UnlockBuildingAnimationController",(k=U("UnlockBuildingAnimationController"),y=D({type:l}),A=D({type:c}),b=D({type:c}),g=D({type:s}),k((v=i((C=function(t){function i(){for(var i,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return i=t.call.apply(t,[this].concat(r))||this,o(i,"lockRootNode",v,e(i)),o(i,"lockSprite",z,e(i)),o(i,"glowSprite",_,e(i)),o(i,"particleSystems",E,e(i)),i.animator=new h(1,!0),i.weakGlowColor=new u(255,255,255,160),i}n(i,t);var r=i.prototype;return r.onDataUpdate=function(){},r.showReadyToUnlockVisuals=function(){this.glowSprite.node.active=!0,this.lockSprite.color=m.color_white,this.glowEndedCallback(),this.shakeEndedCallback()},r.playUnlockAnimation=function(){this.animator.discardAllAnimations(),this.particleSystems.forEach((function(t){t.resetSystem()}))},r.glowEndedCallback=function(){this.animator.addAnimations([new d(this.glowSprite,m.color_white,this.weakGlowColor,.28,[new d(this.glowSprite,this.weakGlowColor,m.color_white,.28,[new P(this)])])])},r.shakeEndedCallback=function(){this.animator.addAnimations([new f(this.lockRootNode,1.5,.07,2.1,[new R(this)])])},i}(p)).prototype,"lockRootNode",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=i(C.prototype,"lockSprite",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=i(C.prototype,"glowSprite",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=i(C.prototype,"particleSystems",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),S=C))||S)),t("SpecialAnimateCallback_replayLockGlow",function(t){function i(i){return t.call(this,i,0,[])||this}n(i,t);var o=i.prototype;return o.doAnimationInitialization=function(){this.objectToAnimate.glowEndedCallback()},o.doAnimationActions=function(){},i}(w))),R=t("SpecialAnimateCallback_replayLockShake",function(t){function i(i){return t.call(this,i,0,[])||this}n(i,t);var o=i.prototype;return o.doAnimationInitialization=function(){this.objectToAnimate.shakeEndedCallback()},o.doAnimationActions=function(){},i}(w));r._RF.pop()}}}));

System.register("chunks:///_virtual/VolumeController.ts",["./rollupPluginModLoBabelHelpers.js","cc","./KiwiInterfaceComponent.ts","./KiwiButtonController.ts","./GameParameters.ts","./AudioController.ts"],(function(t){var e,o,i,n,r,u,l,s,c,a,p,m,d,h,f,g;return{setters:[function(t){e=t.applyDecoratedDescriptor,o=t.inheritsLoose,i=t.initializerDefineProperty,n=t.assertThisInitialized,r=t.createClass},function(t){u=t.cclegacy,l=t._decorator,s=t.Slider,c=t.Node,a=t.Sprite,p=t.SpriteFrame},function(t){m=t.KiwiInterfaceComponent},function(t){d=t.KiwiButtonController,h=t.KiwiButtonPressAction},function(t){f=t.ColorFormatter},function(t){g=t.AudioController}],execute:function(){var S,v,y,B,V,b,C,M,P,_,w,I,k;u._RF.push({},"5e788VyFXVLsq7Dtx0mY2bM","VolumeController",void 0);var z=l.ccclass,A=l.property,F=(t("VolumeController",(S=z("VolumeController"),v=A({type:s}),y=A({type:c}),B=A({type:d}),V=A({type:a}),b=A({type:p}),S((P=e((M=function(t){function e(){for(var e,o=arguments.length,r=new Array(o),u=0;u<o;u++)r[u]=arguments[u];return e=t.call.apply(t,[this].concat(r))||this,i(e,"volumeSlider",P,n(e)),i(e,"activeVolumeScaler",_,n(e)),i(e,"toggleVolumeButton",w,n(e)),i(e,"volumeButtonSprite",I,n(e)),i(e,"volumeButtonIcons",k,n(e)),e._currentVolume=.8,e._isMuted=!1,e}o(e,t);var u=e.prototype;return u.initialize=function(e){t.prototype.initialize.call(this,e),this.toggleVolumeButton.addPrimaryPointerAction(new F(this)),this.setSliderProgress(g.instance.currentVolume)},u.onDataUpdate=function(){},u.onLoad=function(){this.volumeSlider.node.on("slide",this.onSlideCallback,this)},u.onSlideCallback=function(t){this.currentVolume=t.progress,g.instance.setVolume(this.currentVolume),this.updateActivePortionScaler(),this.updateButtonIcon()},u.receiveToggleMuteButtonPressedCallback=function(){this.setMuteState(!this.isMuted)},u.setMuteState=function(t){this.isMuted!=t&&(this.isMuted=t,g.instance.setMutedState(this.isMuted),this.volumeButtonSprite.color=t?f.colorScheme_warningRed.darkerColor:f.currencyColorScheme_koin.frameColor,this.toggleVolumeButton.setButtonVisuals_activeColorScheme(!t,!1),this.updateButtonIcon())},u.setSliderProgress=function(t){this.volumeSlider.progress=t,this.updateActivePortionScaler(),this.updateButtonIcon()},u.updateActivePortionScaler=function(){var t=this.currentVolume;this.activeVolumeScaler.setScale(t,1,1)},u.updateButtonIcon=function(){var t,e=this.currentVolume;t=this.isMuted?0:e>.8?4:e>.3?3:e>0?2:1,this.volumeButtonSprite.spriteFrame=this.volumeButtonIcons[t]},r(e,[{key:"currentVolume",get:function(){return this._currentVolume},set:function(t){this._currentVolume=t}},{key:"isMuted",get:function(){return this._isMuted},set:function(t){this._isMuted=t}}]),e}(m)).prototype,"volumeSlider",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=e(M.prototype,"activeVolumeScaler",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=e(M.prototype,"toggleVolumeButton",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=e(M.prototype,"volumeButtonSprite",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=e(M.prototype,"volumeButtonIcons",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),C=M))||C)),t("OnButtonPress_ToggleMutedState",function(t){function e(){return t.apply(this,arguments)||this}return o(e,t),e.prototype.doButtonPressAction=function(t){this.interactionObject.receiveToggleMuteButtonPressedCallback()},e}(h)));u._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});